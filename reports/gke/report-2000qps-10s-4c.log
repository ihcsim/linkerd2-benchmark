1.3.1-pre unknown go1.11.2
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:31:39 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:31:39 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:31:49 I periodic.go:533> T003 ended after 10.000473504s : 5000 calls. qps=499.9763259209771
06:31:49 I periodic.go:533> T002 ended after 10.000795095s : 5000 calls. qps=499.96024841062894
06:31:49 I periodic.go:533> T001 ended after 10.000880184s : 5000 calls. qps=499.95599467327844
06:31:49 I periodic.go:533> T000 ended after 10.000956256s : 5000 calls. qps=499.9521917716905
Ended after 10.0010248s : 20000 calls. qps=1999.8
Sleep times : count 19996 avg 0.0013725661 +/- 0.0005902 min -0.006543893 max 0.001756826 sum 27.4458315
Aggregated Function Time : count 20000 avg 0.00036825437 +/- 0.0003051 min 9.858e-05 max 0.004939414 sum 7.36508739
# range, mid point, percentile, count
>= 9.858e-05 <= 0.0001 , 9.929e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 3.15, 629
> 0.0002 <= 0.0003 , 0.00025 , 43.74, 8118
> 0.0003 <= 0.0004 , 0.00035 , 81.30, 7511
> 0.0004 <= 0.0005 , 0.00045 , 92.85, 2311
> 0.0005 <= 0.0006 , 0.00055 , 95.66, 561
> 0.0006 <= 0.0007 , 0.00065 , 96.45, 160
> 0.0007 <= 0.0008 , 0.00075 , 96.73, 56
> 0.0008 <= 0.0009 , 0.00085 , 96.89, 32
> 0.0009 <= 0.001 , 0.00095 , 97.29, 79
> 0.001 <= 0.0011 , 0.00105 , 97.52, 45
> 0.0011 <= 0.0012 , 0.00115 , 97.88, 72
> 0.0012 <= 0.0014 , 0.0013 , 98.49, 123
> 0.0014 <= 0.0016 , 0.0015 , 98.83, 69
> 0.0016 <= 0.0018 , 0.0017 , 98.98, 29
> 0.0018 <= 0.002 , 0.0019 , 99.23, 51
> 0.002 <= 0.0025 , 0.00225 , 99.47, 47
> 0.0025 <= 0.003 , 0.00275 , 99.67, 41
> 0.003 <= 0.0035 , 0.00325 , 99.72, 10
> 0.0035 <= 0.004 , 0.00375 , 99.89, 33
> 0.004 <= 0.0045 , 0.00425 , 99.96, 14
> 0.0045 <= 0.00493941 , 0.00471971 , 100.00, 8
# target 50% 0.000316669
# target 75% 0.000383238
# target 90% 0.000475335
# target 99% 0.00181569
# target 99.9% 0.00407143
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.368 ms avg, 1999.8 qps
Successfully wrote 4284 bytes of Json data to /data/2018-11-19-063139_http_baseline_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:31:49 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:31:49 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:31:59 I periodic.go:533> T000 ended after 10.000826538s : 5000 calls. qps=499.958676515543
06:31:59 I periodic.go:533> T001 ended after 10.001910147s : 5000 calls. qps=499.9045108898237
06:31:59 I periodic.go:533> T002 ended after 10.002110236s : 5000 calls. qps=499.8945104607823
06:31:59 I periodic.go:533> T003 ended after 10.002188543s : 5000 calls. qps=499.8905967933622
Ended after 10.002294584s : 20000 calls. qps=1999.5
Sleep times : count 19996 avg 0.0010833353 +/- 0.0004387 min -0.003386484 max 0.00149738 sum 21.662372
Aggregated Function Time : count 20000 avg 0.00068283014 +/- 0.0002986 min 0.000372548 max 0.005160101 sum 13.6566029
# range, mid point, percentile, count
>= 0.000372548 <= 0.0004 , 0.000386274 , 0.01, 3
> 0.0004 <= 0.0005 , 0.00045 , 0.51, 98
> 0.0005 <= 0.0006 , 0.00055 , 32.92, 6484
> 0.0006 <= 0.0007 , 0.00065 , 77.81, 8977
> 0.0007 <= 0.0008 , 0.00075 , 92.00, 2838
> 0.0008 <= 0.0009 , 0.00085 , 95.49, 698
> 0.0009 <= 0.001 , 0.00095 , 96.70, 242
> 0.001 <= 0.0011 , 0.00105 , 97.25, 109
> 0.0011 <= 0.0012 , 0.00115 , 97.67, 85
> 0.0012 <= 0.0014 , 0.0013 , 98.16, 97
> 0.0014 <= 0.0016 , 0.0015 , 98.72, 113
> 0.0016 <= 0.0018 , 0.0017 , 98.98, 53
> 0.0018 <= 0.002 , 0.0019 , 99.22, 46
> 0.002 <= 0.0025 , 0.00225 , 99.36, 29
> 0.0025 <= 0.003 , 0.00275 , 99.54, 36
> 0.003 <= 0.0035 , 0.00325 , 99.62, 16
> 0.0035 <= 0.004 , 0.00375 , 99.75, 27
> 0.004 <= 0.0045 , 0.00425 , 99.85, 19
> 0.0045 <= 0.005 , 0.00475 , 99.94, 18
> 0.005 <= 0.0051601 , 0.00508005 , 100.00, 12
# target 50% 0.000638042
# target 75% 0.00069374
# target 90% 0.000785906
# target 99% 0.00181304
# target 99.9% 0.00477778
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.683 ms avg, 1999.5 qps
Successfully wrote 4017 bytes of Json data to /data/2018-11-19-063149_http_linkerd_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:31:59 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:31:59 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:09 W periodic.go:487> T002 warning only did 4831 out of 5000 calls before reaching 10s
06:32:09 I periodic.go:533> T002 ended after 10.000757967s : 4831 calls. qps=483.06338538949666
06:32:09 W periodic.go:487> T001 warning only did 4834 out of 5000 calls before reaching 10s
06:32:09 I periodic.go:533> T001 ended after 10.002968142s : 4834 calls. qps=483.2565625899801
06:32:09 W periodic.go:487> T003 warning only did 4824 out of 5000 calls before reaching 10s
06:32:09 I periodic.go:533> T003 ended after 10.002987326s : 4824 calls. qps=482.25593443084205
06:32:09 W periodic.go:487> T000 warning only did 4834 out of 5000 calls before reaching 10s
06:32:09 I periodic.go:533> T000 ended after 10.002999931s : 4834 calls. qps=483.2550268264118
Ended after 10.003010885s : 19323 calls. qps=1931.7
Aggregated Sleep Time : count 19323 avg -0.17339684 +/- 0.1135 min -0.35573174 max 0.00123202 sum -3350.54707
# range, mid point, percentile, count
>= -0.355732 <= -0.001 , -0.178366 , 92.47, 17868
> -0.001 <= 0 , -0.0005 , 93.85, 266
> 0 <= 0.001 , 0.0005 , 99.99, 1187
> 0.001 <= 0.00123202 , 0.00111601 , 100.00, 2
# target 50% -0.163932
WARNING 92.47% of sleep were falling behind
Aggregated Function Time : count 19323 avg 0.0019535802 +/- 0.001035 min 0.000550991 max 0.023815223 sum 37.7490305
# range, mid point, percentile, count
>= 0.000550991 <= 0.0006 , 0.000575496 , 0.02, 3
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.09, 14
> 0.0008 <= 0.0009 , 0.00085 , 0.20, 21
> 0.0009 <= 0.001 , 0.00095 , 0.49, 55
> 0.001 <= 0.0011 , 0.00105 , 1.16, 130
> 0.0011 <= 0.0012 , 0.00115 , 2.59, 276
> 0.0012 <= 0.0014 , 0.0013 , 14.06, 2216
> 0.0014 <= 0.0016 , 0.0015 , 24.14, 1948
> 0.0016 <= 0.0018 , 0.0017 , 36.35, 2360
> 0.0018 <= 0.002 , 0.0019 , 74.35, 7342
> 0.002 <= 0.0025 , 0.00225 , 94.06, 3810
> 0.0025 <= 0.003 , 0.00275 , 95.87, 348
> 0.003 <= 0.0035 , 0.00325 , 96.53, 128
> 0.0035 <= 0.004 , 0.00375 , 97.48, 184
> 0.004 <= 0.0045 , 0.00425 , 98.43, 184
> 0.0045 <= 0.005 , 0.00475 , 98.87, 85
> 0.005 <= 0.006 , 0.0055 , 99.32, 87
> 0.006 <= 0.007 , 0.0065 , 99.57, 47
> 0.007 <= 0.008 , 0.0075 , 99.61, 8
> 0.01 <= 0.012 , 0.011 , 99.61, 1
> 0.012 <= 0.014 , 0.013 , 99.67, 11
> 0.014 <= 0.016 , 0.015 , 99.94, 52
> 0.016 <= 0.018 , 0.017 , 99.98, 8
> 0.02 <= 0.0238152 , 0.0219076 , 100.00, 4
# target 50% 0.00187185
# target 75% 0.00201657
# target 90% 0.00239694
# target 99% 0.00528471
# target 99.9% 0.0157183
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19323 (100.0 %)
Response Header Sizes : count 19323 avg 209.00005 +/- 0.007194 min 209 max 210 sum 4038508
Response Body/Total Sizes : count 19323 avg 209.00005 +/- 0.007194 min 209 max 210 sum 4038508
All done 19323 calls (plus 4 warmup) 1.954 ms avg, 1931.7 qps
Successfully wrote 4937 bytes of Json data to /data/2018-11-19-063159_http_istio_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:32:09 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:19 I periodic.go:533> T001 ended after 10.000698305s : 5000 calls. qps=499.9650871879791
06:32:19 I periodic.go:533> T002 ended after 10.001144847s : 5000 calls. qps=499.94276420262304
06:32:19 I periodic.go:533> T003 ended after 10.003200085s : 5000 calls. qps=499.84004693634
06:32:19 I periodic.go:533> T000 ended after 10.003258698s : 5000 calls. qps=499.8371181782667
Ended after 10.003274561s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.00095433178 +/- 0.001864 min -0.038038137 max 0.001689282 sum 19.0828183
Aggregated Function Time : count 20000 avg 0.00065039509 +/- 0.0006525 min 0.000172333 max 0.03986699 sum 13.0079019
# range, mid point, percentile, count
>= 0.000172333 <= 0.0002 , 0.000186166 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.30, 60
> 0.0003 <= 0.0004 , 0.00035 , 1.89, 316
> 0.0004 <= 0.0005 , 0.00045 , 15.20, 2662
> 0.0005 <= 0.0006 , 0.00055 , 55.94, 8148
> 0.0006 <= 0.0007 , 0.00065 , 82.85, 5383
> 0.0007 <= 0.0008 , 0.00075 , 92.89, 2007
> 0.0008 <= 0.0009 , 0.00085 , 95.91, 605
> 0.0009 <= 0.001 , 0.00095 , 96.77, 171
> 0.001 <= 0.0011 , 0.00105 , 96.97, 41
> 0.0011 <= 0.0012 , 0.00115 , 97.17, 39
> 0.0012 <= 0.0014 , 0.0013 , 97.56, 78
> 0.0014 <= 0.0016 , 0.0015 , 97.94, 78
> 0.0016 <= 0.0018 , 0.0017 , 98.44, 98
> 0.0018 <= 0.002 , 0.0019 , 98.95, 103
> 0.002 <= 0.0025 , 0.00225 , 99.31, 71
> 0.0025 <= 0.003 , 0.00275 , 99.44, 28
> 0.003 <= 0.0035 , 0.00325 , 99.53, 16
> 0.0035 <= 0.004 , 0.00375 , 99.64, 22
> 0.004 <= 0.0045 , 0.00425 , 99.80, 33
> 0.0045 <= 0.005 , 0.00475 , 99.91, 21
> 0.005 <= 0.006 , 0.0055 , 99.96, 11
> 0.006 <= 0.007 , 0.0065 , 99.98, 4
> 0.035 <= 0.039867 , 0.0374335 , 100.00, 4
# target 50% 0.000585432
# target 75% 0.000670834
# target 90% 0.000771251
# target 99% 0.00207042
# target 99.9% 0.00497619
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.650 ms avg, 1999.3 qps
Successfully wrote 3960 bytes of Json data to /data/2018-11-19-063209_grpc_baseline_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:32:19 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:29 I periodic.go:533> T003 ended after 10.001293882s : 5000 calls. qps=499.9353142695702
06:32:29 I periodic.go:533> T002 ended after 10.005740917s : 5000 calls. qps=499.7131188460893
06:32:29 I periodic.go:533> T001 ended after 10.00580602s : 5000 calls. qps=499.70986745153795
06:32:29 I periodic.go:533> T000 ended after 10.005821629s : 5000 calls. qps=499.709087908227
Ended after 10.005833799s : 20000 calls. qps=1998.8
Sleep times : count 19996 avg 0.0006772859 +/- 0.0006174 min -0.005107011 max 0.001424434 sum 13.5430088
Aggregated Function Time : count 20000 avg 0.0010206315 +/- 0.0003855 min 0.000477718 max 0.00698047 sum 20.4126297
# range, mid point, percentile, count
>= 0.000477718 <= 0.0005 , 0.000488859 , 0.01, 1
> 0.0005 <= 0.0006 , 0.00055 , 0.05, 9
> 0.0006 <= 0.0007 , 0.00065 , 0.53, 95
> 0.0007 <= 0.0008 , 0.00075 , 8.41, 1578
> 0.0008 <= 0.0009 , 0.00085 , 31.40, 4597
> 0.0009 <= 0.001 , 0.00095 , 62.72, 6264
> 0.001 <= 0.0011 , 0.00105 , 83.28, 4112
> 0.0011 <= 0.0012 , 0.00115 , 91.56, 1655
> 0.0012 <= 0.0014 , 0.0013 , 95.96, 881
> 0.0014 <= 0.0016 , 0.0015 , 96.86, 180
> 0.0016 <= 0.0018 , 0.0017 , 97.42, 111
> 0.0018 <= 0.002 , 0.0019 , 97.88, 93
> 0.002 <= 0.0025 , 0.00225 , 99.00, 224
> 0.0025 <= 0.003 , 0.00275 , 99.27, 54
> 0.003 <= 0.0035 , 0.00325 , 99.36, 19
> 0.0035 <= 0.004 , 0.00375 , 99.43, 13
> 0.004 <= 0.0045 , 0.00425 , 99.59, 33
> 0.0045 <= 0.005 , 0.00475 , 99.81, 44
> 0.005 <= 0.006 , 0.0055 , 99.97, 30
> 0.006 <= 0.00698047 , 0.00649024 , 100.00, 7
# target 50% 0.000959387
# target 75% 0.00105973
# target 90% 0.00118121
# target 99% 0.0025
# target 99.9% 0.00556667
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.021 ms avg, 1998.8 qps
Successfully wrote 3461 bytes of Json data to /data/2018-11-19-063219_grpc_linkerd_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:32:29 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:39 I periodic.go:533> T000 ended after 10.001086362s : 5000 calls. qps=499.94568780027095
06:32:39 I periodic.go:533> T002 ended after 10.015086172s : 5000 calls. qps=499.24682764876366
06:32:39 I periodic.go:533> T003 ended after 10.016102538s : 5000 calls. qps=499.1961674743789
06:32:39 I periodic.go:533> T001 ended after 10.016222573s : 5000 calls. qps=499.19018507816855
Ended after 10.016260804s : 20000 calls. qps=1996.8
Aggregated Sleep Time : count 19996 avg -0.00230287 +/- 0.004604 min -0.031898058 max 0.001371468 sum -46.048189
# range, mid point, percentile, count
>= -0.0318981 <= -0.001 , -0.016449 , 34.91, 6980
> -0.001 <= 0 , -0.0005 , 62.49, 5515
> 0 <= 0.001 , 0.0005 , 98.17, 7136
> 0.001 <= 0.00137147 , 0.00118573 , 100.00, 365
# target 50% -0.000452765
WARNING 34.91% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017075407 +/- 0.001138 min 0.000473159 max 0.025674395 sum 34.1508147
# range, mid point, percentile, count
>= 0.000473159 <= 0.0005 , 0.00048658 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.47, 92
> 0.0006 <= 0.0007 , 0.00065 , 1.89, 283
> 0.0007 <= 0.0008 , 0.00075 , 4.91, 603
> 0.0008 <= 0.0009 , 0.00085 , 10.49, 1117
> 0.0009 <= 0.001 , 0.00095 , 17.07, 1315
> 0.001 <= 0.0011 , 0.00105 , 21.78, 943
> 0.0011 <= 0.0012 , 0.00115 , 25.15, 674
> 0.0012 <= 0.0014 , 0.0013 , 32.02, 1375
> 0.0014 <= 0.0016 , 0.0015 , 46.49, 2893
> 0.0016 <= 0.0018 , 0.0017 , 66.80, 4062
> 0.0018 <= 0.002 , 0.0019 , 80.48, 2736
> 0.002 <= 0.0025 , 0.00225 , 92.89, 2483
> 0.0025 <= 0.003 , 0.00275 , 96.56, 734
> 0.003 <= 0.0035 , 0.00325 , 97.30, 146
> 0.0035 <= 0.004 , 0.00375 , 98.19, 179
> 0.004 <= 0.0045 , 0.00425 , 98.78, 119
> 0.0045 <= 0.005 , 0.00475 , 99.02, 46
> 0.005 <= 0.006 , 0.0055 , 99.42, 80
> 0.006 <= 0.007 , 0.0065 , 99.60, 37
> 0.007 <= 0.008 , 0.0075 , 99.61, 1
> 0.012 <= 0.014 , 0.013 , 99.64, 6
> 0.014 <= 0.016 , 0.015 , 99.87, 47
> 0.016 <= 0.018 , 0.017 , 99.96, 18
> 0.018 <= 0.02 , 0.019 , 99.98, 4
> 0.02 <= 0.025 , 0.0225 , 99.98, 1
> 0.025 <= 0.0256744 , 0.0253372 , 100.00, 3
# target 50% 0.00163456
# target 75% 0.00191988
# target 90% 0.00238341
# target 99% 0.00496739
# target 99.9% 0.0166667
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.708 ms avg, 1996.8 qps
Successfully wrote 4274 bytes of Json data to /data/2018-11-19-063229_grpc_istio_2000qps_10s_echo_0_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:32:39 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:32:39 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:49 I periodic.go:533> T001 ended after 10.000521799s : 5000 calls. qps=499.9739114113
06:32:49 I periodic.go:533> T002 ended after 10.001065887s : 5000 calls. qps=499.94671132997007
06:32:49 I periodic.go:533> T000 ended after 10.003024107s : 5000 calls. qps=499.84884036229187
06:32:49 I periodic.go:533> T003 ended after 10.003057985s : 5000 calls. qps=499.8471474920677
Ended after 10.003088195s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0013888207 +/- 0.0004633 min -0.007243559 max 0.001870338 sum 27.7708582
Aggregated Function Time : count 20000 avg 0.00036784653 +/- 0.0002745 min 9.5534e-05 max 0.005154937 sum 7.35693051
# range, mid point, percentile, count
>= 9.5534e-05 <= 0.0001 , 9.7767e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.75, 548
> 0.0002 <= 0.0003 , 0.00025 , 41.00, 7651
> 0.0003 <= 0.0004 , 0.00035 , 80.48, 7897
> 0.0004 <= 0.0005 , 0.00045 , 92.64, 2432
> 0.0005 <= 0.0006 , 0.00055 , 95.62, 595
> 0.0006 <= 0.0007 , 0.00065 , 96.22, 120
> 0.0007 <= 0.0008 , 0.00075 , 96.53, 63
> 0.0008 <= 0.0009 , 0.00085 , 96.78, 50
> 0.0009 <= 0.001 , 0.00095 , 97.50, 144
> 0.001 <= 0.0011 , 0.00105 , 97.71, 41
> 0.0011 <= 0.0012 , 0.00115 , 98.02, 61
> 0.0012 <= 0.0014 , 0.0013 , 98.90, 177
> 0.0014 <= 0.0016 , 0.0015 , 99.19, 57
> 0.0016 <= 0.0018 , 0.0017 , 99.32, 27
> 0.0018 <= 0.002 , 0.0019 , 99.45, 27
> 0.002 <= 0.0025 , 0.00225 , 99.61, 31
> 0.0025 <= 0.003 , 0.00275 , 99.70, 19
> 0.003 <= 0.0035 , 0.00325 , 99.86, 30
> 0.0035 <= 0.004 , 0.00375 , 99.91, 11
> 0.004 <= 0.0045 , 0.00425 , 99.98, 14
> 0.005 <= 0.00515494 , 0.00507747 , 100.00, 4
# target 50% 0.000322793
# target 75% 0.000386109
# target 90% 0.000478248
# target 99% 0.00147018
# target 99.9% 0.00390909
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.368 ms avg, 1999.4 qps
Successfully wrote 4268 bytes of Json data to /data/2018-11-19-063239_http_baseline_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:32:49 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:32:49 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:32:59 I periodic.go:533> T001 ended after 10.000717777s : 5000 calls. qps=499.96411372583424
06:32:59 I periodic.go:533> T003 ended after 10.001303515s : 5000 calls. qps=499.9348327446495
06:32:59 I periodic.go:533> T000 ended after 10.001498207s : 5000 calls. qps=499.9251008714399
06:32:59 I periodic.go:533> T002 ended after 10.001588138s : 5000 calls. qps=499.920605708909
Ended after 10.001687839s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.001085358 +/- 0.0004553 min -0.004664412 max 0.001482646 sum 21.7028193
Aggregated Function Time : count 20000 avg 0.00068594252 +/- 0.0003155 min 0.000353771 max 0.006496123 sum 13.7188505
# range, mid point, percentile, count
>= 0.000353771 <= 0.0004 , 0.000376886 , 0.03, 6
> 0.0004 <= 0.0005 , 0.00045 , 0.49, 93
> 0.0005 <= 0.0006 , 0.00055 , 33.73, 6648
> 0.0006 <= 0.0007 , 0.00065 , 76.05, 8463
> 0.0007 <= 0.0008 , 0.00075 , 90.98, 2986
> 0.0008 <= 0.0009 , 0.00085 , 95.25, 855
> 0.0009 <= 0.001 , 0.00095 , 96.83, 314
> 0.001 <= 0.0011 , 0.00105 , 97.44, 122
> 0.0011 <= 0.0012 , 0.00115 , 97.70, 54
> 0.0012 <= 0.0014 , 0.0013 , 98.20, 99
> 0.0014 <= 0.0016 , 0.0015 , 98.79, 118
> 0.0016 <= 0.0018 , 0.0017 , 99.07, 56
> 0.0018 <= 0.002 , 0.0019 , 99.20, 26
> 0.002 <= 0.0025 , 0.00225 , 99.39, 38
> 0.0025 <= 0.003 , 0.00275 , 99.47, 15
> 0.003 <= 0.0035 , 0.00325 , 99.54, 15
> 0.0035 <= 0.004 , 0.00375 , 99.67, 26
> 0.004 <= 0.0045 , 0.00425 , 99.80, 26
> 0.0045 <= 0.005 , 0.00475 , 99.94, 27
> 0.005 <= 0.006 , 0.0055 , 99.98, 9
> 0.006 <= 0.00649612 , 0.00624806 , 100.00, 4
# target 50% 0.000638438
# target 75% 0.000697519
# target 90% 0.000793436
# target 99% 0.00175
# target 99.9% 0.00487037
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.686 ms avg, 1999.7 qps
Successfully wrote 4127 bytes of Json data to /data/2018-11-19-063249_http_linkerd_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:32:59 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:32:59 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:33:10 W periodic.go:487> T001 warning only did 4928 out of 5000 calls before reaching 10s
06:33:10 I periodic.go:533> T001 ended after 10.002924704s : 4928 calls. qps=492.655912728142
06:33:10 W periodic.go:487> T000 warning only did 4928 out of 5000 calls before reaching 10s
06:33:10 I periodic.go:533> T000 ended after 10.002991068s : 4928 calls. qps=492.6526442440686
06:33:10 W periodic.go:487> T003 warning only did 4924 out of 5000 calls before reaching 10s
06:33:10 I periodic.go:533> T003 ended after 10.003004839s : 4924 calls. qps=492.25208617336347
06:33:10 W periodic.go:487> T002 warning only did 4921 out of 5000 calls before reaching 10s
06:33:10 I periodic.go:533> T002 ended after 10.003016549s : 4921 calls. qps=491.95160038917976
Ended after 10.003027968s : 19701 calls. qps=1969.5
Aggregated Sleep Time : count 19701 avg -0.095006462 +/- 0.04893 min -0.165467719 max 0.000908823 sum -1871.72231
# range, mid point, percentile, count
>= -0.165468 <= -0.001 , -0.0832339 , 93.05, 18331
> -0.001 <= 0 , -0.0005 , 94.41, 269
> 0 <= 0.000908823 , 0.000454412 , 100.00, 1101
# target 50% -0.0770921
WARNING 93.05% of sleep were falling behind
Aggregated Function Time : count 19701 avg 0.0019241296 +/- 0.0009625 min 0.000553462 max 0.017079996 sum 37.9072777
# range, mid point, percentile, count
>= 0.000553462 <= 0.0006 , 0.000576731 , 0.01, 2
> 0.0007 <= 0.0008 , 0.00075 , 0.05, 7
> 0.0008 <= 0.0009 , 0.00085 , 0.08, 6
> 0.0009 <= 0.001 , 0.00095 , 0.24, 33
> 0.001 <= 0.0011 , 0.00105 , 0.66, 83
> 0.0011 <= 0.0012 , 0.00115 , 2.92, 445
> 0.0012 <= 0.0014 , 0.0013 , 15.30, 2439
> 0.0014 <= 0.0016 , 0.0015 , 25.33, 1975
> 0.0016 <= 0.0018 , 0.0017 , 38.10, 2516
> 0.0018 <= 0.002 , 0.0019 , 78.45, 7949
> 0.002 <= 0.0025 , 0.00225 , 94.68, 3197
> 0.0025 <= 0.003 , 0.00275 , 96.01, 263
> 0.003 <= 0.0035 , 0.00325 , 96.64, 124
> 0.0035 <= 0.004 , 0.00375 , 97.46, 161
> 0.004 <= 0.0045 , 0.00425 , 98.52, 210
> 0.0045 <= 0.005 , 0.00475 , 98.84, 63
> 0.005 <= 0.006 , 0.0055 , 99.41, 112
> 0.006 <= 0.007 , 0.0065 , 99.57, 32
> 0.007 <= 0.008 , 0.0075 , 99.59, 4
> 0.012 <= 0.014 , 0.013 , 99.88, 56
> 0.014 <= 0.016 , 0.015 , 99.96, 16
> 0.016 <= 0.01708 , 0.01654 , 100.00, 8
# target 50% 0.00185899
# target 75% 0.00198291
# target 90% 0.00235594
# target 99% 0.0052767
# target 99.9% 0.0145374
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19701 (100.0 %)
Response Header Sizes : count 19701 avg 209 +/- 0 min 209 max 209 sum 4117509
Response Body/Total Sizes : count 19701 avg 209 +/- 0 min 209 max 209 sum 4117509
All done 19701 calls (plus 4 warmup) 1.924 ms avg, 1969.5 qps
Successfully wrote 4475 bytes of Json data to /data/2018-11-19-063300_http_istio_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:33:10 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:33:20 I periodic.go:533> T003 ended after 10.000707073s : 5000 calls. qps=499.9646488495844
06:33:20 I periodic.go:533> T000 ended after 10.001159769s : 5000 calls. qps=499.9420182745408
06:33:20 I periodic.go:533> T002 ended after 10.003523991s : 5000 calls. qps=499.8238625206892
06:33:20 I periodic.go:533> T001 ended after 10.003600188s : 5000 calls. qps=499.8200553834449
Ended after 10.003630661s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.00084404135 +/- 0.003096 min -0.055996347 max 0.001655124 sum 16.8774509
Aggregated Function Time : count 20000 avg 0.00065274172 +/- 0.0008634 min 0.000190799 max 0.057845599 sum 13.0548343
# range, mid point, percentile, count
>= 0.000190799 <= 0.0002 , 0.000195399 , 0.04, 7
> 0.0002 <= 0.0003 , 0.00025 , 0.40, 72
> 0.0003 <= 0.0004 , 0.00035 , 2.12, 346
> 0.0004 <= 0.0005 , 0.00045 , 15.47, 2669
> 0.0005 <= 0.0006 , 0.00055 , 56.91, 8287
> 0.0006 <= 0.0007 , 0.00065 , 83.69, 5357
> 0.0007 <= 0.0008 , 0.00075 , 92.95, 1852
> 0.0008 <= 0.0009 , 0.00085 , 95.77, 563
> 0.0009 <= 0.001 , 0.00095 , 96.59, 166
> 0.001 <= 0.0011 , 0.00105 , 96.97, 75
> 0.0011 <= 0.0012 , 0.00115 , 97.20, 46
> 0.0012 <= 0.0014 , 0.0013 , 97.56, 71
> 0.0014 <= 0.0016 , 0.0015 , 97.84, 57
> 0.0016 <= 0.0018 , 0.0017 , 98.53, 137
> 0.0018 <= 0.002 , 0.0019 , 98.98, 92
> 0.002 <= 0.0025 , 0.00225 , 99.23, 50
> 0.0025 <= 0.003 , 0.00275 , 99.33, 20
> 0.003 <= 0.0035 , 0.00325 , 99.42, 18
> 0.0035 <= 0.004 , 0.00375 , 99.56, 28
> 0.004 <= 0.0045 , 0.00425 , 99.80, 46
> 0.0045 <= 0.005 , 0.00475 , 99.92, 24
> 0.005 <= 0.006 , 0.0055 , 99.98, 13
> 0.05 <= 0.0578456 , 0.0539228 , 100.00, 4
# target 50% 0.000583335
# target 75% 0.000667556
# target 90% 0.000768143
# target 99% 0.00203
# target 99.9% 0.0049375
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.653 ms avg, 1999.3 qps
Successfully wrote 3840 bytes of Json data to /data/2018-11-19-063310_grpc_baseline_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:33:20 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:33:30 W periodic.go:487> T002 warning only did 4995 out of 5000 calls before reaching 10s
06:33:30 I periodic.go:533> T002 ended after 10.033761901s : 4995 calls. qps=497.81926751741844
06:33:30 W periodic.go:487> T001 warning only did 4995 out of 5000 calls before reaching 10s
06:33:30 I periodic.go:533> T001 ended after 10.036039386s : 4995 calls. qps=497.706297064546
06:33:30 W periodic.go:487> T000 warning only did 4995 out of 5000 calls before reaching 10s
06:33:30 I periodic.go:533> T000 ended after 10.036059593s : 4995 calls. qps=497.7052949629691
06:33:30 W periodic.go:487> T003 warning only did 4995 out of 5000 calls before reaching 10s
06:33:30 I periodic.go:533> T003 ended after 10.036140221s : 4995 calls. qps=497.70129651519545
Ended after 10.03615264s : 19980 calls. qps=1990.8
Sleep times : count 19980 avg 0.00047725448 +/- 0.0021 min -0.041294754 max 0.001418006 sum 9.53554454
Aggregated Function Time : count 19980 avg 0.0010512773 +/- 0.0008589 min 0.000451646 max 0.043098306 sum 21.0045214
# range, mid point, percentile, count
>= 0.000451646 <= 0.0005 , 0.000475823 , 0.02, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.13, 22
> 0.0006 <= 0.0007 , 0.00065 , 0.70, 115
> 0.0007 <= 0.0008 , 0.00075 , 10.02, 1862
> 0.0008 <= 0.0009 , 0.00085 , 32.37, 4465
> 0.0009 <= 0.001 , 0.00095 , 60.49, 5618
> 0.001 <= 0.0011 , 0.00105 , 78.73, 3645
> 0.0011 <= 0.0012 , 0.00115 , 87.57, 1766
> 0.0012 <= 0.0014 , 0.0013 , 94.18, 1322
> 0.0014 <= 0.0016 , 0.0015 , 96.15, 392
> 0.0016 <= 0.0018 , 0.0017 , 97.14, 199
> 0.0018 <= 0.002 , 0.0019 , 97.87, 145
> 0.002 <= 0.0025 , 0.00225 , 98.90, 207
> 0.0025 <= 0.003 , 0.00275 , 99.18, 56
> 0.003 <= 0.0035 , 0.00325 , 99.27, 18
> 0.0035 <= 0.004 , 0.00375 , 99.37, 20
> 0.004 <= 0.0045 , 0.00425 , 99.48, 21
> 0.0045 <= 0.005 , 0.00475 , 99.72, 49
> 0.005 <= 0.006 , 0.0055 , 99.94, 43
> 0.006 <= 0.007 , 0.0065 , 99.96, 4
> 0.03 <= 0.035 , 0.0325 , 99.98, 4
> 0.04 <= 0.0430983 , 0.0415492 , 100.00, 4
# target 50% 0.000962709
# target 75% 0.00107956
# target 90% 0.00127352
# target 99% 0.00267143
# target 99.9% 0.00581442
Ping SERVING : 19980
All done 19980 calls (plus 4 warmup) 1.051 ms avg, 1990.8 qps
Successfully wrote 3969 bytes of Json data to /data/2018-11-19-063320_grpc_linkerd_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:33:30 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:33:40 I periodic.go:533> T001 ended after 10.014018863s : 5000 calls. qps=499.3000381169743
06:33:40 I periodic.go:533> T003 ended after 10.016719787s : 5000 calls. qps=499.1654060732687
06:33:40 I periodic.go:533> T002 ended after 10.018294207s : 5000 calls. qps=499.0869599843046
06:33:40 I periodic.go:533> T000 ended after 10.018328263s : 5000 calls. qps=499.085263403292
Ended after 10.018363755s : 20000 calls. qps=1996.3
Aggregated Sleep Time : count 19996 avg -0.003962889 +/- 0.005839 min -0.034053961 max 0.001368343 sum -79.2419284
# range, mid point, percentile, count
>= -0.034054 <= -0.001 , -0.017527 , 51.98, 10393
> -0.001 <= 0 , -0.0005 , 78.56, 5316
> 0 <= 0.001 , 0.0005 , 98.76, 4039
> 0.001 <= 0.00136834 , 0.00118417 , 100.00, 248
# target 50% -0.00225638
WARNING 51.98% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017691657 +/- 0.00115 min 0.00045112 max 0.017445444 sum 35.3833133
# range, mid point, percentile, count
>= 0.00045112 <= 0.0005 , 0.00047556 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.38, 72
> 0.0006 <= 0.0007 , 0.00065 , 1.85, 296
> 0.0007 <= 0.0008 , 0.00075 , 4.91, 610
> 0.0008 <= 0.0009 , 0.00085 , 9.56, 932
> 0.0009 <= 0.001 , 0.00095 , 15.61, 1208
> 0.001 <= 0.0011 , 0.00105 , 20.94, 1067
> 0.0011 <= 0.0012 , 0.00115 , 24.80, 771
> 0.0012 <= 0.0014 , 0.0013 , 32.12, 1464
> 0.0014 <= 0.0016 , 0.0015 , 44.14, 2405
> 0.0016 <= 0.0018 , 0.0017 , 60.44, 3260
> 0.0018 <= 0.002 , 0.0019 , 74.64, 2841
> 0.002 <= 0.0025 , 0.00225 , 90.29, 3129
> 0.0025 <= 0.003 , 0.00275 , 95.97, 1135
> 0.003 <= 0.0035 , 0.00325 , 97.11, 230
> 0.0035 <= 0.004 , 0.00375 , 98.00, 178
> 0.004 <= 0.0045 , 0.00425 , 98.57, 113
> 0.0045 <= 0.005 , 0.00475 , 98.88, 61
> 0.005 <= 0.006 , 0.0055 , 99.34, 93
> 0.006 <= 0.007 , 0.0065 , 99.50, 32
> 0.007 <= 0.008 , 0.0075 , 99.55, 9
> 0.008 <= 0.009 , 0.0085 , 99.57, 5
> 0.009 <= 0.01 , 0.0095 , 99.58, 2
> 0.01 <= 0.012 , 0.011 , 99.59, 2
> 0.012 <= 0.014 , 0.013 , 99.62, 7
> 0.014 <= 0.016 , 0.015 , 99.88, 50
> 0.016 <= 0.0174454 , 0.0167227 , 100.00, 25
# target 50% 0.0016719
# target 75% 0.00201135
# target 90% 0.00249073
# target 99% 0.00526882
# target 99.9% 0.0162891
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.769 ms avg, 1996.3 qps
Successfully wrote 4274 bytes of Json data to /data/2018-11-19-063330_grpc_istio_2000qps_10s_echo_1_0.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:33:40 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:33:40 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:33:50 I periodic.go:533> T002 ended after 10.004235295s : 5000 calls. qps=499.78832490064895
06:33:50 I periodic.go:533> T000 ended after 10.004364288s : 5000 calls. qps=499.78188079350355
06:33:50 I periodic.go:533> T003 ended after 10.004376637s : 5000 calls. qps=499.78126388285835
06:33:50 I periodic.go:533> T001 ended after 10.004388088s : 5000 calls. qps=499.780691834353
Ended after 10.004400172s : 20000 calls. qps=1999.1
Sleep times : count 19996 avg 0.0013901144 +/- 0.0004631 min -0.005479779 max 0.001802133 sum 27.7967267
Aggregated Function Time : count 20000 avg 0.00036346827 +/- 0.0002783 min 0.000117989 max 0.004172327 sum 7.26936531
# range, mid point, percentile, count
>= 0.000117989 <= 0.0002 , 0.000158995 , 3.10, 621
> 0.0002 <= 0.0003 , 0.00025 , 43.66, 8110
> 0.0003 <= 0.0004 , 0.00035 , 81.77, 7622
> 0.0004 <= 0.0005 , 0.00045 , 92.75, 2196
> 0.0005 <= 0.0006 , 0.00055 , 95.52, 555
> 0.0006 <= 0.0007 , 0.00065 , 96.22, 139
> 0.0007 <= 0.0008 , 0.00075 , 96.54, 65
> 0.0008 <= 0.0009 , 0.00085 , 96.89, 70
> 0.0009 <= 0.001 , 0.00095 , 97.65, 152
> 0.001 <= 0.0011 , 0.00105 , 97.89, 49
> 0.0011 <= 0.0012 , 0.00115 , 98.46, 113
> 0.0012 <= 0.0014 , 0.0013 , 98.94, 96
> 0.0014 <= 0.0016 , 0.0015 , 99.08, 28
> 0.0016 <= 0.0018 , 0.0017 , 99.25, 34
> 0.0018 <= 0.002 , 0.0019 , 99.41, 31
> 0.002 <= 0.0025 , 0.00225 , 99.57, 33
> 0.0025 <= 0.003 , 0.00275 , 99.64, 15
> 0.003 <= 0.0035 , 0.00325 , 99.79, 29
> 0.0035 <= 0.004 , 0.00375 , 99.95, 32
> 0.004 <= 0.00417233 , 0.00408616 , 100.00, 10
# target 50% 0.000316649
# target 75% 0.000382249
# target 90% 0.000475
# target 99% 0.00148571
# target 99.9% 0.00384375
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.363 ms avg, 1999.1 qps
Successfully wrote 4020 bytes of Json data to /data/2018-11-19-063340_http_baseline_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:33:50 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:33:50 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:00 I periodic.go:533> T002 ended after 10.000912933s : 5000 calls. qps=499.9543575168529
06:34:00 I periodic.go:533> T000 ended after 10.000994894s : 5000 calls. qps=499.95026024857805
06:34:00 I periodic.go:533> T001 ended after 10.001006456s : 5000 calls. qps=499.9496822642587
06:34:00 I periodic.go:533> T003 ended after 10.001015598s : 5000 calls. qps=499.9492252566728
Ended after 10.001027599s : 20000 calls. qps=1999.8
Sleep times : count 19996 avg 0.0010781425 +/- 0.0004681 min -0.005070485 max 0.001504229 sum 21.5585379
Aggregated Function Time : count 20000 avg 0.00069426344 +/- 0.0003302 min 0.000377091 max 0.006915053 sum 13.8852687
# range, mid point, percentile, count
>= 0.000377091 <= 0.0004 , 0.000388546 , 0.01, 3
> 0.0004 <= 0.0005 , 0.00045 , 0.32, 61
> 0.0005 <= 0.0006 , 0.00055 , 29.30, 5796
> 0.0006 <= 0.0007 , 0.00065 , 74.08, 8955
> 0.0007 <= 0.0008 , 0.00075 , 91.31, 3448
> 0.0008 <= 0.0009 , 0.00085 , 95.57, 851
> 0.0009 <= 0.001 , 0.00095 , 96.86, 258
> 0.001 <= 0.0011 , 0.00105 , 97.23, 75
> 0.0011 <= 0.0012 , 0.00115 , 97.50, 52
> 0.0012 <= 0.0014 , 0.0013 , 98.09, 119
> 0.0014 <= 0.0016 , 0.0015 , 98.58, 98
> 0.0016 <= 0.0018 , 0.0017 , 98.92, 67
> 0.0018 <= 0.002 , 0.0019 , 99.23, 64
> 0.002 <= 0.0025 , 0.00225 , 99.33, 20
> 0.0025 <= 0.003 , 0.00275 , 99.44, 21
> 0.003 <= 0.0035 , 0.00325 , 99.52, 16
> 0.0035 <= 0.004 , 0.00375 , 99.59, 14
> 0.004 <= 0.0045 , 0.00425 , 99.78, 39
> 0.0045 <= 0.005 , 0.00475 , 99.92, 27
> 0.005 <= 0.006 , 0.0055 , 99.98, 12
> 0.006 <= 0.00691505 , 0.00645753 , 100.00, 4
# target 50% 0.000646231
# target 75% 0.000705365
# target 90% 0.000792372
# target 99% 0.00185312
# target 99.9% 0.00492593
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.694 ms avg, 1999.8 qps
Successfully wrote 4131 bytes of Json data to /data/2018-11-19-063350_http_linkerd_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:34:00 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:34:00 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:10 W periodic.go:487> T001 warning only did 4933 out of 5000 calls before reaching 10s
06:34:10 I periodic.go:533> T001 ended after 10.001140994s : 4933 calls. qps=493.24372118735874
06:34:10 W periodic.go:487> T002 warning only did 4935 out of 5000 calls before reaching 10s
06:34:10 I periodic.go:533> T002 ended after 10.001922816s : 4935 calls. qps=493.4051272726798
06:34:10 W periodic.go:487> T000 warning only did 4940 out of 5000 calls before reaching 10s
06:34:10 I periodic.go:533> T000 ended after 10.001940995s : 4940 calls. qps=493.9041334546485
06:34:10 W periodic.go:487> T003 warning only did 4938 out of 5000 calls before reaching 10s
06:34:10 I periodic.go:533> T003 ended after 10.001953315s : 4938 calls. qps=493.70356414226075
Ended after 10.001966028s : 19746 calls. qps=1974.2
Aggregated Sleep Time : count 19746 avg -0.053575048 +/- 0.03229 min -0.136183977 max 0.00111126 sum -1057.89289
# range, mid point, percentile, count
>= -0.136184 <= -0.001 , -0.068592 , 92.79, 18322
> -0.001 <= 0 , -0.0005 , 93.42, 124
> 0 <= 0.001 , 0.0005 , 99.99, 1298
> 0.001 <= 0.00111126 , 0.00105563 , 100.00, 2
# target 50% -0.0633421
WARNING 92.79% of sleep were falling behind
Aggregated Function Time : count 19746 avg 0.0019085541 +/- 0.001035 min 0.00064964 max 0.025951594 sum 37.6863097
# range, mid point, percentile, count
>= 0.00064964 <= 0.0007 , 0.00067482 , 0.02, 4
> 0.0007 <= 0.0008 , 0.00075 , 0.03, 2
> 0.0008 <= 0.0009 , 0.00085 , 0.10, 13
> 0.0009 <= 0.001 , 0.00095 , 0.48, 75
> 0.001 <= 0.0011 , 0.00105 , 1.33, 169
> 0.0011 <= 0.0012 , 0.00115 , 6.11, 943
> 0.0012 <= 0.0014 , 0.0013 , 18.40, 2428
> 0.0014 <= 0.0016 , 0.0015 , 26.56, 1611
> 0.0016 <= 0.0018 , 0.0017 , 38.48, 2353
> 0.0018 <= 0.002 , 0.0019 , 78.25, 7853
> 0.002 <= 0.0025 , 0.00225 , 94.89, 3286
> 0.0025 <= 0.003 , 0.00275 , 96.12, 243
> 0.003 <= 0.0035 , 0.00325 , 96.95, 163
> 0.0035 <= 0.004 , 0.00375 , 97.75, 159
> 0.004 <= 0.0045 , 0.00425 , 98.63, 173
> 0.0045 <= 0.005 , 0.00475 , 98.94, 62
> 0.005 <= 0.006 , 0.0055 , 99.35, 81
> 0.006 <= 0.007 , 0.0065 , 99.55, 40
> 0.007 <= 0.008 , 0.0075 , 99.57, 4
> 0.008 <= 0.009 , 0.0085 , 99.59, 4
> 0.012 <= 0.014 , 0.013 , 99.80, 41
> 0.014 <= 0.016 , 0.015 , 99.94, 27
> 0.016 <= 0.018 , 0.017 , 99.95, 3
> 0.018 <= 0.02 , 0.019 , 99.98, 5
> 0.025 <= 0.0259516 , 0.0254758 , 100.00, 4
# target 50% 0.00185794
# target 75% 0.00198366
# target 90% 0.00235307
# target 99% 0.00514247
# target 99.9% 0.0154262
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19746 (100.0 %)
Response Header Sizes : count 19746 avg 209.00005 +/- 0.007116 min 209 max 210 sum 4126915
Response Body/Total Sizes : count 19746 avg 209.00005 +/- 0.007116 min 209 max 210 sum 4126915
All done 19746 calls (plus 4 warmup) 1.909 ms avg, 1974.2 qps
Successfully wrote 4938 bytes of Json data to /data/2018-11-19-063400_http_istio_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:34:10 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:20 I periodic.go:533> T002 ended after 10.000791025s : 5000 calls. qps=499.9604518783553
06:34:20 I periodic.go:533> T001 ended after 10.001195928s : 5000 calls. qps=499.9402107503638
06:34:20 I periodic.go:533> T003 ended after 10.003666195s : 5000 calls. qps=499.81675743029933
06:34:20 I periodic.go:533> T000 ended after 10.003736076s : 5000 calls. qps=499.81326596525463
Ended after 10.003749732s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010352241 +/- 0.0005188 min -0.005664811 max 0.001624127 sum 20.7003403
Aggregated Function Time : count 20000 avg 0.00069571518 +/- 0.0003426 min 0.000202112 max 0.005769861 sum 13.9143036
# range, mid point, percentile, count
>= 0.000202112 <= 0.0003 , 0.000251056 , 0.10, 20
> 0.0003 <= 0.0004 , 0.00035 , 0.70, 121
> 0.0004 <= 0.0005 , 0.00045 , 6.11, 1081
> 0.0005 <= 0.0006 , 0.00055 , 35.45, 5867
> 0.0006 <= 0.0007 , 0.00065 , 70.33, 6978
> 0.0007 <= 0.0008 , 0.00075 , 87.96, 3525
> 0.0008 <= 0.0009 , 0.00085 , 94.00, 1209
> 0.0009 <= 0.001 , 0.00095 , 95.78, 356
> 0.001 <= 0.0011 , 0.00105 , 96.48, 140
> 0.0011 <= 0.0012 , 0.00115 , 96.77, 56
> 0.0012 <= 0.0014 , 0.0013 , 97.36, 120
> 0.0014 <= 0.0016 , 0.0015 , 97.83, 93
> 0.0016 <= 0.0018 , 0.0017 , 98.31, 95
> 0.0018 <= 0.002 , 0.0019 , 98.94, 128
> 0.002 <= 0.0025 , 0.00225 , 99.31, 73
> 0.0025 <= 0.003 , 0.00275 , 99.49, 36
> 0.003 <= 0.0035 , 0.00325 , 99.58, 19
> 0.0035 <= 0.004 , 0.00375 , 99.66, 15
> 0.004 <= 0.0045 , 0.00425 , 99.82, 32
> 0.0045 <= 0.005 , 0.00475 , 99.92, 20
> 0.005 <= 0.00576986 , 0.00538493 , 100.00, 16
# target 50% 0.000641717
# target 75% 0.000726468
# target 90% 0.000833747
# target 99% 0.00207534
# target 99.9% 0.0049
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.696 ms avg, 1999.3 qps
Successfully wrote 3635 bytes of Json data to /data/2018-11-19-063410_grpc_baseline_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:34:20 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:30 I periodic.go:533> T002 ended after 10.001070258s : 5000 calls. qps=499.946492826648
06:34:30 I periodic.go:533> T001 ended after 10.001775973s : 5000 calls. qps=499.91121711760013
06:34:30 I periodic.go:533> T003 ended after 10.001945989s : 5000 calls. qps=499.9027194806821
06:34:30 I periodic.go:533> T000 ended after 10.001974072s : 5000 calls. qps=499.9013158809557
Ended after 10.002043806s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00045424248 +/- 0.002836 min -0.046048028 max 0.001314601 sum 9.08303263
Aggregated Function Time : count 20000 avg 0.0010046348 +/- 0.0007708 min 0.00049894 max 0.047916559 sum 20.0926968
# range, mid point, percentile, count
>= 0.00049894 <= 0.0005 , 0.00049947 , 0.01, 1
> 0.0005 <= 0.0006 , 0.00055 , 0.09, 17
> 0.0006 <= 0.0007 , 0.00065 , 0.91, 164
> 0.0007 <= 0.0008 , 0.00075 , 13.09, 2435
> 0.0008 <= 0.0009 , 0.00085 , 39.03, 5190
> 0.0009 <= 0.001 , 0.00095 , 69.97, 6188
> 0.001 <= 0.0011 , 0.00105 , 87.22, 3450
> 0.0011 <= 0.0012 , 0.00115 , 93.09, 1174
> 0.0012 <= 0.0014 , 0.0013 , 96.03, 588
> 0.0014 <= 0.0016 , 0.0015 , 96.83, 158
> 0.0016 <= 0.0018 , 0.0017 , 97.46, 127
> 0.0018 <= 0.002 , 0.0019 , 98.08, 125
> 0.002 <= 0.0025 , 0.00225 , 98.92, 166
> 0.0025 <= 0.003 , 0.00275 , 99.12, 42
> 0.003 <= 0.0035 , 0.00325 , 99.25, 24
> 0.0035 <= 0.004 , 0.00375 , 99.42, 34
> 0.004 <= 0.0045 , 0.00425 , 99.56, 30
> 0.0045 <= 0.005 , 0.00475 , 99.71, 29
> 0.005 <= 0.006 , 0.0055 , 99.96, 50
> 0.006 <= 0.007 , 0.0065 , 99.98, 4
> 0.045 <= 0.0479166 , 0.0464583 , 100.00, 4
# target 50% 0.00093544
# target 75% 0.00102913
# target 90% 0.00114727
# target 99% 0.00270238
# target 99.9% 0.00576
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.005 ms avg, 1999.6 qps
Successfully wrote 3610 bytes of Json data to /data/2018-11-19-063420_grpc_linkerd_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:34:30 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:40 W periodic.go:487> T001 warning only did 4998 out of 5000 calls before reaching 10s
06:34:40 I periodic.go:533> T001 ended after 10.002785954s : 4998 calls. qps=499.66079680045107
06:34:40 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:34:40 I periodic.go:533> T003 ended after 10.006618828s : 4998 calls. qps=499.4694097885348
06:34:40 I periodic.go:533> T000 ended after 10.008220427s : 5000 calls. qps=499.58931624957904
06:34:40 I periodic.go:533> T002 ended after 10.022014033s : 5000 calls. qps=498.9017161157671
Ended after 10.022086113s : 19996 calls. qps=1995.2
Aggregated Sleep Time : count 19994 avg -0.002511463 +/- 0.004936 min -0.032393851 max 0.001404135 sum -50.2141916
# range, mid point, percentile, count
>= -0.0323939 <= -0.001 , -0.0166969 , 36.36, 7269
> -0.001 <= 0 , -0.0005 , 66.75, 6077
> 0 <= 0.001 , 0.0005 , 98.07, 6262
> 0.001 <= 0.00140413 , 0.00120207 , 100.00, 386
# target 50% -0.000551094
WARNING 36.36% of sleep were falling behind
Aggregated Function Time : count 19996 avg 0.0017248934 +/- 0.001146 min 0.000466956 max 0.018382563 sum 34.4909687
# range, mid point, percentile, count
>= 0.000466956 <= 0.0005 , 0.000483478 , 0.02, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.36, 69
> 0.0006 <= 0.0007 , 0.00065 , 1.81, 289
> 0.0007 <= 0.0008 , 0.00075 , 5.08, 655
> 0.0008 <= 0.0009 , 0.00085 , 11.10, 1203
> 0.0009 <= 0.001 , 0.00095 , 17.53, 1286
> 0.001 <= 0.0011 , 0.00105 , 22.04, 902
> 0.0011 <= 0.0012 , 0.00115 , 25.50, 691
> 0.0012 <= 0.0014 , 0.0013 , 32.26, 1353
> 0.0014 <= 0.0016 , 0.0015 , 46.20, 2788
> 0.0016 <= 0.0018 , 0.0017 , 65.15, 3788
> 0.0018 <= 0.002 , 0.0019 , 78.76, 2721
> 0.002 <= 0.0025 , 0.00225 , 92.15, 2679
> 0.0025 <= 0.003 , 0.00275 , 96.20, 810
> 0.003 <= 0.0035 , 0.00325 , 96.98, 155
> 0.0035 <= 0.004 , 0.00375 , 97.85, 175
> 0.004 <= 0.0045 , 0.00425 , 98.55, 140
> 0.0045 <= 0.005 , 0.00475 , 98.97, 83
> 0.005 <= 0.006 , 0.0055 , 99.33, 72
> 0.006 <= 0.007 , 0.0065 , 99.56, 46
> 0.007 <= 0.008 , 0.0075 , 99.61, 11
> 0.012 <= 0.014 , 0.013 , 99.62, 1
> 0.014 <= 0.016 , 0.015 , 99.79, 35
> 0.016 <= 0.018 , 0.017 , 99.98, 37
> 0.018 <= 0.0183826 , 0.0181913 , 100.00, 4
# target 50% 0.00164007
# target 75% 0.0019448
# target 90% 0.00241963
# target 99% 0.00508389
# target 99.9% 0.0171354
Ping SERVING : 19996
All done 19996 calls (plus 4 warmup) 1.725 ms avg, 1995.2 qps
Successfully wrote 4351 bytes of Json data to /data/2018-11-19-063430_grpc_istio_2000qps_10s_echo_0_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:34:40 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:34:40 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:34:50 I periodic.go:533> T001 ended after 10.000420743s : 5000 calls. qps=499.97896373508615
06:34:50 I periodic.go:533> T003 ended after 10.000866908s : 5000 calls. qps=499.95665835732166
06:34:50 I periodic.go:533> T000 ended after 10.003089827s : 5000 calls. qps=499.84555637040967
06:34:50 I periodic.go:533> T002 ended after 10.003146846s : 5000 calls. qps=499.8427071976226
Ended after 10.003162428s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0013838522 +/- 0.0004589 min -0.004292551 max 0.00175929 sum 27.6715078
Aggregated Function Time : count 20000 avg 0.00037092558 +/- 0.0002901 min 9.0644e-05 max 0.004962411 sum 7.41851159
# range, mid point, percentile, count
>= 9.0644e-05 <= 0.0001 , 9.5322e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.98, 595
> 0.0002 <= 0.0003 , 0.00025 , 41.23, 7651
> 0.0003 <= 0.0004 , 0.00035 , 80.67, 7886
> 0.0004 <= 0.0005 , 0.00045 , 92.38, 2342
> 0.0005 <= 0.0006 , 0.00055 , 95.25, 574
> 0.0006 <= 0.0007 , 0.00065 , 95.96, 143
> 0.0007 <= 0.0008 , 0.00075 , 96.28, 63
> 0.0008 <= 0.0009 , 0.00085 , 96.50, 46
> 0.0009 <= 0.001 , 0.00095 , 97.22, 144
> 0.001 <= 0.0011 , 0.00105 , 97.55, 64
> 0.0011 <= 0.0012 , 0.00115 , 98.17, 124
> 0.0012 <= 0.0014 , 0.0013 , 98.78, 124
> 0.0014 <= 0.0016 , 0.0015 , 99.02, 46
> 0.0016 <= 0.0018 , 0.0017 , 99.12, 21
> 0.0018 <= 0.002 , 0.0019 , 99.33, 41
> 0.002 <= 0.0025 , 0.00225 , 99.53, 41
> 0.0025 <= 0.003 , 0.00275 , 99.66, 25
> 0.003 <= 0.0035 , 0.00325 , 99.81, 32
> 0.0035 <= 0.004 , 0.00375 , 99.92, 22
> 0.004 <= 0.0045 , 0.00425 , 99.96, 7
> 0.0045 <= 0.00496241 , 0.00473121 , 100.00, 8
# target 50% 0.000322229
# target 75% 0.000385633
# target 90% 0.000479718
# target 99% 0.00158696
# target 99.9% 0.00388636
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.371 ms avg, 1999.4 qps
Successfully wrote 4293 bytes of Json data to /data/2018-11-19-063440_http_baseline_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:34:50 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:34:50 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:00 I periodic.go:533> T001 ended after 10.00077253s : 5000 calls. qps=499.9613764837825
06:35:00 I periodic.go:533> T000 ended after 10.001264724s : 5000 calls. qps=499.9367717966226
06:35:00 I periodic.go:533> T003 ended after 10.0032424s : 5000 calls. qps=499.8379325487504
06:35:00 I periodic.go:533> T002 ended after 10.003285108s : 5000 calls. qps=499.83579854195233
Ended after 10.003305427s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010919275 +/- 0.0004511 min -0.003811644 max 0.001457838 sum 21.8341813
Aggregated Function Time : count 20000 avg 0.00067898258 +/- 0.000321 min 0.000344798 max 0.005675874 sum 13.5796516
# range, mid point, percentile, count
>= 0.000344798 <= 0.0004 , 0.000372399 , 0.02, 4
> 0.0004 <= 0.0005 , 0.00045 , 0.56, 107
> 0.0005 <= 0.0006 , 0.00055 , 37.55, 7400
> 0.0006 <= 0.0007 , 0.00065 , 79.21, 8331
> 0.0007 <= 0.0008 , 0.00075 , 91.64, 2487
> 0.0008 <= 0.0009 , 0.00085 , 95.22, 714
> 0.0009 <= 0.001 , 0.00095 , 96.92, 340
> 0.001 <= 0.0011 , 0.00105 , 97.47, 111
> 0.0011 <= 0.0012 , 0.00115 , 97.72, 49
> 0.0012 <= 0.0014 , 0.0013 , 98.27, 110
> 0.0014 <= 0.0016 , 0.0015 , 98.78, 102
> 0.0016 <= 0.0018 , 0.0017 , 99.04, 53
> 0.0018 <= 0.002 , 0.0019 , 99.19, 30
> 0.002 <= 0.0025 , 0.00225 , 99.35, 32
> 0.0025 <= 0.003 , 0.00275 , 99.45, 20
> 0.003 <= 0.0035 , 0.00325 , 99.54, 18
> 0.0035 <= 0.004 , 0.00375 , 99.59, 11
> 0.004 <= 0.0045 , 0.00425 , 99.80, 41
> 0.0045 <= 0.005 , 0.00475 , 99.90, 20
> 0.005 <= 0.00567587 , 0.00533794 , 100.00, 20
# target 50% 0.000629876
# target 75% 0.000689893
# target 90% 0.000786771
# target 99% 0.00176981
# target 99.9% 0.005
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.679 ms avg, 1999.3 qps
Successfully wrote 4011 bytes of Json data to /data/2018-11-19-063450_http_linkerd_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:35:00 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:35:00 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:10 W periodic.go:487> T000 warning only did 4953 out of 5000 calls before reaching 10s
06:35:10 I periodic.go:533> T000 ended after 10.002157076s : 4953 calls. qps=495.1931830669443
06:35:10 W periodic.go:487> T002 warning only did 4951 out of 5000 calls before reaching 10s
06:35:10 I periodic.go:533> T002 ended after 10.004278449s : 4951 calls. qps=494.8882645799297
06:35:10 W periodic.go:487> T001 warning only did 4952 out of 5000 calls before reaching 10s
06:35:10 I periodic.go:533> T001 ended after 10.004298665s : 4952 calls. qps=494.98722157551657
06:35:10 W periodic.go:487> T003 warning only did 4952 out of 5000 calls before reaching 10s
06:35:10 I periodic.go:533> T003 ended after 10.004341351s : 4952 calls. qps=494.9851095899496
Ended after 10.004354052s : 19808 calls. qps=1979.9
Aggregated Sleep Time : count 19808 avg -0.054769114 +/- 0.03517 min -0.118063311 max 0.001158202 sum -1084.86661
# range, mid point, percentile, count
>= -0.118063 <= -0.001 , -0.0595317 , 88.84, 17598
> -0.001 <= 0 , -0.0005 , 91.66, 559
> 0 <= 0.001 , 0.0005 , 99.97, 1646
> 0.001 <= 0.0011582 , 0.0010791 , 100.00, 5
# target 50% -0.052184
WARNING 88.84% of sleep were falling behind
Aggregated Function Time : count 19808 avg 0.0018922829 +/- 0.0009738 min 0.000670745 max 0.020355884 sum 37.48234
# range, mid point, percentile, count
>= 0.000670745 <= 0.0007 , 0.000685373 , 0.01, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.04, 6
> 0.0008 <= 0.0009 , 0.00085 , 0.12, 17
> 0.0009 <= 0.001 , 0.00095 , 0.41, 58
> 0.001 <= 0.0011 , 0.00105 , 1.09, 133
> 0.0011 <= 0.0012 , 0.00115 , 7.22, 1215
> 0.0012 <= 0.0014 , 0.0013 , 20.21, 2574
> 0.0014 <= 0.0016 , 0.0015 , 28.28, 1598
> 0.0016 <= 0.0018 , 0.0017 , 38.90, 2103
> 0.0018 <= 0.002 , 0.0019 , 79.24, 7991
> 0.002 <= 0.0025 , 0.00225 , 94.70, 3063
> 0.0025 <= 0.003 , 0.00275 , 96.07, 270
> 0.003 <= 0.0035 , 0.00325 , 96.78, 141
> 0.0035 <= 0.004 , 0.00375 , 97.77, 197
> 0.004 <= 0.0045 , 0.00425 , 98.58, 159
> 0.0045 <= 0.005 , 0.00475 , 99.05, 94
> 0.005 <= 0.006 , 0.0055 , 99.45, 80
> 0.006 <= 0.007 , 0.0065 , 99.57, 23
> 0.007 <= 0.008 , 0.0075 , 99.59, 4
> 0.008 <= 0.009 , 0.0085 , 99.60, 1
> 0.012 <= 0.014 , 0.013 , 99.88, 57
> 0.014 <= 0.016 , 0.015 , 99.96, 15
> 0.016 <= 0.018 , 0.017 , 99.98, 4
> 0.02 <= 0.0203559 , 0.0201779 , 100.00, 4
# target 50% 0.00185504
# target 75% 0.00197898
# target 90% 0.00234789
# target 99% 0.00494638
# target 99.9% 0.0144256
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19808 (100.0 %)
Response Header Sizes : count 19808 avg 209 +/- 0 min 209 max 209 sum 4139872
Response Body/Total Sizes : count 19808 avg 209 +/- 0 min 209 max 209 sum 4139872
All done 19808 calls (plus 4 warmup) 1.892 ms avg, 1979.9 qps
Successfully wrote 4737 bytes of Json data to /data/2018-11-19-063500_http_istio_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:35:10 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:20 I periodic.go:533> T002 ended after 10.000737507s : 5000 calls. qps=499.96312736938233
06:35:20 I periodic.go:533> T001 ended after 10.001155196s : 5000 calls. qps=499.94224687161835
06:35:20 I periodic.go:533> T003 ended after 10.003371267s : 5000 calls. qps=499.8314934580544
06:35:20 I periodic.go:533> T000 ended after 10.003438175s : 5000 calls. qps=499.82815033492227
Ended after 10.003454711s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010813711 +/- 0.0005605 min -0.007723304 max 0.001739221 sum 21.623097
Aggregated Function Time : count 20000 avg 0.00064087148 +/- 0.0003262 min 0.000185313 max 0.00724989 sum 12.8174296
# range, mid point, percentile, count
>= 0.000185313 <= 0.0002 , 0.000192656 , 0.01, 2
> 0.0002 <= 0.0003 , 0.00025 , 0.17, 31
> 0.0003 <= 0.0004 , 0.00035 , 1.78, 323
> 0.0004 <= 0.0005 , 0.00045 , 15.35, 2714
> 0.0005 <= 0.0006 , 0.00055 , 55.19, 7968
> 0.0006 <= 0.0007 , 0.00065 , 82.37, 5436
> 0.0007 <= 0.0008 , 0.00075 , 93.03, 2132
> 0.0008 <= 0.0009 , 0.00085 , 95.84, 563
> 0.0009 <= 0.001 , 0.00095 , 96.67, 165
> 0.001 <= 0.0011 , 0.00105 , 96.97, 60
> 0.0011 <= 0.0012 , 0.00115 , 97.19, 43
> 0.0012 <= 0.0014 , 0.0013 , 97.59, 82
> 0.0014 <= 0.0016 , 0.0015 , 97.98, 77
> 0.0016 <= 0.0018 , 0.0017 , 98.64, 133
> 0.0018 <= 0.002 , 0.0019 , 99.11, 94
> 0.002 <= 0.0025 , 0.00225 , 99.42, 60
> 0.0025 <= 0.003 , 0.00275 , 99.59, 36
> 0.003 <= 0.0035 , 0.00325 , 99.65, 11
> 0.0035 <= 0.004 , 0.00375 , 99.79, 28
> 0.004 <= 0.0045 , 0.00425 , 99.84, 11
> 0.0045 <= 0.005 , 0.00475 , 99.94, 20
> 0.005 <= 0.006 , 0.0055 , 99.98, 7
> 0.007 <= 0.00724989 , 0.00712495 , 100.00, 4
# target 50% 0.000586973
# target 75% 0.000672884
# target 90% 0.000771576
# target 99% 0.00195106
# target 99.9% 0.004775
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.641 ms avg, 1999.3 qps
Successfully wrote 3846 bytes of Json data to /data/2018-11-19-063510_grpc_baseline_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:35:20 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:31 I periodic.go:533> T002 ended after 10.001146462s : 5000 calls. qps=499.9426834711223
06:35:31 I periodic.go:533> T001 ended after 10.001637813s : 5000 calls. qps=499.9181227599608
06:35:31 I periodic.go:533> T000 ended after 10.003657268s : 5000 calls. qps=499.817203453596
06:35:31 I periodic.go:533> T003 ended after 10.003678227s : 5000 calls. qps=499.81615627189643
Ended after 10.003691444s : 20000 calls. qps=1999.3
Aggregated Sleep Time : count 19996 avg 0.00031490028 +/- 0.00312 min -0.048440408 max 0.001276586 sum 6.29674603
# range, mid point, percentile, count
>= -0.0484404 <= -0.001 , -0.0247202 , 5.31, 1061
> -0.001 <= 0 , -0.0005 , 8.67, 673
> 0 <= 0.001 , 0.0005 , 96.99, 17661
> 0.001 <= 0.00127659 , 0.00113829 , 100.00, 601
# target 50% 0.000467924
WARNING 5.31% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0010723105 +/- 0.0008137 min 0.000502952 max 0.050320019 sum 21.44621
# range, mid point, percentile, count
>= 0.000502952 <= 0.0006 , 0.000551476 , 0.06, 11
> 0.0006 <= 0.0007 , 0.00065 , 0.27, 43
> 0.0007 <= 0.0008 , 0.00075 , 3.84, 714
> 0.0008 <= 0.0009 , 0.00085 , 21.22, 3476
> 0.0009 <= 0.001 , 0.00095 , 53.47, 6449
> 0.001 <= 0.0011 , 0.00105 , 78.81, 5069
> 0.0011 <= 0.0012 , 0.00115 , 88.91, 2020
> 0.0012 <= 0.0014 , 0.0013 , 94.74, 1166
> 0.0014 <= 0.0016 , 0.0015 , 96.07, 266
> 0.0016 <= 0.0018 , 0.0017 , 96.85, 156
> 0.0018 <= 0.002 , 0.0019 , 97.61, 153
> 0.002 <= 0.0025 , 0.00225 , 98.73, 223
> 0.0025 <= 0.003 , 0.00275 , 99.07, 68
> 0.003 <= 0.0035 , 0.00325 , 99.28, 42
> 0.0035 <= 0.004 , 0.00375 , 99.37, 18
> 0.004 <= 0.0045 , 0.00425 , 99.53, 32
> 0.0045 <= 0.005 , 0.00475 , 99.69, 31
> 0.005 <= 0.006 , 0.0055 , 99.90, 43
> 0.006 <= 0.007 , 0.0065 , 99.92, 5
> 0.007 <= 0.008 , 0.0075 , 99.97, 8
> 0.008 <= 0.009 , 0.0085 , 99.98, 3
> 0.045 <= 0.05 , 0.0475 , 99.98, 1
> 0.05 <= 0.05032 , 0.05016 , 100.00, 3
# target 50% 0.000989254
# target 75% 0.00108497
# target 90% 0.00123739
# target 99% 0.00289706
# target 99.9% 0.006
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.072 ms avg, 1999.3 qps
Successfully wrote 3817 bytes of Json data to /data/2018-11-19-063521_grpc_linkerd_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:35:31 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:41 W periodic.go:487> T001 warning only did 4979 out of 5000 calls before reaching 10s
06:35:41 I periodic.go:533> T001 ended after 10.000860824s : 4979 calls. qps=497.8571432622508
06:35:41 W periodic.go:487> T002 warning only did 4982 out of 5000 calls before reaching 10s
06:35:41 I periodic.go:533> T002 ended after 10.005916815s : 4982 calls. qps=497.90539858690596
06:35:41 W periodic.go:487> T003 warning only did 4980 out of 5000 calls before reaching 10s
06:35:41 I periodic.go:533> T003 ended after 10.005959371s : 4980 calls. qps=497.70340007909675
06:35:41 W periodic.go:487> T000 warning only did 4983 out of 5000 calls before reaching 10s
06:35:41 I periodic.go:533> T000 ended after 10.00597204s : 4983 calls. qps=498.00259086072765
Ended after 10.005983072s : 19924 calls. qps=1991.2
Aggregated Sleep Time : count 19924 avg -0.0029089843 +/- 0.005698 min -0.043525847 max 0.001365088 sum -57.9586031
# range, mid point, percentile, count
>= -0.0435258 <= -0.001 , -0.0222629 , 38.24, 7619
> -0.001 <= 0 , -0.0005 , 66.86, 5702
> 0 <= 0.001 , 0.0005 , 98.29, 6262
> 0.001 <= 0.00136509 , 0.00118254 , 100.00, 341
# target 50% -0.000589092
WARNING 38.24% of sleep were falling behind
Aggregated Function Time : count 19924 avg 0.0017345856 +/- 0.001223 min 0.000469838 max 0.030722224 sum 34.559884
# range, mid point, percentile, count
>= 0.000469838 <= 0.0005 , 0.000484919 , 0.02, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.27, 51
> 0.0006 <= 0.0007 , 0.00065 , 1.55, 254
> 0.0007 <= 0.0008 , 0.00075 , 4.89, 666
> 0.0008 <= 0.0009 , 0.00085 , 11.25, 1268
> 0.0009 <= 0.001 , 0.00095 , 17.28, 1200
> 0.001 <= 0.0011 , 0.00105 , 21.99, 940
> 0.0011 <= 0.0012 , 0.00115 , 25.69, 736
> 0.0012 <= 0.0014 , 0.0013 , 32.47, 1352
> 0.0014 <= 0.0016 , 0.0015 , 45.57, 2610
> 0.0016 <= 0.0018 , 0.0017 , 63.74, 3620
> 0.0018 <= 0.002 , 0.0019 , 78.75, 2991
> 0.002 <= 0.0025 , 0.00225 , 91.67, 2573
> 0.0025 <= 0.003 , 0.00275 , 96.17, 897
> 0.003 <= 0.0035 , 0.00325 , 97.05, 175
> 0.0035 <= 0.004 , 0.00375 , 98.14, 218
> 0.004 <= 0.0045 , 0.00425 , 98.73, 116
> 0.0045 <= 0.005 , 0.00475 , 99.07, 68
> 0.005 <= 0.006 , 0.0055 , 99.38, 63
> 0.006 <= 0.007 , 0.0065 , 99.52, 27
> 0.007 <= 0.008 , 0.0075 , 99.56, 8
> 0.008 <= 0.009 , 0.0085 , 99.57, 3
> 0.009 <= 0.01 , 0.0095 , 99.58, 1
> 0.01 <= 0.012 , 0.011 , 99.60, 4
> 0.012 <= 0.014 , 0.013 , 99.62, 5
> 0.014 <= 0.016 , 0.015 , 99.76, 27
> 0.016 <= 0.018 , 0.017 , 99.90, 29
> 0.018 <= 0.02 , 0.019 , 99.98, 15
> 0.025 <= 0.03 , 0.0275 , 99.99, 2
> 0.03 <= 0.0307222 , 0.0303611 , 100.00, 2
# target 50% 0.00164873
# target 75% 0.00194998
# target 90% 0.00243541
# target 99% 0.00490265
# target 99.9% 0.0179363
Ping SERVING : 19924
All done 19924 calls (plus 4 warmup) 1.735 ms avg, 1991.2 qps
Successfully wrote 5002 bytes of Json data to /data/2018-11-19-063531_grpc_istio_2000qps_10s_echo_1_1.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:35:41 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:35:41 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:35:51 I periodic.go:533> T002 ended after 10.000411673s : 5000 calls. qps=499.9794171973384
06:35:51 I periodic.go:533> T003 ended after 10.000817461s : 5000 calls. qps=499.9591302909393
06:35:51 I periodic.go:533> T001 ended after 10.003177147s : 5000 calls. qps=499.8411931052849
06:35:51 I periodic.go:533> T000 ended after 10.003220649s : 5000 calls. qps=499.8390193962021
Ended after 10.003235527s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0013989889 +/- 0.0004269 min -0.003410008 max 0.001815346 sum 27.9741822
Aggregated Function Time : count 20000 avg 0.00035998734 +/- 0.0002848 min 9.6776e-05 max 0.004839552 sum 7.19974671
# range, mid point, percentile, count
>= 9.6776e-05 <= 0.0001 , 9.8388e-05 , 0.01, 2
> 0.0001 <= 0.0002 , 0.00015 , 3.69, 737
> 0.0002 <= 0.0003 , 0.00025 , 45.91, 8442
> 0.0003 <= 0.0004 , 0.00035 , 83.14, 7448
> 0.0004 <= 0.0005 , 0.00045 , 92.92, 1956
> 0.0005 <= 0.0006 , 0.00055 , 95.50, 516
> 0.0006 <= 0.0007 , 0.00065 , 96.23, 145
> 0.0007 <= 0.0008 , 0.00075 , 96.53, 60
> 0.0008 <= 0.0009 , 0.00085 , 96.86, 66
> 0.0009 <= 0.001 , 0.00095 , 97.67, 161
> 0.001 <= 0.0011 , 0.00105 , 97.86, 38
> 0.0011 <= 0.0012 , 0.00115 , 98.29, 87
> 0.0012 <= 0.0014 , 0.0013 , 98.89, 119
> 0.0014 <= 0.0016 , 0.0015 , 99.08, 39
> 0.0016 <= 0.0018 , 0.0017 , 99.26, 36
> 0.0018 <= 0.002 , 0.0019 , 99.45, 39
> 0.002 <= 0.0025 , 0.00225 , 99.56, 22
> 0.0025 <= 0.003 , 0.00275 , 99.69, 25
> 0.003 <= 0.0035 , 0.00325 , 99.80, 22
> 0.0035 <= 0.004 , 0.00375 , 99.87, 14
> 0.004 <= 0.0045 , 0.00425 , 99.94, 14
> 0.0045 <= 0.00483955 , 0.00466978 , 100.00, 12
# target 50% 0.000310996
# target 75% 0.000378128
# target 90% 0.000470092
# target 99% 0.00151795
# target 99.9% 0.00421429
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.360 ms avg, 1999.4 qps
Successfully wrote 4284 bytes of Json data to /data/2018-11-19-063541_http_baseline_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:35:51 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:35:51 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:01 I periodic.go:533> T002 ended after 10.000819945s : 5000 calls. qps=499.9590061112734
06:36:01 I periodic.go:533> T001 ended after 10.001401253s : 5000 calls. qps=499.9299471661744
06:36:01 I periodic.go:533> T003 ended after 10.001528958s : 5000 calls. qps=499.92356378677596
06:36:01 I periodic.go:533> T000 ended after 10.001775818s : 5000 calls. qps=499.9112248648483
Ended after 10.001838956s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.0010575847 +/- 0.0006105 min -0.013764807 max 0.001481187 sum 21.147463
Aggregated Function Time : count 20000 avg 0.00069447037 +/- 0.0003302 min 0.000350058 max 0.015593526 sum 13.8894074
# range, mid point, percentile, count
>= 0.000350058 <= 0.0004 , 0.000375029 , 0.02, 4
> 0.0004 <= 0.0005 , 0.00045 , 0.49, 95
> 0.0005 <= 0.0006 , 0.00055 , 27.55, 5410
> 0.0006 <= 0.0007 , 0.00065 , 74.50, 9391
> 0.0007 <= 0.0008 , 0.00075 , 90.76, 3252
> 0.0008 <= 0.0009 , 0.00085 , 95.16, 879
> 0.0009 <= 0.001 , 0.00095 , 96.80, 328
> 0.001 <= 0.0011 , 0.00105 , 97.37, 115
> 0.0011 <= 0.0012 , 0.00115 , 97.72, 69
> 0.0012 <= 0.0014 , 0.0013 , 98.15, 87
> 0.0014 <= 0.0016 , 0.0015 , 98.62, 94
> 0.0016 <= 0.0018 , 0.0017 , 99.00, 76
> 0.0018 <= 0.002 , 0.0019 , 99.12, 25
> 0.002 <= 0.0025 , 0.00225 , 99.36, 47
> 0.0025 <= 0.003 , 0.00275 , 99.47, 21
> 0.003 <= 0.0035 , 0.00325 , 99.56, 19
> 0.0035 <= 0.004 , 0.00375 , 99.72, 31
> 0.004 <= 0.0045 , 0.00425 , 99.80, 16
> 0.0045 <= 0.005 , 0.00475 , 99.89, 20
> 0.005 <= 0.006 , 0.0055 , 100.00, 20
> 0.014 <= 0.0155935 , 0.0147968 , 100.00, 1
# target 50% 0.000647822
# target 75% 0.000703075
# target 90% 0.000795326
# target 99% 0.0018
# target 99.9% 0.00505
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.694 ms avg, 1999.6 qps
Successfully wrote 4129 bytes of Json data to /data/2018-11-19-063551_http_linkerd_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:36:01 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:36:01 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:11 W periodic.go:487> T003 warning only did 4901 out of 5000 calls before reaching 10s
06:36:11 I periodic.go:533> T003 ended after 10.000413439s : 4901 calls. qps=490.0797381923121
06:36:11 W periodic.go:487> T000 warning only did 4904 out of 5000 calls before reaching 10s
06:36:11 I periodic.go:533> T000 ended after 10.000445361s : 4904 calls. qps=490.3781604692075
06:36:11 W periodic.go:487> T002 warning only did 4901 out of 5000 calls before reaching 10s
06:36:11 I periodic.go:533> T002 ended after 10.000457915s : 4901 calls. qps=490.07755861347476
06:36:11 W periodic.go:487> T001 warning only did 4902 out of 5000 calls before reaching 10s
06:36:11 I periodic.go:533> T001 ended after 10.000496882s : 4902 calls. qps=490.17564405456307
Ended after 10.000508656s : 19608 calls. qps=1960.7
Aggregated Sleep Time : count 19608 avg -0.098756179 +/- 0.05954 min -0.199229699 max 0.001073471 sum -1936.41116
# range, mid point, percentile, count
>= -0.19923 <= -0.001 , -0.100115 , 90.72, 17788
> -0.001 <= 0 , -0.0005 , 91.55, 163
> 0 <= 0.001 , 0.0005 , 99.99, 1656
> 0.001 <= 0.00107347 , 0.00103674 , 100.00, 1
# target 50% -0.0899788
WARNING 90.72% of sleep were falling behind
Aggregated Function Time : count 19608 avg 0.0019226766 +/- 0.0009971 min 0.000504962 max 0.016298518 sum 37.6998434
# range, mid point, percentile, count
>= 0.000504962 <= 0.0006 , 0.000552481 , 0.02, 3
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.03, 2
> 0.0008 <= 0.0009 , 0.00085 , 0.10, 14
> 0.0009 <= 0.001 , 0.00095 , 0.32, 43
> 0.001 <= 0.0011 , 0.00105 , 0.84, 101
> 0.0011 <= 0.0012 , 0.00115 , 2.41, 308
> 0.0012 <= 0.0014 , 0.0013 , 17.84, 3027
> 0.0014 <= 0.0016 , 0.0015 , 29.16, 2218
> 0.0016 <= 0.0018 , 0.0017 , 39.87, 2101
> 0.0018 <= 0.002 , 0.0019 , 77.92, 7460
> 0.002 <= 0.0025 , 0.00225 , 94.22, 3197
> 0.0025 <= 0.003 , 0.00275 , 95.69, 288
> 0.003 <= 0.0035 , 0.00325 , 96.13, 87
> 0.0035 <= 0.004 , 0.00375 , 97.11, 191
> 0.004 <= 0.0045 , 0.00425 , 98.41, 256
> 0.0045 <= 0.005 , 0.00475 , 98.82, 80
> 0.005 <= 0.006 , 0.0055 , 99.35, 103
> 0.006 <= 0.007 , 0.0065 , 99.56, 42
> 0.007 <= 0.008 , 0.0075 , 99.59, 6
> 0.008 <= 0.009 , 0.0085 , 99.61, 4
> 0.012 <= 0.014 , 0.013 , 99.78, 32
> 0.014 <= 0.016 , 0.015 , 99.98, 40
> 0.016 <= 0.0162985 , 0.0161493 , 100.00, 4
# target 50% 0.00185324
# target 75% 0.00198466
# target 90% 0.00237053
# target 99% 0.00533903
# target 99.9% 0.0152196
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19608 (100.0 %)
Response Header Sizes : count 19608 avg 209.0001 +/- 0.0101 min 209 max 210 sum 4098074
Response Body/Total Sizes : count 19608 avg 209.0001 +/- 0.0101 min 209 max 210 sum 4098074
All done 19608 calls (plus 4 warmup) 1.923 ms avg, 1960.7 qps
Successfully wrote 4815 bytes of Json data to /data/2018-11-19-063601_http_istio_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:36:11 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:21 I periodic.go:533> T002 ended after 10.000580453s : 5000 calls. qps=499.97097903453067
06:36:21 I periodic.go:533> T001 ended after 10.003027215s : 5000 calls. qps=499.84868505628674
06:36:21 I periodic.go:533> T003 ended after 10.004551726s : 5000 calls. qps=499.7725172439175
06:36:21 I periodic.go:533> T000 ended after 10.004648217s : 5000 calls. qps=499.76769712941524
Ended after 10.004768898s : 20000 calls. qps=1999
Sleep times : count 19996 avg 0.0010845184 +/- 0.000521 min -0.005397936 max 0.001670689 sum 21.6860293
Aggregated Function Time : count 20000 avg 0.00064240052 +/- 0.0003459 min 0.000206181 max 0.005409268 sum 12.8480104
# range, mid point, percentile, count
>= 0.000206181 <= 0.0003 , 0.000253091 , 0.23, 45
> 0.0003 <= 0.0004 , 0.00035 , 2.10, 374
> 0.0004 <= 0.0005 , 0.00045 , 16.39, 2858
> 0.0005 <= 0.0006 , 0.00055 , 56.47, 8017
> 0.0006 <= 0.0007 , 0.00065 , 82.61, 5229
> 0.0007 <= 0.0008 , 0.00075 , 92.73, 2024
> 0.0008 <= 0.0009 , 0.00085 , 95.44, 540
> 0.0009 <= 0.001 , 0.00095 , 96.44, 202
> 0.001 <= 0.0011 , 0.00105 , 96.80, 70
> 0.0011 <= 0.0012 , 0.00115 , 97.08, 57
> 0.0012 <= 0.0014 , 0.0013 , 97.55, 93
> 0.0014 <= 0.0016 , 0.0015 , 97.91, 73
> 0.0016 <= 0.0018 , 0.0017 , 98.47, 113
> 0.0018 <= 0.002 , 0.0019 , 99.01, 107
> 0.002 <= 0.0025 , 0.00225 , 99.30, 58
> 0.0025 <= 0.003 , 0.00275 , 99.45, 30
> 0.003 <= 0.0035 , 0.00325 , 99.52, 14
> 0.0035 <= 0.004 , 0.00375 , 99.67, 30
> 0.004 <= 0.0045 , 0.00425 , 99.81, 28
> 0.0045 <= 0.005 , 0.00475 , 99.95, 29
> 0.005 <= 0.00540927 , 0.00520463 , 100.00, 9
# target 50% 0.000583859
# target 75% 0.000670874
# target 90% 0.000772974
# target 99% 0.00199626
# target 99.9% 0.00481034
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.642 ms avg, 1999.0 qps
Successfully wrote 3632 bytes of Json data to /data/2018-11-19-063611_grpc_baseline_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:36:21 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:31 I periodic.go:533> T003 ended after 10.001129536s : 5000 calls. qps=499.9435295785374
06:36:31 I periodic.go:533> T001 ended after 10.006295336s : 5000 calls. qps=499.6854312316092
06:36:31 I periodic.go:533> T000 ended after 10.006363939s : 5000 calls. qps=499.68200541981105
06:36:31 I periodic.go:533> T002 ended after 10.006407018s : 5000 calls. qps=499.67985421797874
Ended after 10.0064227s : 20000 calls. qps=1998.7
Sleep times : count 19996 avg 0.00033679479 +/- 0.003896 min -0.055924313 max 0.001367706 sum 6.73454862
Aggregated Function Time : count 20000 avg 0.0010005993 +/- 0.0007734 min 0.000460803 max 0.047762412 sum 20.011985
# range, mid point, percentile, count
>= 0.000460803 <= 0.0005 , 0.000480402 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.14, 26
> 0.0006 <= 0.0007 , 0.00065 , 1.07, 186
> 0.0007 <= 0.0008 , 0.00075 , 13.03, 2390
> 0.0008 <= 0.0009 , 0.00085 , 39.99, 5394
> 0.0009 <= 0.001 , 0.00095 , 71.22, 6246
> 0.001 <= 0.0011 , 0.00105 , 87.56, 3268
> 0.0011 <= 0.0012 , 0.00115 , 92.64, 1015
> 0.0012 <= 0.0014 , 0.0013 , 95.93, 658
> 0.0014 <= 0.0016 , 0.0015 , 96.90, 194
> 0.0016 <= 0.0018 , 0.0017 , 97.47, 113
> 0.0018 <= 0.002 , 0.0019 , 98.19, 144
> 0.002 <= 0.0025 , 0.00225 , 99.12, 187
> 0.0025 <= 0.003 , 0.00275 , 99.25, 26
> 0.003 <= 0.0035 , 0.00325 , 99.34, 18
> 0.0035 <= 0.004 , 0.00375 , 99.39, 9
> 0.004 <= 0.0045 , 0.00425 , 99.56, 36
> 0.0045 <= 0.005 , 0.00475 , 99.75, 37
> 0.005 <= 0.006 , 0.0055 , 99.91, 31
> 0.006 <= 0.007 , 0.0065 , 99.96, 11
> 0.009 <= 0.01 , 0.0095 , 99.97, 2
> 0.01 <= 0.012 , 0.011 , 99.98, 2
> 0.045 <= 0.0477624 , 0.0463812 , 100.00, 4
# target 50% 0.000932037
# target 75% 0.0010231
# target 90% 0.00114798
# target 99% 0.00243583
# target 99.9% 0.00596774
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.001 ms avg, 1998.7 qps
Successfully wrote 3839 bytes of Json data to /data/2018-11-19-063621_grpc_linkerd_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:36:31 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:41 I periodic.go:533> T002 ended after 10.000972027s : 5000 calls. qps=499.9514033737233
06:36:41 W periodic.go:487> T001 warning only did 4997 out of 5000 calls before reaching 10s
06:36:41 I periodic.go:533> T001 ended after 10.003911561s : 4997 calls. qps=499.50461572258195
06:36:41 W periodic.go:487> T003 warning only did 4995 out of 5000 calls before reaching 10s
06:36:41 I periodic.go:533> T003 ended after 10.003971409s : 4995 calls. qps=499.3017068707618
06:36:41 W periodic.go:487> T000 warning only did 4995 out of 5000 calls before reaching 10s
06:36:41 I periodic.go:533> T000 ended after 10.003984133s : 4995 calls. qps=499.3010718122858
Ended after 10.003994823s : 19987 calls. qps=1997.9
Aggregated Sleep Time : count 19986 avg -0.0026654577 +/- 0.005434 min -0.040194166 max 0.001368898 sum -53.2718385
# range, mid point, percentile, count
>= -0.0401942 <= -0.001 , -0.0205971 , 36.16, 7227
> -0.001 <= 0 , -0.0005 , 63.73, 5511
> 0 <= 0.001 , 0.0005 , 98.56, 6960
> 0.001 <= 0.0013689 , 0.00118445 , 100.00, 288
# target 50% -0.000498095
WARNING 36.16% of sleep were falling behind
Aggregated Function Time : count 19987 avg 0.0017115435 +/- 0.001109 min 0.000471102 max 0.020580119 sum 34.2086199
# range, mid point, percentile, count
>= 0.000471102 <= 0.0005 , 0.000485551 , 0.03, 6
> 0.0005 <= 0.0006 , 0.00055 , 0.23, 40
> 0.0006 <= 0.0007 , 0.00065 , 1.49, 251
> 0.0007 <= 0.0008 , 0.00075 , 4.52, 606
> 0.0008 <= 0.0009 , 0.00085 , 10.57, 1210
> 0.0009 <= 0.001 , 0.00095 , 16.85, 1255
> 0.001 <= 0.0011 , 0.00105 , 21.59, 947
> 0.0011 <= 0.0012 , 0.00115 , 25.13, 708
> 0.0012 <= 0.0014 , 0.0013 , 31.74, 1321
> 0.0014 <= 0.0016 , 0.0015 , 46.59, 2967
> 0.0016 <= 0.0018 , 0.0017 , 66.50, 3980
> 0.0018 <= 0.002 , 0.0019 , 80.94, 2886
> 0.002 <= 0.0025 , 0.00225 , 92.66, 2342
> 0.0025 <= 0.003 , 0.00275 , 96.31, 730
> 0.003 <= 0.0035 , 0.00325 , 97.09, 156
> 0.0035 <= 0.004 , 0.00375 , 98.08, 199
> 0.004 <= 0.0045 , 0.00425 , 98.69, 121
> 0.0045 <= 0.005 , 0.00475 , 98.95, 52
> 0.005 <= 0.006 , 0.0055 , 99.37, 84
> 0.006 <= 0.007 , 0.0065 , 99.54, 35
> 0.007 <= 0.008 , 0.0075 , 99.59, 10
> 0.008 <= 0.009 , 0.0085 , 99.62, 5
> 0.012 <= 0.014 , 0.013 , 99.66, 8
> 0.014 <= 0.016 , 0.015 , 99.85, 39
> 0.016 <= 0.018 , 0.017 , 99.97, 24
> 0.018 <= 0.02 , 0.019 , 99.99, 3
> 0.02 <= 0.0205801 , 0.0202901 , 100.00, 2
# target 50% 0.0016343
# target 75% 0.00191776
# target 90% 0.0023867
# target 99% 0.0051206
# target 99.9% 0.0167511
Ping SERVING : 19987
All done 19987 calls (plus 4 warmup) 1.712 ms avg, 1997.9 qps
Successfully wrote 4600 bytes of Json data to /data/2018-11-19-063631_grpc_istio_2000qps_10s_echo_0_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:36:41 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:36:41 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:36:51 I periodic.go:533> T001 ended after 10.000532614s : 5000 calls. qps=499.97337071831276
06:36:51 I periodic.go:533> T003 ended after 10.000944808s : 5000 calls. qps=499.9527640628891
06:36:51 I periodic.go:533> T002 ended after 10.004515273s : 5000 calls. qps=499.77433824244406
06:36:51 I periodic.go:533> T000 ended after 10.004543948s : 5000 calls. qps=499.77290579042796
Ended after 10.00455899s : 20000 calls. qps=1999.1
Sleep times : count 19996 avg 0.0013749025 +/- 0.0005362 min -0.005418234 max 0.001782505 sum 27.4925512
Aggregated Function Time : count 20000 avg 0.0003675025 +/- 0.0003181 min 0.000102405 max 0.00499955 sum 7.35004997
# range, mid point, percentile, count
>= 0.000102405 <= 0.0002 , 0.000151203 , 2.94, 589
> 0.0002 <= 0.0003 , 0.00025 , 44.14, 8239
> 0.0003 <= 0.0004 , 0.00035 , 83.21, 7814
> 0.0004 <= 0.0005 , 0.00045 , 92.92, 1942
> 0.0005 <= 0.0006 , 0.00055 , 95.44, 504
> 0.0006 <= 0.0007 , 0.00065 , 96.29, 170
> 0.0007 <= 0.0008 , 0.00075 , 96.60, 62
> 0.0008 <= 0.0009 , 0.00085 , 96.81, 42
> 0.0009 <= 0.001 , 0.00095 , 97.24, 86
> 0.001 <= 0.0011 , 0.00105 , 97.47, 46
> 0.0011 <= 0.0012 , 0.00115 , 97.83, 72
> 0.0012 <= 0.0014 , 0.0013 , 98.53, 139
> 0.0014 <= 0.0016 , 0.0015 , 98.86, 67
> 0.0016 <= 0.0018 , 0.0017 , 99.00, 28
> 0.0018 <= 0.002 , 0.0019 , 99.29, 58
> 0.002 <= 0.0025 , 0.00225 , 99.49, 40
> 0.0025 <= 0.003 , 0.00275 , 99.58, 17
> 0.003 <= 0.0035 , 0.00325 , 99.69, 24
> 0.0035 <= 0.004 , 0.00375 , 99.80, 21
> 0.004 <= 0.0045 , 0.00425 , 99.87, 14
> 0.0045 <= 0.00499955 , 0.00474978 , 100.00, 26
# target 50% 0.000314999
# target 75% 0.000378986
# target 90% 0.000469928
# target 99% 0.0018
# target 99.9% 0.00461528
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.368 ms avg, 1999.1 qps
Successfully wrote 4162 bytes of Json data to /data/2018-11-19-063641_http_baseline_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:36:51 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:36:51 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:01 I periodic.go:533> T002 ended after 10.000714821s : 5000 calls. qps=499.96426150466266
06:37:01 I periodic.go:533> T001 ended after 10.001380205s : 5000 calls. qps=499.9309992735148
06:37:01 I periodic.go:533> T000 ended after 10.001483649s : 5000 calls. qps=499.9258285544391
06:37:01 I periodic.go:533> T003 ended after 10.001550448s : 5000 calls. qps=499.92248961758173
Ended after 10.001575744s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010874687 +/- 0.0004422 min -0.003795758 max 0.001498387 sum 21.7450247
Aggregated Function Time : count 20000 avg 0.00068088653 +/- 0.0002983 min 0.000338594 max 0.005627048 sum 13.6177307
# range, mid point, percentile, count
>= 0.000338594 <= 0.0004 , 0.000369297 , 0.02, 4
> 0.0004 <= 0.0005 , 0.00045 , 0.46, 87
> 0.0005 <= 0.0006 , 0.00055 , 32.65, 6438
> 0.0006 <= 0.0007 , 0.00065 , 78.40, 9151
> 0.0007 <= 0.0008 , 0.00075 , 92.50, 2820
> 0.0008 <= 0.0009 , 0.00085 , 95.82, 664
> 0.0009 <= 0.001 , 0.00095 , 97.08, 253
> 0.001 <= 0.0011 , 0.00105 , 97.45, 74
> 0.0011 <= 0.0012 , 0.00115 , 97.75, 60
> 0.0012 <= 0.0014 , 0.0013 , 98.22, 92
> 0.0014 <= 0.0016 , 0.0015 , 98.61, 79
> 0.0016 <= 0.0018 , 0.0017 , 99.01, 80
> 0.0018 <= 0.002 , 0.0019 , 99.25, 47
> 0.002 <= 0.0025 , 0.00225 , 99.48, 48
> 0.0025 <= 0.003 , 0.00275 , 99.55, 13
> 0.003 <= 0.0035 , 0.00325 , 99.62, 15
> 0.0035 <= 0.004 , 0.00375 , 99.70, 15
> 0.004 <= 0.0045 , 0.00425 , 99.82, 24
> 0.0045 <= 0.005 , 0.00475 , 99.90, 16
> 0.005 <= 0.00562705 , 0.00531352 , 100.00, 20
# target 50% 0.00063793
# target 75% 0.000692569
# target 90% 0.00078227
# target 99% 0.001795
# target 99.9% 0.005
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.681 ms avg, 1999.7 qps
Successfully wrote 4004 bytes of Json data to /data/2018-11-19-063651_http_linkerd_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:37:01 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:37:01 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:11 W periodic.go:487> T002 warning only did 4859 out of 5000 calls before reaching 10s
06:37:11 I periodic.go:533> T002 ended after 10.001310769s : 4859 calls. qps=485.83631808151847
06:37:11 W periodic.go:487> T001 warning only did 4855 out of 5000 calls before reaching 10s
06:37:11 I periodic.go:533> T001 ended after 10.004143479s : 4855 calls. qps=485.2989174126978
06:37:11 W periodic.go:487> T000 warning only did 4862 out of 5000 calls before reaching 10s
06:37:11 I periodic.go:533> T000 ended after 10.004177281s : 4862 calls. qps=485.996985402682
06:37:11 W periodic.go:487> T003 warning only did 4849 out of 5000 calls before reaching 10s
06:37:11 I periodic.go:533> T003 ended after 10.004191064s : 4849 calls. qps=484.6968604437281
Ended after 10.004202063s : 19425 calls. qps=1941.7
Aggregated Sleep Time : count 19425 avg -0.10654086 +/- 0.09129 min -0.302373246 max 0.001241693 sum -2069.55629
# range, mid point, percentile, count
>= -0.302373 <= -0.001 , -0.151687 , 89.66, 17416
> -0.001 <= 0 , -0.0005 , 91.12, 285
> 0 <= 0.001 , 0.0005 , 99.99, 1722
> 0.001 <= 0.00124169 , 0.00112085 , 100.00, 2
# target 50% -0.134312
WARNING 89.66% of sleep were falling behind
Aggregated Function Time : count 19425 avg 0.0019142407 +/- 0.0009491 min 0.000529215 max 0.016805119 sum 37.1841264
# range, mid point, percentile, count
>= 0.000529215 <= 0.0006 , 0.000564608 , 0.01, 1
> 0.0006 <= 0.0007 , 0.00065 , 0.01, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.06, 9
> 0.0008 <= 0.0009 , 0.00085 , 0.16, 20
> 0.0009 <= 0.001 , 0.00095 , 0.36, 39
> 0.001 <= 0.0011 , 0.00105 , 0.92, 109
> 0.0011 <= 0.0012 , 0.00115 , 5.54, 897
> 0.0012 <= 0.0014 , 0.0013 , 17.83, 2388
> 0.0014 <= 0.0016 , 0.0015 , 25.96, 1578
> 0.0016 <= 0.0018 , 0.0017 , 39.36, 2603
> 0.0018 <= 0.002 , 0.0019 , 76.16, 7149
> 0.002 <= 0.0025 , 0.00225 , 94.40, 3543
> 0.0025 <= 0.003 , 0.00275 , 95.85, 282
> 0.003 <= 0.0035 , 0.00325 , 96.68, 161
> 0.0035 <= 0.004 , 0.00375 , 97.71, 200
> 0.004 <= 0.0045 , 0.00425 , 98.64, 180
> 0.0045 <= 0.005 , 0.00475 , 99.01, 72
> 0.005 <= 0.006 , 0.0055 , 99.39, 74
> 0.006 <= 0.007 , 0.0065 , 99.53, 27
> 0.007 <= 0.008 , 0.0075 , 99.59, 12
> 0.01 <= 0.012 , 0.011 , 99.61, 4
> 0.012 <= 0.014 , 0.013 , 99.92, 60
> 0.014 <= 0.016 , 0.015 , 99.94, 4
> 0.016 <= 0.0168051 , 0.0164026 , 100.00, 12
# target 50% 0.00185784
# target 75% 0.0019937
# target 90% 0.00237941
# target 99% 0.00499132
# target 99.9% 0.0138858
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19425 (100.0 %)
Response Header Sizes : count 19425 avg 209.0001 +/- 0.01015 min 209 max 210 sum 4059827
Response Body/Total Sizes : count 19425 avg 209.0001 +/- 0.01015 min 209 max 210 sum 4059827
All done 19425 calls (plus 4 warmup) 1.914 ms avg, 1941.7 qps
Successfully wrote 4811 bytes of Json data to /data/2018-11-19-063701_http_istio_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:37:11 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:21 I periodic.go:533> T003 ended after 10.000680504s : 5000 calls. qps=499.9659771152709
06:37:21 I periodic.go:533> T002 ended after 10.001104742s : 5000 calls. qps=499.9447690016003
06:37:21 I periodic.go:533> T000 ended after 10.003487453s : 5000 calls. qps=499.82568814044174
06:37:21 I periodic.go:533> T001 ended after 10.003562958s : 5000 calls. qps=499.8219155507413
Ended after 10.003580105s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010831252 +/- 0.0005165 min -0.00470785 max 0.001698261 sum 21.6581717
Aggregated Function Time : count 20000 avg 0.00064427008 +/- 0.0003315 min 0.000168135 max 0.005452313 sum 12.8854017
# range, mid point, percentile, count
>= 0.000168135 <= 0.0002 , 0.000184068 , 0.01, 2
> 0.0002 <= 0.0003 , 0.00025 , 0.22, 42
> 0.0003 <= 0.0004 , 0.00035 , 1.62, 281
> 0.0004 <= 0.0005 , 0.00045 , 13.89, 2453
> 0.0005 <= 0.0006 , 0.00055 , 54.48, 8118
> 0.0006 <= 0.0007 , 0.00065 , 82.48, 5601
> 0.0007 <= 0.0008 , 0.00075 , 92.48, 1999
> 0.0008 <= 0.0009 , 0.00085 , 95.75, 654
> 0.0009 <= 0.001 , 0.00095 , 96.69, 189
> 0.001 <= 0.0011 , 0.00105 , 97.12, 86
> 0.0011 <= 0.0012 , 0.00115 , 97.44, 62
> 0.0012 <= 0.0014 , 0.0013 , 97.70, 54
> 0.0014 <= 0.0016 , 0.0015 , 97.95, 50
> 0.0016 <= 0.0018 , 0.0017 , 98.59, 128
> 0.0018 <= 0.002 , 0.0019 , 99.05, 91
> 0.002 <= 0.0025 , 0.00225 , 99.33, 56
> 0.0025 <= 0.003 , 0.00275 , 99.45, 24
> 0.003 <= 0.0035 , 0.00325 , 99.60, 30
> 0.0035 <= 0.004 , 0.00375 , 99.69, 19
> 0.004 <= 0.0045 , 0.00425 , 99.83, 28
> 0.0045 <= 0.005 , 0.00475 , 99.95, 23
> 0.005 <= 0.00545231 , 0.00522616 , 100.00, 10
# target 50% 0.000588963
# target 75% 0.000673273
# target 90% 0.000775188
# target 99% 0.00197802
# target 99.9% 0.00478261
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.644 ms avg, 1999.3 qps
Successfully wrote 3742 bytes of Json data to /data/2018-11-19-063711_grpc_baseline_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:37:21 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:31 I periodic.go:533> T001 ended after 10.001064038s : 5000 calls. qps=499.946803760282
06:37:31 I periodic.go:533> T002 ended after 10.001694114s : 5000 calls. qps=499.9153086476806
06:37:31 I periodic.go:533> T000 ended after 10.001898311s : 5000 calls. qps=499.90510246450356
06:37:31 I periodic.go:533> T003 ended after 10.001959124s : 5000 calls. qps=499.9020629870752
Ended after 10.001993865s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00051279507 +/- 0.001905 min -0.034221566 max 0.001344943 sum 10.2538503
Aggregated Function Time : count 20000 avg 0.001023103 +/- 0.0006454 min 0.000455376 max 0.036070524 sum 20.4620592
# range, mid point, percentile, count
>= 0.000455376 <= 0.0005 , 0.000477688 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.10, 18
> 0.0006 <= 0.0007 , 0.00065 , 0.65, 109
> 0.0007 <= 0.0008 , 0.00075 , 10.71, 2012
> 0.0008 <= 0.0009 , 0.00085 , 34.88, 4835
> 0.0009 <= 0.001 , 0.00095 , 65.14, 6051
> 0.001 <= 0.0011 , 0.00105 , 83.66, 3703
> 0.0011 <= 0.0012 , 0.00115 , 91.14, 1498
> 0.0012 <= 0.0014 , 0.0013 , 95.64, 899
> 0.0014 <= 0.0016 , 0.0015 , 96.62, 196
> 0.0016 <= 0.0018 , 0.0017 , 97.27, 130
> 0.0018 <= 0.002 , 0.0019 , 97.94, 135
> 0.002 <= 0.0025 , 0.00225 , 98.89, 190
> 0.0025 <= 0.003 , 0.00275 , 99.15, 51
> 0.003 <= 0.0035 , 0.00325 , 99.25, 19
> 0.0035 <= 0.004 , 0.00375 , 99.32, 15
> 0.004 <= 0.0045 , 0.00425 , 99.50, 36
> 0.0045 <= 0.005 , 0.00475 , 99.75, 49
> 0.005 <= 0.006 , 0.0055 , 99.91, 32
> 0.006 <= 0.007 , 0.0065 , 99.96, 11
> 0.007 <= 0.008 , 0.0075 , 99.97, 1
> 0.008 <= 0.009 , 0.0085 , 99.98, 3
> 0.035 <= 0.0360705 , 0.0355353 , 100.00, 4
# target 50% 0.000949959
# target 75% 0.00105325
# target 90% 0.00118471
# target 99% 0.00270588
# target 99.9% 0.00596875
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.023 ms avg, 1999.6 qps
Successfully wrote 3827 bytes of Json data to /data/2018-11-19-063721_grpc_linkerd_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:37:31 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:41 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:37:41 I periodic.go:533> T003 ended after 10.003115989s : 4998 calls. qps=499.6443113821821
06:37:41 I periodic.go:533> T000 ended after 10.005125777s : 5000 calls. qps=499.7438424506475
06:37:41 W periodic.go:487> T001 warning only did 4998 out of 5000 calls before reaching 10s
06:37:41 I periodic.go:533> T001 ended after 10.005254118s : 4998 calls. qps=499.5375370834734
06:37:41 I periodic.go:533> T002 ended after 10.017927741s : 5000 calls. qps=499.10521709361973
Ended after 10.017988623s : 19996 calls. qps=1996
Aggregated Sleep Time : count 19994 avg -0.0029842337 +/- 0.006386 min -0.048811541 max 0.001411391 sum -59.666768
# range, mid point, percentile, count
>= -0.0488115 <= -0.001 , -0.0249058 , 35.65, 7127
> -0.001 <= 0 , -0.0005 , 64.51, 5772
> 0 <= 0.001 , 0.0005 , 97.91, 6677
> 0.001 <= 0.00141139 , 0.0012057 , 100.00, 418
# target 50% -0.000502772
WARNING 35.65% of sleep were falling behind
Aggregated Function Time : count 19996 avg 0.0017136619 +/- 0.001175 min 0.000471445 max 0.021184207 sum 34.2663824
# range, mid point, percentile, count
>= 0.000471445 <= 0.0005 , 0.000485723 , 0.02, 4
> 0.0005 <= 0.0006 , 0.00055 , 0.36, 68
> 0.0006 <= 0.0007 , 0.00065 , 1.90, 307
> 0.0007 <= 0.0008 , 0.00075 , 5.25, 671
> 0.0008 <= 0.0009 , 0.00085 , 11.29, 1208
> 0.0009 <= 0.001 , 0.00095 , 17.78, 1298
> 0.001 <= 0.0011 , 0.00105 , 21.89, 822
> 0.0011 <= 0.0012 , 0.00115 , 25.25, 671
> 0.0012 <= 0.0014 , 0.0013 , 32.35, 1420
> 0.0014 <= 0.0016 , 0.0015 , 46.74, 2877
> 0.0016 <= 0.0018 , 0.0017 , 65.23, 3697
> 0.0018 <= 0.002 , 0.0019 , 79.55, 2863
> 0.002 <= 0.0025 , 0.00225 , 92.84, 2659
> 0.0025 <= 0.003 , 0.00275 , 96.53, 737
> 0.003 <= 0.0035 , 0.00325 , 97.15, 125
> 0.0035 <= 0.004 , 0.00375 , 98.28, 226
> 0.004 <= 0.0045 , 0.00425 , 98.76, 96
> 0.0045 <= 0.005 , 0.00475 , 98.99, 46
> 0.005 <= 0.006 , 0.0055 , 99.49, 99
> 0.006 <= 0.007 , 0.0065 , 99.58, 18
> 0.007 <= 0.008 , 0.0075 , 99.60, 5
> 0.008 <= 0.009 , 0.0085 , 99.61, 2
> 0.012 <= 0.014 , 0.013 , 99.62, 2
> 0.014 <= 0.016 , 0.015 , 99.72, 20
> 0.016 <= 0.018 , 0.017 , 99.91, 38
> 0.018 <= 0.02 , 0.019 , 99.96, 10
> 0.02 <= 0.0211842 , 0.0205921 , 100.00, 7
# target 50% 0.00163527
# target 75% 0.0019365
# target 90% 0.00239308
# target 99% 0.00501051
# target 99.9% 0.0178423
Ping SERVING : 19996
All done 19996 calls (plus 4 warmup) 1.714 ms avg, 1996.0 qps
Successfully wrote 4596 bytes of Json data to /data/2018-11-19-063731_grpc_istio_2000qps_10s_echo_1_2.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:37:41 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:37:41 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:37:51 I periodic.go:533> T002 ended after 10.000513752s : 5000 calls. qps=499.9743137196378
06:37:51 I periodic.go:533> T003 ended after 10.001039957s : 5000 calls. qps=499.94800755699055
06:37:51 I periodic.go:533> T001 ended after 10.003262568s : 5000 calls. qps=499.83692480439146
06:37:51 I periodic.go:533> T000 ended after 10.003306284s : 5000 calls. qps=499.83474043950406
Ended after 10.003320876s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0013890701 +/- 0.0004868 min -0.003943335 max 0.001754144 sum 27.775845
Aggregated Function Time : count 20000 avg 0.00036810716 +/- 0.0002965 min 9.4255e-05 max 0.004988467 sum 7.36214326
# range, mid point, percentile, count
>= 9.4255e-05 <= 0.0001 , 9.71275e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.67, 534
> 0.0002 <= 0.0003 , 0.00025 , 42.42, 7949
> 0.0003 <= 0.0004 , 0.00035 , 81.66, 7848
> 0.0004 <= 0.0005 , 0.00045 , 92.99, 2266
> 0.0005 <= 0.0006 , 0.00055 , 95.84, 571
> 0.0006 <= 0.0007 , 0.00065 , 96.56, 143
> 0.0007 <= 0.0008 , 0.00075 , 96.88, 63
> 0.0008 <= 0.0009 , 0.00085 , 97.07, 39
> 0.0009 <= 0.001 , 0.00095 , 97.31, 48
> 0.001 <= 0.0011 , 0.00105 , 97.53, 45
> 0.0011 <= 0.0012 , 0.00115 , 98.03, 100
> 0.0012 <= 0.0014 , 0.0013 , 98.55, 102
> 0.0014 <= 0.0016 , 0.0015 , 98.78, 46
> 0.0016 <= 0.0018 , 0.0017 , 98.90, 25
> 0.0018 <= 0.002 , 0.0019 , 99.39, 97
> 0.002 <= 0.0025 , 0.00225 , 99.55, 32
> 0.0025 <= 0.003 , 0.00275 , 99.61, 12
> 0.003 <= 0.0035 , 0.00325 , 99.77, 32
> 0.0035 <= 0.004 , 0.00375 , 99.92, 32
> 0.004 <= 0.0045 , 0.00425 , 99.98, 12
> 0.0045 <= 0.00498847 , 0.00474423 , 100.00, 3
# target 50% 0.000319317
# target 75% 0.000383028
# target 90% 0.00047361
# target 99% 0.00184124
# target 99.9% 0.00392188
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.368 ms avg, 1999.3 qps
Successfully wrote 4290 bytes of Json data to /data/2018-11-19-063741_http_baseline_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:37:51 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:37:51 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:01 I periodic.go:533> T001 ended after 10.000874009s : 5000 calls. qps=499.95630336912484
06:38:01 I periodic.go:533> T000 ended after 10.001392952s : 5000 calls. qps=499.9303621002252
06:38:01 I periodic.go:533> T003 ended after 10.001505269s : 5000 calls. qps=499.9247478774687
06:38:01 I periodic.go:533> T002 ended after 10.001580334s : 5000 calls. qps=499.9209957853047
Ended after 10.001607159s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010920885 +/- 0.0004295 min -0.003306171 max 0.001472733 sum 21.8374011
Aggregated Function Time : count 20000 avg 0.00068077888 +/- 0.000288 min 0.000389118 max 0.00515915 sum 13.6155777
# range, mid point, percentile, count
>= 0.000389118 <= 0.0004 , 0.000394559 , 0.01, 1
> 0.0004 <= 0.0005 , 0.00045 , 0.38, 74
> 0.0005 <= 0.0006 , 0.00055 , 33.27, 6579
> 0.0006 <= 0.0007 , 0.00065 , 77.50, 8847
> 0.0007 <= 0.0008 , 0.00075 , 91.67, 2833
> 0.0008 <= 0.0009 , 0.00085 , 95.62, 790
> 0.0009 <= 0.001 , 0.00095 , 97.00, 276
> 0.001 <= 0.0011 , 0.00105 , 97.55, 110
> 0.0011 <= 0.0012 , 0.00115 , 97.82, 54
> 0.0012 <= 0.0014 , 0.0013 , 98.35, 106
> 0.0014 <= 0.0016 , 0.0015 , 98.88, 105
> 0.0016 <= 0.0018 , 0.0017 , 99.18, 61
> 0.0018 <= 0.002 , 0.0019 , 99.33, 29
> 0.002 <= 0.0025 , 0.00225 , 99.45, 26
> 0.0025 <= 0.003 , 0.00275 , 99.50, 9
> 0.003 <= 0.0035 , 0.00325 , 99.57, 14
> 0.0035 <= 0.004 , 0.00375 , 99.72, 30
> 0.004 <= 0.0045 , 0.00425 , 99.89, 35
> 0.0045 <= 0.005 , 0.00475 , 99.98, 17
> 0.005 <= 0.00515915 , 0.00507958 , 100.00, 4
# target 50% 0.000637821
# target 75% 0.000694337
# target 90% 0.00078821
# target 99% 0.00168197
# target 99.9% 0.00452941
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.681 ms avg, 1999.7 qps
Successfully wrote 4016 bytes of Json data to /data/2018-11-19-063751_http_linkerd_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:38:02 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:38:02 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:12 W periodic.go:487> T002 warning only did 4963 out of 5000 calls before reaching 10s
06:38:12 I periodic.go:533> T002 ended after 10.001811556s : 4963 calls. qps=496.2101087600215
06:38:12 W periodic.go:487> T001 warning only did 4962 out of 5000 calls before reaching 10s
06:38:12 I periodic.go:533> T001 ended after 10.003925902s : 4962 calls. qps=496.005273190597
06:38:12 W periodic.go:487> T000 warning only did 4963 out of 5000 calls before reaching 10s
06:38:12 I periodic.go:533> T000 ended after 10.003958646s : 4963 calls. qps=496.10361014281233
06:38:12 W periodic.go:487> T003 warning only did 4968 out of 5000 calls before reaching 10s
06:38:12 I periodic.go:533> T003 ended after 10.003970766s : 4968 calls. qps=496.60281064439886
Ended after 10.003981586s : 19856 calls. qps=1984.8
Aggregated Sleep Time : count 19856 avg -0.048579336 +/- 0.02713 min -0.100651655 max 0.00132674 sum -964.591286
# range, mid point, percentile, count
>= -0.100652 <= -0.001 , -0.0508258 , 88.33, 17539
> -0.001 <= 0 , -0.0005 , 89.69, 270
> 0 <= 0.001 , 0.0005 , 99.98, 2043
> 0.001 <= 0.00132674 , 0.00116337 , 100.00, 4
# target 50% -0.044246
WARNING 88.33% of sleep were falling behind
Aggregated Function Time : count 19856 avg 0.0018755531 +/- 0.0009846 min 0.000571504 max 0.018307635 sum 37.2409824
# range, mid point, percentile, count
>= 0.000571504 <= 0.0006 , 0.000585752 , 0.01, 2
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.05, 7
> 0.0008 <= 0.0009 , 0.00085 , 0.16, 21
> 0.0009 <= 0.001 , 0.00095 , 0.46, 60
> 0.001 <= 0.0011 , 0.00105 , 1.34, 175
> 0.0011 <= 0.0012 , 0.00115 , 7.79, 1280
> 0.0012 <= 0.0014 , 0.0013 , 21.45, 2713
> 0.0014 <= 0.0016 , 0.0015 , 29.85, 1668
> 0.0016 <= 0.0018 , 0.0017 , 41.39, 2291
> 0.0018 <= 0.002 , 0.0019 , 79.69, 7606
> 0.002 <= 0.0025 , 0.00225 , 95.10, 3060
> 0.0025 <= 0.003 , 0.00275 , 96.09, 196
> 0.003 <= 0.0035 , 0.00325 , 96.94, 169
> 0.0035 <= 0.004 , 0.00375 , 97.89, 188
> 0.004 <= 0.0045 , 0.00425 , 98.85, 191
> 0.0045 <= 0.005 , 0.00475 , 99.07, 43
> 0.005 <= 0.006 , 0.0055 , 99.41, 67
> 0.006 <= 0.007 , 0.0065 , 99.53, 25
> 0.007 <= 0.008 , 0.0075 , 99.59, 12
> 0.008 <= 0.009 , 0.0085 , 99.62, 5
> 0.012 <= 0.014 , 0.013 , 99.80, 37
> 0.014 <= 0.016 , 0.015 , 99.93, 25
> 0.016 <= 0.018 , 0.017 , 99.98, 10
> 0.018 <= 0.0183076 , 0.0181538 , 100.00, 4
# target 50% 0.00184496
# target 75% 0.00197549
# target 90% 0.00233438
# target 99% 0.00484233
# target 99.9% 0.0155315
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19856 (100.0 %)
Response Header Sizes : count 19856 avg 209 +/- 0 min 209 max 209 sum 4149904
Response Body/Total Sizes : count 19856 avg 209 +/- 0 min 209 max 209 sum 4149904
All done 19856 calls (plus 4 warmup) 1.876 ms avg, 1984.8 qps
Successfully wrote 4910 bytes of Json data to /data/2018-11-19-063802_http_istio_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:38:12 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:22 I periodic.go:533> T003 ended after 10.000669823s : 5000 calls. qps=499.96651109316394
06:38:22 I periodic.go:533> T001 ended after 10.001208833s : 5000 calls. qps=499.93956565550303
06:38:22 I periodic.go:533> T002 ended after 10.003292965s : 5000 calls. qps=499.8354059502445
06:38:22 I periodic.go:533> T000 ended after 10.003358479s : 5000 calls. qps=499.8321324279716
Ended after 10.003372957s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010901051 +/- 0.0005187 min -0.004361159 max 0.00174855 sum 21.7977422
Aggregated Function Time : count 20000 avg 0.00063795427 +/- 0.0003442 min 0.000174543 max 0.006103811 sum 12.7590853
# range, mid point, percentile, count
>= 0.000174543 <= 0.0002 , 0.000187272 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.26, 50
> 0.0003 <= 0.0004 , 0.00035 , 1.68, 284
> 0.0004 <= 0.0005 , 0.00045 , 15.94, 2852
> 0.0005 <= 0.0006 , 0.00055 , 58.66, 8544
> 0.0006 <= 0.0007 , 0.00065 , 84.69, 5208
> 0.0007 <= 0.0008 , 0.00075 , 93.14, 1688
> 0.0008 <= 0.0009 , 0.00085 , 95.66, 505
> 0.0009 <= 0.001 , 0.00095 , 96.41, 149
> 0.001 <= 0.0011 , 0.00105 , 96.75, 70
> 0.0011 <= 0.0012 , 0.00115 , 97.00, 48
> 0.0012 <= 0.0014 , 0.0013 , 97.54, 109
> 0.0014 <= 0.0016 , 0.0015 , 97.97, 86
> 0.0016 <= 0.0018 , 0.0017 , 98.60, 126
> 0.0018 <= 0.002 , 0.0019 , 98.98, 77
> 0.002 <= 0.0025 , 0.00225 , 99.28, 59
> 0.0025 <= 0.003 , 0.00275 , 99.44, 33
> 0.003 <= 0.0035 , 0.00325 , 99.50, 11
> 0.0035 <= 0.004 , 0.00375 , 99.64, 29
> 0.004 <= 0.0045 , 0.00425 , 99.83, 37
> 0.0045 <= 0.005 , 0.00475 , 99.98, 30
> 0.005 <= 0.006 , 0.0055 , 100.00, 3
> 0.006 <= 0.00610381 , 0.00605191 , 100.00, 1
# target 50% 0.00057974
# target 75% 0.000662769
# target 90% 0.000762855
# target 99% 0.00202542
# target 99.9% 0.00473333
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.638 ms avg, 1999.3 qps
Successfully wrote 3844 bytes of Json data to /data/2018-11-19-063812_grpc_baseline_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:38:22 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:32 I periodic.go:533> T000 ended after 10.001276333s : 5000 calls. qps=499.93619149409017
06:38:32 I periodic.go:533> T002 ended after 10.001923138s : 5000 calls. qps=499.90386158874315
06:38:32 I periodic.go:533> T001 ended after 10.002675068s : 5000 calls. qps=499.8662823703752
06:38:32 I periodic.go:533> T003 ended after 10.002760864s : 5000 calls. qps=499.86199490133083
Ended after 10.002799708s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.00054666231 +/- 0.002027 min -0.036888056 max 0.001373081 sum 10.9310595
Aggregated Function Time : count 20000 avg 0.0010086335 +/- 0.0006585 min 0.000472595 max 0.038766944 sum 20.1726697
# range, mid point, percentile, count
>= 0.000472595 <= 0.0005 , 0.000486298 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.09, 15
> 0.0006 <= 0.0007 , 0.00065 , 0.85, 153
> 0.0007 <= 0.0008 , 0.00075 , 11.63, 2156
> 0.0008 <= 0.0009 , 0.00085 , 36.72, 5018
> 0.0009 <= 0.001 , 0.00095 , 68.20, 6297
> 0.001 <= 0.0011 , 0.00105 , 86.97, 3752
> 0.0011 <= 0.0012 , 0.00115 , 93.10, 1227
> 0.0012 <= 0.0014 , 0.0013 , 96.00, 581
> 0.0014 <= 0.0016 , 0.0015 , 96.74, 147
> 0.0016 <= 0.0018 , 0.0017 , 97.31, 115
> 0.0018 <= 0.002 , 0.0019 , 97.94, 125
> 0.002 <= 0.0025 , 0.00225 , 98.94, 200
> 0.0025 <= 0.003 , 0.00275 , 99.19, 50
> 0.003 <= 0.0035 , 0.00325 , 99.28, 19
> 0.0035 <= 0.004 , 0.00375 , 99.39, 22
> 0.004 <= 0.0045 , 0.00425 , 99.58, 37
> 0.0045 <= 0.005 , 0.00475 , 99.78, 41
> 0.005 <= 0.006 , 0.0055 , 99.97, 36
> 0.006 <= 0.007 , 0.0065 , 99.98, 3
> 0.035 <= 0.0387669 , 0.0368835 , 100.00, 4
# target 50% 0.000942179
# target 75% 0.00103622
# target 90% 0.00114947
# target 99% 0.00262
# target 99.9% 0.00563889
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.009 ms avg, 1999.4 qps
Successfully wrote 3592 bytes of Json data to /data/2018-11-19-063822_grpc_linkerd_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:38:32 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:42 W periodic.go:487> T003 warning only did 4993 out of 5000 calls before reaching 10s
06:38:42 I periodic.go:533> T003 ended after 10.002735667s : 4993 calls. qps=499.16344550345303
06:38:42 W periodic.go:487> T001 warning only did 4956 out of 5000 calls before reaching 10s
06:38:42 I periodic.go:533> T001 ended after 10.005124692s : 4956 calls. qps=495.3461503546047
06:38:42 W periodic.go:487> T002 warning only did 4959 out of 5000 calls before reaching 10s
06:38:42 I periodic.go:533> T002 ended after 10.005146006s : 4959 calls. qps=495.6449408160691
06:38:42 I periodic.go:533> T000 ended after 10.009524614s : 5000 calls. qps=499.5242224597421
Ended after 10.009596792s : 19908 calls. qps=1988.9
Aggregated Sleep Time : count 19907 avg -0.0079254744 +/- 0.01802 min -0.129077674 max 0.001499261 sum -157.772419
# range, mid point, percentile, count
>= -0.129078 <= -0.001 , -0.0650388 , 50.62, 10076
> -0.001 <= 0 , -0.0005 , 74.52, 4759
> 0 <= 0.001 , 0.0005 , 98.58, 4790
> 0.001 <= 0.00149926 , 0.00124963 , 100.00, 282
# target 50% -0.00255727
WARNING 50.62% of sleep were falling behind
Aggregated Function Time : count 19908 avg 0.0017639326 +/- 0.001254 min 0.000476084 max 0.02696273 sum 35.11637
# range, mid point, percentile, count
>= 0.000476084 <= 0.0005 , 0.000488042 , 0.02, 4
> 0.0005 <= 0.0006 , 0.00055 , 0.32, 60
> 0.0006 <= 0.0007 , 0.00065 , 1.64, 263
> 0.0007 <= 0.0008 , 0.00075 , 4.94, 656
> 0.0008 <= 0.0009 , 0.00085 , 10.63, 1134
> 0.0009 <= 0.001 , 0.00095 , 17.18, 1303
> 0.001 <= 0.0011 , 0.00105 , 22.07, 974
> 0.0011 <= 0.0012 , 0.00115 , 25.43, 668
> 0.0012 <= 0.0014 , 0.0013 , 32.24, 1357
> 0.0014 <= 0.0016 , 0.0015 , 44.00, 2341
> 0.0016 <= 0.0018 , 0.0017 , 62.23, 3629
> 0.0018 <= 0.002 , 0.0019 , 77.02, 2945
> 0.002 <= 0.0025 , 0.00225 , 90.73, 2729
> 0.0025 <= 0.003 , 0.00275 , 95.52, 954
> 0.003 <= 0.0035 , 0.00325 , 96.69, 232
> 0.0035 <= 0.004 , 0.00375 , 97.62, 185
> 0.004 <= 0.0045 , 0.00425 , 98.36, 147
> 0.0045 <= 0.005 , 0.00475 , 98.81, 90
> 0.005 <= 0.006 , 0.0055 , 99.34, 106
> 0.006 <= 0.007 , 0.0065 , 99.51, 34
> 0.007 <= 0.008 , 0.0075 , 99.58, 13
> 0.008 <= 0.009 , 0.0085 , 99.58, 1
> 0.009 <= 0.01 , 0.0095 , 99.62, 7
> 0.012 <= 0.014 , 0.013 , 99.63, 2
> 0.014 <= 0.016 , 0.015 , 99.75, 25
> 0.016 <= 0.018 , 0.017 , 99.90, 29
> 0.018 <= 0.02 , 0.019 , 99.94, 8
> 0.02 <= 0.025 , 0.0225 , 99.98, 8
> 0.025 <= 0.0269627 , 0.0259814 , 100.00, 4
# target 50% 0.0016658
# target 75% 0.00197263
# target 90% 0.00247329
# target 99% 0.00535774
# target 99.9% 0.018023
Ping SERVING : 19908
All done 19908 calls (plus 4 warmup) 1.764 ms avg, 1988.9 qps
Successfully wrote 4847 bytes of Json data to /data/2018-11-19-063832_grpc_istio_2000qps_10s_echo_0_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:38:42 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:38:42 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:38:52 I periodic.go:533> T000 ended after 10.000434238s : 5000 calls. qps=499.97828904277225
06:38:52 I periodic.go:533> T003 ended after 10.000829821s : 5000 calls. qps=499.9585123927288
06:38:52 I periodic.go:533> T001 ended after 10.003027208s : 5000 calls. qps=499.8486854060749
06:38:52 I periodic.go:533> T002 ended after 10.003055915s : 5000 calls. qps=499.84725092881786
Ended after 10.003068863s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0012282889 +/- 0.0005087 min -0.004650505 max 0.001717124 sum 24.5608658
Aggregated Function Time : count 20000 avg 0.00044267356 +/- 0.0003371 min 0.000112459 max 0.006405218 sum 8.85347123
# range, mid point, percentile, count
>= 0.000112459 <= 0.0002 , 0.00015623 , 1.41, 282
> 0.0002 <= 0.0003 , 0.00025 , 24.36, 4590
> 0.0003 <= 0.0004 , 0.00035 , 59.35, 6998
> 0.0004 <= 0.0005 , 0.00045 , 78.78, 3886
> 0.0005 <= 0.0006 , 0.00055 , 88.22, 1889
> 0.0006 <= 0.0007 , 0.00065 , 92.50, 854
> 0.0007 <= 0.0008 , 0.00075 , 94.77, 454
> 0.0008 <= 0.0009 , 0.00085 , 95.77, 201
> 0.0009 <= 0.001 , 0.00095 , 97.00, 246
> 0.001 <= 0.0011 , 0.00105 , 97.48, 96
> 0.0011 <= 0.0012 , 0.00115 , 97.86, 77
> 0.0012 <= 0.0014 , 0.0013 , 98.36, 100
> 0.0014 <= 0.0016 , 0.0015 , 98.66, 59
> 0.0016 <= 0.0018 , 0.0017 , 98.86, 40
> 0.0018 <= 0.002 , 0.0019 , 99.28, 85
> 0.002 <= 0.0025 , 0.00225 , 99.47, 37
> 0.0025 <= 0.003 , 0.00275 , 99.56, 18
> 0.003 <= 0.0035 , 0.00325 , 99.67, 22
> 0.0035 <= 0.004 , 0.00375 , 99.80, 26
> 0.004 <= 0.0045 , 0.00425 , 99.91, 21
> 0.0045 <= 0.005 , 0.00475 , 99.96, 11
> 0.005 <= 0.006 , 0.0055 , 99.98, 4
> 0.006 <= 0.00640522 , 0.00620261 , 100.00, 4
# target 50% 0.000373278
# target 75% 0.000480546
# target 90% 0.000641569
# target 99% 0.00186588
# target 99.9% 0.00447619
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.443 ms avg, 1999.4 qps
Successfully wrote 4390 bytes of Json data to /data/2018-11-19-063842_http_baseline_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:38:52 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:38:52 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:02 I periodic.go:533> T001 ended after 10.000829482s : 5000 calls. qps=499.9585293399166
06:39:02 I periodic.go:533> T003 ended after 10.00134231s : 5000 calls. qps=499.93289350777155
06:39:02 I periodic.go:533> T002 ended after 10.001481664s : 5000 calls. qps=499.92592777501494
06:39:02 I periodic.go:533> T000 ended after 10.001505318s : 5000 calls. qps=499.92474542820617
Ended after 10.001582094s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010585096 +/- 0.0005154 min -0.00369559 max 0.001475228 sum 21.1659581
Aggregated Function Time : count 20000 avg 0.00069887562 +/- 0.0003413 min 0.000317878 max 0.005406706 sum 13.9775125
# range, mid point, percentile, count
>= 0.000317878 <= 0.0004 , 0.000358939 , 0.03, 5
> 0.0004 <= 0.0005 , 0.00045 , 0.48, 91
> 0.0005 <= 0.0006 , 0.00055 , 27.90, 5484
> 0.0006 <= 0.0007 , 0.00065 , 74.00, 9220
> 0.0007 <= 0.0008 , 0.00075 , 90.22, 3245
> 0.0008 <= 0.0009 , 0.00085 , 94.94, 944
> 0.0009 <= 0.001 , 0.00095 , 96.58, 326
> 0.001 <= 0.0011 , 0.00105 , 97.19, 124
> 0.0011 <= 0.0012 , 0.00115 , 97.55, 70
> 0.0012 <= 0.0014 , 0.0013 , 98.10, 111
> 0.0014 <= 0.0016 , 0.0015 , 98.47, 74
> 0.0016 <= 0.0018 , 0.0017 , 98.70, 46
> 0.0018 <= 0.002 , 0.0019 , 99.03, 66
> 0.002 <= 0.0025 , 0.00225 , 99.27, 47
> 0.0025 <= 0.003 , 0.00275 , 99.41, 28
> 0.003 <= 0.0035 , 0.00325 , 99.48, 15
> 0.0035 <= 0.004 , 0.00375 , 99.60, 24
> 0.004 <= 0.0045 , 0.00425 , 99.66, 12
> 0.0045 <= 0.005 , 0.00475 , 99.87, 42
> 0.005 <= 0.00540671 , 0.00520335 , 100.00, 26
# target 50% 0.000647939
# target 75% 0.000706163
# target 90% 0.000798613
# target 99% 0.00198182
# target 99.9% 0.00509386
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.699 ms avg, 1999.7 qps
Successfully wrote 4017 bytes of Json data to /data/2018-11-19-063852_http_linkerd_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:39:02 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:39:02 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:12 W periodic.go:487> T002 warning only did 4896 out of 5000 calls before reaching 10s
06:39:12 I periodic.go:533> T002 ended after 10.000382895s : 4896 calls. qps=489.58125417856814
06:39:12 W periodic.go:487> T000 warning only did 4900 out of 5000 calls before reaching 10s
06:39:12 I periodic.go:533> T000 ended after 10.002645042s : 4900 calls. qps=489.870427214546
06:39:12 W periodic.go:487> T001 warning only did 4892 out of 5000 calls before reaching 10s
06:39:12 I periodic.go:533> T001 ended after 10.002684532s : 4892 calls. qps=489.0687079403336
06:39:12 W periodic.go:487> T003 warning only did 4892 out of 5000 calls before reaching 10s
06:39:12 I periodic.go:533> T003 ended after 10.002860478s : 4892 calls. qps=489.0601054327732
Ended after 10.002873205s : 19580 calls. qps=1957.4
Aggregated Sleep Time : count 19580 avg -0.10542204 +/- 0.07122 min -0.225251677 max 0.001046542 sum -2064.16347
# range, mid point, percentile, count
>= -0.225252 <= -0.001 , -0.113126 , 87.36, 17106
> -0.001 <= 0 , -0.0005 , 89.14, 348
> 0 <= 0.001 , 0.0005 , 99.99, 2124
> 0.001 <= 0.00104654 , 0.00102327 , 100.00, 2
# target 50% -0.096915
WARNING 87.36% of sleep were falling behind
Aggregated Function Time : count 19580 avg 0.0018930151 +/- 0.001018 min 0.000706099 max 0.018433471 sum 37.0652352
# range, mid point, percentile, count
>= 0.000706099 <= 0.0008 , 0.000753049 , 0.03, 6
> 0.0008 <= 0.0009 , 0.00085 , 0.15, 23
> 0.0009 <= 0.001 , 0.00095 , 0.47, 63
> 0.001 <= 0.0011 , 0.00105 , 1.29, 161
> 0.0011 <= 0.0012 , 0.00115 , 7.11, 1140
> 0.0012 <= 0.0014 , 0.0013 , 20.91, 2701
> 0.0014 <= 0.0016 , 0.0015 , 29.20, 1624
> 0.0016 <= 0.0018 , 0.0017 , 41.26, 2361
> 0.0018 <= 0.002 , 0.0019 , 77.96, 7185
> 0.002 <= 0.0025 , 0.00225 , 94.96, 3329
> 0.0025 <= 0.003 , 0.00275 , 95.96, 196
> 0.003 <= 0.0035 , 0.00325 , 96.75, 155
> 0.0035 <= 0.004 , 0.00375 , 97.57, 161
> 0.004 <= 0.0045 , 0.00425 , 98.57, 195
> 0.0045 <= 0.005 , 0.00475 , 98.93, 71
> 0.005 <= 0.006 , 0.0055 , 99.38, 87
> 0.006 <= 0.007 , 0.0065 , 99.54, 32
> 0.007 <= 0.008 , 0.0075 , 99.61, 13
> 0.008 <= 0.009 , 0.0085 , 99.61, 1
> 0.012 <= 0.014 , 0.013 , 99.80, 36
> 0.014 <= 0.016 , 0.015 , 99.88, 16
> 0.016 <= 0.018 , 0.017 , 99.96, 16
> 0.018 <= 0.0184335 , 0.0182167 , 100.00, 8
# target 50% 0.00184763
# target 75% 0.00198388
# target 90% 0.00235416
# target 99% 0.00515172
# target 99.9% 0.0165525
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19580 (100.0 %)
Response Header Sizes : count 19580 avg 209 +/- 0 min 209 max 209 sum 4092220
Response Body/Total Sizes : count 19580 avg 209 +/- 0 min 209 max 209 sum 4092220
All done 19580 calls (plus 4 warmup) 1.893 ms avg, 1957.4 qps
Successfully wrote 4623 bytes of Json data to /data/2018-11-19-063902_http_istio_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:39:12 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:22 I periodic.go:533> T001 ended after 10.000728056s : 5000 calls. qps=499.96359985013476
06:39:22 I periodic.go:533> T000 ended after 10.001269772s : 5000 calls. qps=499.9365194605811
06:39:22 I periodic.go:533> T003 ended after 10.004880206s : 5000 calls. qps=499.7561087239669
06:39:22 I periodic.go:533> T002 ended after 10.004963948s : 5000 calls. qps=499.7519257427713
Ended after 10.004979819s : 20000 calls. qps=1999
Sleep times : count 19996 avg 0.0010488357 +/- 0.0005567 min -0.005744673 max 0.001704867 sum 20.9725195
Aggregated Function Time : count 20000 avg 0.00067066544 +/- 0.0003535 min 0.000196477 max 0.00752295 sum 13.4133087
# range, mid point, percentile, count
>= 0.000196477 <= 0.0002 , 0.000198239 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.23, 45
> 0.0003 <= 0.0004 , 0.00035 , 1.41, 235
> 0.0004 <= 0.0005 , 0.00045 , 10.64, 1848
> 0.0005 <= 0.0006 , 0.00055 , 44.98, 6867
> 0.0006 <= 0.0007 , 0.00065 , 77.00, 6405
> 0.0007 <= 0.0008 , 0.00075 , 90.44, 2686
> 0.0008 <= 0.0009 , 0.00085 , 94.42, 796
> 0.0009 <= 0.001 , 0.00095 , 96.03, 324
> 0.001 <= 0.0011 , 0.00105 , 96.66, 125
> 0.0011 <= 0.0012 , 0.00115 , 97.05, 77
> 0.0012 <= 0.0014 , 0.0013 , 97.44, 79
> 0.0014 <= 0.0016 , 0.0015 , 97.82, 76
> 0.0016 <= 0.0018 , 0.0017 , 98.41, 118
> 0.0018 <= 0.002 , 0.0019 , 98.89, 97
> 0.002 <= 0.0025 , 0.00225 , 99.33, 88
> 0.0025 <= 0.003 , 0.00275 , 99.46, 25
> 0.003 <= 0.0035 , 0.00325 , 99.62, 33
> 0.0035 <= 0.004 , 0.00375 , 99.65, 5
> 0.004 <= 0.0045 , 0.00425 , 99.77, 24
> 0.0045 <= 0.005 , 0.00475 , 99.91, 28
> 0.005 <= 0.006 , 0.0055 , 99.97, 11
> 0.006 <= 0.007 , 0.0065 , 100.00, 6
> 0.007 <= 0.00752295 , 0.00726147 , 100.00, 1
# target 50% 0.000615675
# target 75% 0.000693739
# target 90% 0.000796761
# target 99% 0.00211932
# target 99.9% 0.00496429
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.671 ms avg, 1999.0 qps
Successfully wrote 3960 bytes of Json data to /data/2018-11-19-063912_grpc_baseline_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:39:22 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:32 I periodic.go:533> T003 ended after 10.001131668s : 5000 calls. qps=499.94342300263776
06:39:32 I periodic.go:533> T000 ended after 10.003063533s : 5000 calls. qps=499.8468702618006
06:39:32 I periodic.go:533> T002 ended after 10.003455818s : 5000 calls. qps=499.82726879276146
06:39:32 I periodic.go:533> T001 ended after 10.00353471s : 5000 calls. qps=499.82332694880006
Ended after 10.003619983s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.000466359 +/- 0.002576 min -0.041965874 max 0.001401688 sum 9.32531447
Aggregated Function Time : count 20000 avg 0.0010140607 +/- 0.0007207 min 0.00051231 max 0.043740932 sum 20.281214
# range, mid point, percentile, count
>= 0.00051231 <= 0.0006 , 0.000556155 , 0.10, 20
> 0.0006 <= 0.0007 , 0.00065 , 0.58, 96
> 0.0007 <= 0.0008 , 0.00075 , 10.73, 2031
> 0.0008 <= 0.0009 , 0.00085 , 36.26, 5104
> 0.0009 <= 0.001 , 0.00095 , 68.28, 6406
> 0.001 <= 0.0011 , 0.00105 , 85.50, 3443
> 0.0011 <= 0.0012 , 0.00115 , 91.86, 1273
> 0.0012 <= 0.0014 , 0.0013 , 95.68, 763
> 0.0014 <= 0.0016 , 0.0015 , 96.70, 204
> 0.0016 <= 0.0018 , 0.0017 , 97.44, 147
> 0.0018 <= 0.002 , 0.0019 , 98.03, 120
> 0.002 <= 0.0025 , 0.00225 , 99.06, 204
> 0.0025 <= 0.003 , 0.00275 , 99.25, 38
> 0.003 <= 0.0035 , 0.00325 , 99.32, 15
> 0.0035 <= 0.004 , 0.00375 , 99.38, 11
> 0.004 <= 0.0045 , 0.00425 , 99.53, 30
> 0.0045 <= 0.005 , 0.00475 , 99.70, 35
> 0.005 <= 0.006 , 0.0055 , 99.94, 48
> 0.006 <= 0.007 , 0.0065 , 99.96, 4
> 0.007 <= 0.008 , 0.0075 , 99.98, 4
> 0.04 <= 0.0437409 , 0.0418705 , 100.00, 4
# target 50% 0.000942913
# target 75% 0.00103901
# target 90% 0.0011707
# target 99% 0.00247304
# target 99.9% 0.00583333
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.014 ms avg, 1999.3 qps
Successfully wrote 3580 bytes of Json data to /data/2018-11-19-063922_grpc_linkerd_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:39:32 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:42 I periodic.go:533> T000 ended after 10.001185415s : 5000 calls. qps=499.94073627521084
06:39:42 W periodic.go:487> T001 warning only did 4996 out of 5000 calls before reaching 10s
06:39:42 I periodic.go:533> T001 ended after 10.004064578s : 4996 calls. qps=499.3970161874739
06:39:42 I periodic.go:533> T002 ended after 10.005814666s : 5000 calls. qps=499.7094356534627
06:39:42 I periodic.go:533> T003 ended after 10.020737531s : 5000 calls. qps=498.9652692261499
Ended after 10.021030347s : 19996 calls. qps=1995.4
Aggregated Sleep Time : count 19993 avg -0.0036028019 +/- 0.007461 min -0.054009936 max 0.001397489 sum -72.0308189
# range, mid point, percentile, count
>= -0.0540099 <= -0.001 , -0.027505 , 41.40, 8278
> -0.001 <= 0 , -0.0005 , 67.43, 5203
> 0 <= 0.001 , 0.0005 , 98.62, 6236
> 0.001 <= 0.00139749 , 0.00119874 , 100.00, 276
# target 50% -0.00066971
WARNING 41.40% of sleep were falling behind
Aggregated Function Time : count 19996 avg 0.0017271139 +/- 0.001166 min 0.000469725 max 0.019039428 sum 34.53537
# range, mid point, percentile, count
>= 0.000469725 <= 0.0005 , 0.000484863 , 0.04, 8
> 0.0005 <= 0.0006 , 0.00055 , 0.28, 47
> 0.0006 <= 0.0007 , 0.00065 , 1.44, 232
> 0.0007 <= 0.0008 , 0.00075 , 4.61, 634
> 0.0008 <= 0.0009 , 0.00085 , 10.47, 1173
> 0.0009 <= 0.001 , 0.00095 , 17.09, 1324
> 0.001 <= 0.0011 , 0.00105 , 21.85, 951
> 0.0011 <= 0.0012 , 0.00115 , 25.46, 722
> 0.0012 <= 0.0014 , 0.0013 , 31.59, 1226
> 0.0014 <= 0.0016 , 0.0015 , 45.43, 2767
> 0.0016 <= 0.0018 , 0.0017 , 64.18, 3749
> 0.0018 <= 0.002 , 0.0019 , 80.10, 3184
> 0.002 <= 0.0025 , 0.00225 , 92.23, 2426
> 0.0025 <= 0.003 , 0.00275 , 96.20, 793
> 0.003 <= 0.0035 , 0.00325 , 97.04, 168
> 0.0035 <= 0.004 , 0.00375 , 97.97, 186
> 0.004 <= 0.0045 , 0.00425 , 98.64, 134
> 0.0045 <= 0.005 , 0.00475 , 98.96, 64
> 0.005 <= 0.006 , 0.0055 , 99.43, 95
> 0.006 <= 0.007 , 0.0065 , 99.54, 21
> 0.007 <= 0.008 , 0.0075 , 99.60, 12
> 0.012 <= 0.014 , 0.013 , 99.62, 4
> 0.014 <= 0.016 , 0.015 , 99.77, 30
> 0.016 <= 0.018 , 0.017 , 99.96, 39
> 0.018 <= 0.0190394 , 0.0185197 , 100.00, 7
# target 50% 0.00164876
# target 75% 0.00193593
# target 90% 0.00240796
# target 99% 0.00508463
# target 99.9% 0.0173335
Ping SERVING : 19996
All done 19996 calls (plus 4 warmup) 1.727 ms avg, 1995.4 qps
Successfully wrote 4349 bytes of Json data to /data/2018-11-19-063932_grpc_istio_2000qps_10s_echo_1_3.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:39:42 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:39:42 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:39:52 I periodic.go:533> T001 ended after 10.000490183s : 5000 calls. qps=499.975492051338
06:39:52 I periodic.go:533> T002 ended after 10.000889097s : 5000 calls. qps=499.955549102116
06:39:52 I periodic.go:533> T000 ended after 10.002986078s : 5000 calls. qps=499.8507406700002
06:39:52 I periodic.go:533> T003 ended after 10.003038609s : 5000 calls. qps=499.84811570169956
Ended after 10.003052538s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014029043 +/- 0.0004673 min -0.003505725 max 0.001803745 sum 28.0524745
Aggregated Function Time : count 20000 avg 0.00035880778 +/- 0.0003117 min 8.847e-05 max 0.005258782 sum 7.17615554
# range, mid point, percentile, count
>= 8.847e-05 <= 0.0001 , 9.4235e-05 , 0.01, 3
> 0.0001 <= 0.0002 , 0.00015 , 3.54, 704
> 0.0002 <= 0.0003 , 0.00025 , 45.32, 8357
> 0.0003 <= 0.0004 , 0.00035 , 84.44, 7823
> 0.0004 <= 0.0005 , 0.00045 , 94.22, 1958
> 0.0005 <= 0.0006 , 0.00055 , 96.54, 463
> 0.0006 <= 0.0007 , 0.00065 , 97.08, 107
> 0.0007 <= 0.0008 , 0.00075 , 97.30, 44
> 0.0008 <= 0.0009 , 0.00085 , 97.50, 42
> 0.0009 <= 0.001 , 0.00095 , 97.80, 58
> 0.001 <= 0.0011 , 0.00105 , 98.03, 47
> 0.0011 <= 0.0012 , 0.00115 , 98.31, 56
> 0.0012 <= 0.0014 , 0.0013 , 98.66, 69
> 0.0014 <= 0.0016 , 0.0015 , 98.84, 38
> 0.0016 <= 0.0018 , 0.0017 , 98.92, 15
> 0.0018 <= 0.002 , 0.0019 , 99.27, 70
> 0.002 <= 0.0025 , 0.00225 , 99.47, 39
> 0.0025 <= 0.003 , 0.00275 , 99.56, 20
> 0.003 <= 0.0035 , 0.00325 , 99.73, 33
> 0.0035 <= 0.004 , 0.00375 , 99.81, 17
> 0.004 <= 0.0045 , 0.00425 , 99.89, 14
> 0.0045 <= 0.005 , 0.00475 , 99.97, 17
> 0.005 <= 0.00525878 , 0.00512939 , 100.00, 6
# target 50% 0.000311965
# target 75% 0.000375879
# target 90% 0.000456844
# target 99% 0.00184571
# target 99.9% 0.00458824
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.359 ms avg, 1999.4 qps
Successfully wrote 4394 bytes of Json data to /data/2018-11-19-063942_http_baseline_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:39:52 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:39:52 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:02 I periodic.go:533> T003 ended after 10.000725142s : 5000 calls. qps=499.96374552896395
06:40:02 I periodic.go:533> T001 ended after 10.001257283s : 5000 calls. qps=499.93714375280916
06:40:02 I periodic.go:533> T000 ended after 10.001367598s : 5000 calls. qps=499.9316294503427
06:40:02 I periodic.go:533> T002 ended after 10.001432487s : 5000 calls. qps=499.92838590862544
Ended after 10.001457382s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010755102 +/- 0.0005077 min -0.005229887 max 0.001505371 sum 21.5059016
Aggregated Function Time : count 20000 avg 0.0006855368 +/- 0.0003412 min 0.000294478 max 0.007092848 sum 13.710736
# range, mid point, percentile, count
>= 0.000294478 <= 0.0003 , 0.000297239 , 0.01, 1
> 0.0003 <= 0.0004 , 0.00035 , 0.03, 4
> 0.0004 <= 0.0005 , 0.00045 , 0.56, 106
> 0.0005 <= 0.0006 , 0.00055 , 34.98, 6885
> 0.0006 <= 0.0007 , 0.00065 , 78.42, 8689
> 0.0007 <= 0.0008 , 0.00075 , 91.88, 2691
> 0.0008 <= 0.0009 , 0.00085 , 95.40, 704
> 0.0009 <= 0.001 , 0.00095 , 96.72, 265
> 0.001 <= 0.0011 , 0.00105 , 97.23, 101
> 0.0011 <= 0.0012 , 0.00115 , 97.53, 61
> 0.0012 <= 0.0014 , 0.0013 , 97.79, 51
> 0.0014 <= 0.0016 , 0.0015 , 98.47, 135
> 0.0016 <= 0.0018 , 0.0017 , 98.93, 93
> 0.0018 <= 0.002 , 0.0019 , 99.08, 29
> 0.002 <= 0.0025 , 0.00225 , 99.23, 32
> 0.0025 <= 0.003 , 0.00275 , 99.42, 37
> 0.003 <= 0.0035 , 0.00325 , 99.52, 20
> 0.0035 <= 0.004 , 0.00375 , 99.64, 24
> 0.004 <= 0.0045 , 0.00425 , 99.83, 37
> 0.0045 <= 0.005 , 0.00475 , 99.89, 13
> 0.005 <= 0.006 , 0.0055 , 99.97, 16
> 0.006 <= 0.007 , 0.0065 , 99.97, 1
> 0.007 <= 0.00709285 , 0.00704642 , 100.00, 5
# target 50% 0.000634572
# target 75% 0.000692116
# target 90% 0.000786027
# target 99% 0.00189655
# target 99.9% 0.005125
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.686 ms avg, 1999.7 qps
Successfully wrote 4373 bytes of Json data to /data/2018-11-19-063952_http_linkerd_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:40:02 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:40:02 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:12 W periodic.go:487> T003 warning only did 4932 out of 5000 calls before reaching 10s
06:40:12 I periodic.go:533> T003 ended after 10.00214255s : 4932 calls. qps=493.09435206959733
06:40:12 W periodic.go:487> T002 warning only did 4933 out of 5000 calls before reaching 10s
06:40:12 I periodic.go:533> T002 ended after 10.004303789s : 4933 calls. qps=493.08778542130693
06:40:12 W periodic.go:487> T001 warning only did 4928 out of 5000 calls before reaching 10s
06:40:12 I periodic.go:533> T001 ended after 10.004323706s : 4928 calls. qps=492.58701985467326
06:40:12 W periodic.go:487> T000 warning only did 4927 out of 5000 calls before reaching 10s
06:40:12 I periodic.go:533> T000 ended after 10.004357229s : 4927 calls. qps=492.48541282771504
Ended after 10.004367909s : 19720 calls. qps=1971.1
Aggregated Sleep Time : count 19720 avg -0.092594533 +/- 0.05589 min -0.17981624 max 0.001051962 sum -1825.96419
# range, mid point, percentile, count
>= -0.179816 <= -0.001 , -0.0904081 , 87.62, 17279
> -0.001 <= 0 , -0.0005 , 90.91, 648
> 0 <= 0.001 , 0.0005 , 99.99, 1792
> 0.001 <= 0.00105196 , 0.00102598 , 100.00, 1
# target 50% -0.0777819
WARNING 87.62% of sleep were falling behind
Aggregated Function Time : count 19720 avg 0.0019000221 +/- 0.001003 min 0.000569811 max 0.021973535 sum 37.4684362
# range, mid point, percentile, count
>= 0.000569811 <= 0.0006 , 0.000584906 , 0.01, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.02, 3
> 0.0008 <= 0.0009 , 0.00085 , 0.08, 12
> 0.0009 <= 0.001 , 0.00095 , 0.31, 46
> 0.001 <= 0.0011 , 0.00105 , 0.85, 105
> 0.0011 <= 0.0012 , 0.00115 , 6.00, 1017
> 0.0012 <= 0.0014 , 0.0013 , 20.49, 2856
> 0.0014 <= 0.0016 , 0.0015 , 28.17, 1516
> 0.0016 <= 0.0018 , 0.0017 , 36.94, 1728
> 0.0018 <= 0.002 , 0.0019 , 79.95, 8483
> 0.002 <= 0.0025 , 0.00225 , 94.95, 2957
> 0.0025 <= 0.003 , 0.00275 , 95.96, 200
> 0.003 <= 0.0035 , 0.00325 , 96.71, 147
> 0.0035 <= 0.004 , 0.00375 , 97.54, 164
> 0.004 <= 0.0045 , 0.00425 , 98.64, 216
> 0.0045 <= 0.005 , 0.00475 , 98.98, 67
> 0.005 <= 0.006 , 0.0055 , 99.38, 79
> 0.006 <= 0.007 , 0.0065 , 99.56, 37
> 0.007 <= 0.008 , 0.0075 , 99.57, 2
> 0.012 <= 0.014 , 0.013 , 99.84, 52
> 0.014 <= 0.016 , 0.015 , 99.96, 24
> 0.016 <= 0.018 , 0.017 , 99.98, 4
> 0.02 <= 0.0219735 , 0.0209868 , 100.00, 4
# target 50% 0.00186073
# target 75% 0.00197697
# target 90% 0.00233497
# target 99% 0.00506076
# target 99.9% 0.0150233
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19720 (100.0 %)
Response Header Sizes : count 19720 avg 209.0002 +/- 0.01424 min 209 max 210 sum 4121484
Response Body/Total Sizes : count 19720 avg 209.0002 +/- 0.01424 min 209 max 210 sum 4121484
All done 19720 calls (plus 4 warmup) 1.900 ms avg, 1971.1 qps
Successfully wrote 4681 bytes of Json data to /data/2018-11-19-064002_http_istio_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:40:12 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:22 I periodic.go:533> T000 ended after 10.000750339s : 5000 calls. qps=499.9624858648319
06:40:22 I periodic.go:533> T003 ended after 10.001186611s : 5000 calls. qps=499.94067648939307
06:40:22 I periodic.go:533> T002 ended after 10.003234252s : 5000 calls. qps=499.83833968501966
06:40:22 I periodic.go:533> T001 ended after 10.00528397s : 5000 calls. qps=499.73594102796864
Ended after 10.00533699s : 20000 calls. qps=1998.9
Sleep times : count 19996 avg 0.0010709324 +/- 0.0005368 min -0.005684797 max 0.001672545 sum 21.4143644
Aggregated Function Time : count 20000 avg 0.00064881618 +/- 0.0003498 min 0.000182165 max 0.005497824 sum 12.9763236
# range, mid point, percentile, count
>= 0.000182165 <= 0.0002 , 0.000191083 , 0.02, 4
> 0.0002 <= 0.0003 , 0.00025 , 0.34, 65
> 0.0003 <= 0.0004 , 0.00035 , 1.74, 279
> 0.0004 <= 0.0005 , 0.00045 , 14.30, 2512
> 0.0005 <= 0.0006 , 0.00055 , 55.06, 8152
> 0.0006 <= 0.0007 , 0.00065 , 82.20, 5429
> 0.0007 <= 0.0008 , 0.00075 , 91.94, 1946
> 0.0008 <= 0.0009 , 0.00085 , 95.01, 615
> 0.0009 <= 0.001 , 0.00095 , 96.08, 214
> 0.001 <= 0.0011 , 0.00105 , 96.62, 109
> 0.0011 <= 0.0012 , 0.00115 , 96.91, 57
> 0.0012 <= 0.0014 , 0.0013 , 97.38, 93
> 0.0014 <= 0.0016 , 0.0015 , 97.89, 102
> 0.0016 <= 0.0018 , 0.0017 , 98.52, 126
> 0.0018 <= 0.002 , 0.0019 , 98.97, 92
> 0.002 <= 0.0025 , 0.00225 , 99.27, 59
> 0.0025 <= 0.003 , 0.00275 , 99.41, 27
> 0.003 <= 0.0035 , 0.00325 , 99.53, 25
> 0.0035 <= 0.004 , 0.00375 , 99.64, 22
> 0.004 <= 0.0045 , 0.00425 , 99.81, 35
> 0.0045 <= 0.005 , 0.00475 , 99.95, 27
> 0.005 <= 0.00549782 , 0.00524891 , 100.00, 10
# target 50% 0.000587586
# target 75% 0.000673457
# target 90% 0.000780113
# target 99% 0.00204237
# target 99.9% 0.00481481
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.649 ms avg, 1998.9 qps
Successfully wrote 3743 bytes of Json data to /data/2018-11-19-064012_grpc_baseline_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:40:22 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:32 I periodic.go:533> T002 ended after 10.001063619s : 5000 calls. qps=499.94682470582535
06:40:32 I periodic.go:533> T003 ended after 10.001883065s : 5000 calls. qps=499.90586447633103
06:40:32 I periodic.go:533> T000 ended after 10.002044261s : 5000 calls. qps=499.8978078407446
06:40:32 I periodic.go:533> T001 ended after 10.00212154s : 5000 calls. qps=499.89394549988646
Ended after 10.002157792s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00050258361 +/- 0.002365 min -0.040503046 max 0.001300174 sum 10.0496619
Aggregated Function Time : count 20000 avg 0.0010064158 +/- 0.0007057 min 0.000475188 max 0.042284414 sum 20.1283158
# range, mid point, percentile, count
>= 0.000475188 <= 0.0005 , 0.000487594 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.10, 17
> 0.0006 <= 0.0007 , 0.00065 , 0.96, 174
> 0.0007 <= 0.0008 , 0.00075 , 12.66, 2339
> 0.0008 <= 0.0009 , 0.00085 , 38.59, 5187
> 0.0009 <= 0.001 , 0.00095 , 69.00, 6081
> 0.001 <= 0.0011 , 0.00105 , 86.53, 3506
> 0.0011 <= 0.0012 , 0.00115 , 92.92, 1277
> 0.0012 <= 0.0014 , 0.0013 , 96.01, 619
> 0.0014 <= 0.0016 , 0.0015 , 96.84, 167
> 0.0016 <= 0.0018 , 0.0017 , 97.45, 122
> 0.0018 <= 0.002 , 0.0019 , 98.12, 133
> 0.002 <= 0.0025 , 0.00225 , 98.89, 154
> 0.0025 <= 0.003 , 0.00275 , 99.10, 42
> 0.003 <= 0.0035 , 0.00325 , 99.23, 27
> 0.0035 <= 0.004 , 0.00375 , 99.38, 28
> 0.004 <= 0.0045 , 0.00425 , 99.53, 32
> 0.0045 <= 0.005 , 0.00475 , 99.70, 34
> 0.005 <= 0.006 , 0.0055 , 99.98, 55
> 0.04 <= 0.0422844 , 0.0411422 , 100.00, 4
# target 50% 0.00093751
# target 75% 0.00103423
# target 90% 0.00115435
# target 99% 0.0027619
# target 99.9% 0.00570909
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.006 ms avg, 1999.6 qps
Successfully wrote 3482 bytes of Json data to /data/2018-11-19-064022_grpc_linkerd_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:40:32 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:42 W periodic.go:487> T000 warning only did 4998 out of 5000 calls before reaching 10s
06:40:42 I periodic.go:533> T000 ended after 10.001425685s : 4998 calls. qps=499.72875442107534
06:40:42 W periodic.go:487> T001 warning only did 4998 out of 5000 calls before reaching 10s
06:40:42 I periodic.go:533> T001 ended after 10.005504914s : 4998 calls. qps=499.5250157747312
06:40:42 I periodic.go:533> T003 ended after 10.007133125s : 5000 calls. qps=499.6435979760188
06:40:42 I periodic.go:533> T002 ended after 10.007250625s : 5000 calls. qps=499.63773141736425
Ended after 10.007286719s : 19996 calls. qps=1998.1
Aggregated Sleep Time : count 19994 avg -0.0024703773 +/- 0.004724 min -0.025543109 max 0.001386291 sum -49.3927245
# range, mid point, percentile, count
>= -0.0255431 <= -0.001 , -0.0132716 , 37.06, 7410
> -0.001 <= 0 , -0.0005 , 64.86, 5558
> 0 <= 0.001 , 0.0005 , 97.95, 6616
> 0.001 <= 0.00138629 , 0.00119315 , 100.00, 410
# target 50% -0.000534545
WARNING 37.06% of sleep were falling behind
Aggregated Function Time : count 19996 avg 0.0017143569 +/- 0.001135 min 0.00045288 max 0.020509153 sum 34.2802814
# range, mid point, percentile, count
>= 0.00045288 <= 0.0005 , 0.00047644 , 0.03, 5
> 0.0005 <= 0.0006 , 0.00055 , 0.34, 63
> 0.0006 <= 0.0007 , 0.00065 , 1.74, 279
> 0.0007 <= 0.0008 , 0.00075 , 5.08, 669
> 0.0008 <= 0.0009 , 0.00085 , 11.06, 1195
> 0.0009 <= 0.001 , 0.00095 , 17.75, 1338
> 0.001 <= 0.0011 , 0.00105 , 21.93, 836
> 0.0011 <= 0.0012 , 0.00115 , 25.28, 669
> 0.0012 <= 0.0014 , 0.0013 , 32.24, 1392
> 0.0014 <= 0.0016 , 0.0015 , 47.88, 3128
> 0.0016 <= 0.0018 , 0.0017 , 66.16, 3656
> 0.0018 <= 0.002 , 0.0019 , 79.25, 2617
> 0.002 <= 0.0025 , 0.00225 , 92.23, 2595
> 0.0025 <= 0.003 , 0.00275 , 96.21, 797
> 0.003 <= 0.0035 , 0.00325 , 97.14, 186
> 0.0035 <= 0.004 , 0.00375 , 98.08, 188
> 0.004 <= 0.0045 , 0.00425 , 98.66, 115
> 0.0045 <= 0.005 , 0.00475 , 99.07, 82
> 0.005 <= 0.006 , 0.0055 , 99.37, 61
> 0.006 <= 0.007 , 0.0065 , 99.58, 41
> 0.007 <= 0.008 , 0.0075 , 99.62, 8
> 0.01 <= 0.012 , 0.011 , 99.62, 1
> 0.012 <= 0.014 , 0.013 , 99.64, 3
> 0.014 <= 0.016 , 0.015 , 99.81, 35
> 0.016 <= 0.018 , 0.017 , 99.96, 30
> 0.018 <= 0.02 , 0.019 , 99.98, 4
> 0.02 <= 0.0205092 , 0.0202546 , 100.00, 3
# target 50% 0.00162319
# target 75% 0.00193504
# target 90% 0.00241414
# target 99% 0.00491488
# target 99.9% 0.0171336
Ping SERVING : 19996
All done 19996 calls (plus 4 warmup) 1.714 ms avg, 1998.1 qps
Successfully wrote 4580 bytes of Json data to /data/2018-11-19-064032_grpc_istio_2000qps_10s_echo_0_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:40:43 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:40:43 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:40:53 I periodic.go:533> T001 ended after 10.000481419s : 5000 calls. qps=499.9759302087655
06:40:53 I periodic.go:533> T002 ended after 10.000970861s : 5000 calls. qps=499.95146166239783
06:40:53 I periodic.go:533> T003 ended after 10.003067021s : 5000 calls. qps=499.84669596866837
06:40:53 I periodic.go:533> T000 ended after 10.003099006s : 5000 calls. qps=499.8450977043144
Ended after 10.003136324s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014141606 +/- 0.0004129 min -0.003604148 max 0.001836235 sum 28.2775561
Aggregated Function Time : count 20000 avg 0.00035956471 +/- 0.0002892 min 0.000110313 max 0.004819428 sum 7.19129419
# range, mid point, percentile, count
>= 0.000110313 <= 0.0002 , 0.000155156 , 3.08, 617
> 0.0002 <= 0.0003 , 0.00025 , 41.67, 7718
> 0.0003 <= 0.0004 , 0.00035 , 81.39, 7944
> 0.0004 <= 0.0005 , 0.00045 , 93.92, 2504
> 0.0005 <= 0.0006 , 0.00055 , 96.94, 605
> 0.0006 <= 0.0007 , 0.00065 , 97.70, 152
> 0.0007 <= 0.0008 , 0.00075 , 97.97, 53
> 0.0008 <= 0.0009 , 0.00085 , 98.23, 53
> 0.0009 <= 0.001 , 0.00095 , 98.61, 77
> 0.001 <= 0.0011 , 0.00105 , 98.72, 21
> 0.0011 <= 0.0012 , 0.00115 , 98.80, 16
> 0.0012 <= 0.0014 , 0.0013 , 99.03, 45
> 0.0014 <= 0.0016 , 0.0015 , 99.16, 27
> 0.0016 <= 0.0018 , 0.0017 , 99.23, 14
> 0.0018 <= 0.002 , 0.0019 , 99.38, 29
> 0.002 <= 0.0025 , 0.00225 , 99.48, 21
> 0.0025 <= 0.003 , 0.00275 , 99.56, 16
> 0.003 <= 0.0035 , 0.00325 , 99.68, 24
> 0.0035 <= 0.004 , 0.00375 , 99.81, 25
> 0.004 <= 0.0045 , 0.00425 , 99.95, 29
> 0.0045 <= 0.00481943 , 0.00465971 , 100.00, 10
# target 50% 0.000320959
# target 75% 0.0003839
# target 90% 0.00046873
# target 99% 0.00137778
# target 99.9% 0.00432759
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.360 ms avg, 1999.4 qps
Successfully wrote 4169 bytes of Json data to /data/2018-11-19-064043_http_baseline_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:40:53 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:40:53 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:03 I periodic.go:533> T001 ended after 10.000926104s : 5000 calls. qps=499.953699087946
06:41:03 I periodic.go:533> T002 ended after 10.00138414s : 5000 calls. qps=499.93080257789194
06:41:03 I periodic.go:533> T000 ended after 10.003457925s : 5000 calls. qps=499.8271635155601
06:41:03 I periodic.go:533> T003 ended after 10.003490181s : 5000 calls. qps=499.8255518355669
Ended after 10.003516297s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010828918 +/- 0.0004676 min -0.003663553 max 0.00163044 sum 21.6535044
Aggregated Function Time : count 20000 avg 0.00068569058 +/- 0.0003211 min 0.000284649 max 0.005224756 sum 13.7138116
# range, mid point, percentile, count
>= 0.000284649 <= 0.0003 , 0.000292325 , 0.01, 1
> 0.0003 <= 0.0004 , 0.00035 , 0.04, 7
> 0.0004 <= 0.0005 , 0.00045 , 0.70, 133
> 0.0005 <= 0.0006 , 0.00055 , 32.37, 6333
> 0.0006 <= 0.0007 , 0.00065 , 76.78, 8881
> 0.0007 <= 0.0008 , 0.00075 , 92.01, 3047
> 0.0008 <= 0.0009 , 0.00085 , 95.61, 720
> 0.0009 <= 0.001 , 0.00095 , 96.92, 262
> 0.001 <= 0.0011 , 0.00105 , 97.38, 92
> 0.0011 <= 0.0012 , 0.00115 , 97.69, 61
> 0.0012 <= 0.0014 , 0.0013 , 98.20, 103
> 0.0014 <= 0.0016 , 0.0015 , 98.63, 86
> 0.0016 <= 0.0018 , 0.0017 , 99.00, 74
> 0.0018 <= 0.002 , 0.0019 , 99.16, 32
> 0.002 <= 0.0025 , 0.00225 , 99.33, 33
> 0.0025 <= 0.003 , 0.00275 , 99.47, 28
> 0.003 <= 0.0035 , 0.00325 , 99.52, 10
> 0.0035 <= 0.004 , 0.00375 , 99.59, 16
> 0.004 <= 0.0045 , 0.00425 , 99.75, 32
> 0.0045 <= 0.005 , 0.00475 , 99.96, 41
> 0.005 <= 0.00522476 , 0.00511238 , 100.00, 8
# target 50% 0.000639703
# target 75% 0.000696003
# target 90% 0.000786807
# target 99% 0.0018
# target 99.9% 0.00485366
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.686 ms avg, 1999.3 qps
Successfully wrote 4161 bytes of Json data to /data/2018-11-19-064053_http_linkerd_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:41:03 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:41:03 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:13 W periodic.go:487> T001 warning only did 4858 out of 5000 calls before reaching 10s
06:41:13 I periodic.go:533> T001 ended after 10.000677384s : 4858 calls. qps=485.76709491421786
06:41:13 W periodic.go:487> T003 warning only did 4858 out of 5000 calls before reaching 10s
06:41:13 I periodic.go:533> T003 ended after 10.002460943s : 4858 calls. qps=485.68047680303744
06:41:13 W periodic.go:487> T000 warning only did 4859 out of 5000 calls before reaching 10s
06:41:13 I periodic.go:533> T000 ended after 10.002480273s : 4859 calls. qps=485.7795134188914
06:41:13 W periodic.go:487> T002 warning only did 4854 out of 5000 calls before reaching 10s
06:41:13 I periodic.go:533> T002 ended after 10.004681274s : 4854 calls. qps=485.1728772824073
Ended after 10.004709856s : 19429 calls. qps=1942
Aggregated Sleep Time : count 19429 avg -0.098778185 +/- 0.07627 min -0.290213111 max 0.001306556 sum -1919.16136
# range, mid point, percentile, count
>= -0.290213 <= -0.001 , -0.145607 , 88.75, 17243
> -0.001 <= 0 , -0.0005 , 90.68, 375
> 0 <= 0.001 , 0.0005 , 99.99, 1809
> 0.001 <= 0.00130656 , 0.00115328 , 100.00, 2
# target 50% -0.127281
WARNING 88.75% of sleep were falling behind
Aggregated Function Time : count 19429 avg 0.0019311929 +/- 0.001026 min 0.000635322 max 0.023496515 sum 37.521147
# range, mid point, percentile, count
>= 0.000635322 <= 0.0007 , 0.000667661 , 0.01, 2
> 0.0007 <= 0.0008 , 0.00075 , 0.03, 3
> 0.0008 <= 0.0009 , 0.00085 , 0.08, 11
> 0.0009 <= 0.001 , 0.00095 , 0.28, 38
> 0.001 <= 0.0011 , 0.00105 , 0.81, 103
> 0.0011 <= 0.0012 , 0.00115 , 4.50, 718
> 0.0012 <= 0.0014 , 0.0013 , 18.18, 2658
> 0.0014 <= 0.0016 , 0.0015 , 26.77, 1669
> 0.0016 <= 0.0018 , 0.0017 , 35.85, 1763
> 0.0018 <= 0.002 , 0.0019 , 77.26, 8045
> 0.002 <= 0.0025 , 0.00225 , 94.23, 3298
> 0.0025 <= 0.003 , 0.00275 , 95.59, 264
> 0.003 <= 0.0035 , 0.00325 , 96.28, 135
> 0.0035 <= 0.004 , 0.00375 , 97.16, 170
> 0.004 <= 0.0045 , 0.00425 , 98.44, 248
> 0.0045 <= 0.005 , 0.00475 , 99.03, 115
> 0.005 <= 0.006 , 0.0055 , 99.38, 69
> 0.006 <= 0.007 , 0.0065 , 99.55, 32
> 0.007 <= 0.008 , 0.0075 , 99.59, 8
> 0.008 <= 0.009 , 0.0085 , 99.61, 4
> 0.012 <= 0.014 , 0.013 , 99.77, 32
> 0.014 <= 0.016 , 0.015 , 99.94, 33
> 0.016 <= 0.018 , 0.017 , 99.98, 7
> 0.02 <= 0.0234965 , 0.0217483 , 100.00, 4
# target 50% 0.00186835
# target 75% 0.00198911
# target 90% 0.00237539
# target 99% 0.004977
# target 99.9% 0.0154892
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19429 (100.0 %)
Response Header Sizes : count 19429 avg 209 +/- 0 min 209 max 209 sum 4060661
Response Body/Total Sizes : count 19429 avg 209 +/- 0 min 209 max 209 sum 4060661
All done 19429 calls (plus 4 warmup) 1.931 ms avg, 1942.0 qps
Successfully wrote 4738 bytes of Json data to /data/2018-11-19-064103_http_istio_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:41:13 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:23 I periodic.go:533> T001 ended after 10.000753629s : 5000 calls. qps=499.96232138956935
06:41:23 I periodic.go:533> T003 ended after 10.001206691s : 5000 calls. qps=499.93967272963744
06:41:23 I periodic.go:533> T002 ended after 10.003343076s : 5000 calls. qps=499.8329020621106
06:41:23 I periodic.go:533> T000 ended after 10.003407201s : 5000 calls. qps=499.82969797532286
Ended after 10.003421198s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010867778 +/- 0.0005667 min -0.006478814 max 0.001722505 sum 21.7312085
Aggregated Function Time : count 20000 avg 0.0006325245 +/- 0.0003371 min 0.000208403 max 0.005621777 sum 12.6504899
# range, mid point, percentile, count
>= 0.000208403 <= 0.0003 , 0.000254202 , 0.21, 43
> 0.0003 <= 0.0004 , 0.00035 , 1.95, 347
> 0.0004 <= 0.0005 , 0.00045 , 17.51, 3112
> 0.0005 <= 0.0006 , 0.00055 , 60.31, 8560
> 0.0006 <= 0.0007 , 0.00065 , 84.89, 4916
> 0.0007 <= 0.0008 , 0.00075 , 93.33, 1688
> 0.0008 <= 0.0009 , 0.00085 , 95.80, 494
> 0.0009 <= 0.001 , 0.00095 , 96.64, 167
> 0.001 <= 0.0011 , 0.00105 , 97.03, 80
> 0.0011 <= 0.0012 , 0.00115 , 97.27, 47
> 0.0012 <= 0.0014 , 0.0013 , 97.58, 63
> 0.0014 <= 0.0016 , 0.0015 , 97.95, 73
> 0.0016 <= 0.0018 , 0.0017 , 98.51, 112
> 0.0018 <= 0.002 , 0.0019 , 99.07, 112
> 0.002 <= 0.0025 , 0.00225 , 99.34, 54
> 0.0025 <= 0.003 , 0.00275 , 99.41, 14
> 0.003 <= 0.0035 , 0.00325 , 99.55, 27
> 0.0035 <= 0.004 , 0.00375 , 99.67, 24
> 0.004 <= 0.0045 , 0.00425 , 99.86, 40
> 0.0045 <= 0.005 , 0.00475 , 99.95, 18
> 0.005 <= 0.00562178 , 0.00531089 , 100.00, 9
# target 50% 0.000575911
# target 75% 0.000659764
# target 90% 0.000760545
# target 99% 0.001975
# target 99.9% 0.00469444
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.633 ms avg, 1999.3 qps
Successfully wrote 3626 bytes of Json data to /data/2018-11-19-064113_grpc_baseline_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:41:23 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:33 I periodic.go:533> T001 ended after 10.001097821s : 5000 calls. qps=499.94511497539327
06:41:33 I periodic.go:533> T003 ended after 10.001823587s : 5000 calls. qps=499.9088372743161
06:41:33 I periodic.go:533> T000 ended after 10.002059674s : 5000 calls. qps=499.897037506917
06:41:33 I periodic.go:533> T002 ended after 10.002128218s : 5000 calls. qps=499.89361174174064
Ended after 10.002156936s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00049875829 +/- 0.002597 min -0.04357099 max 0.001401433 sum 9.97317079
Aggregated Function Time : count 20000 avg 0.00099478181 +/- 0.0007332 min 0.000440709 max 0.045400147 sum 19.8956362
# range, mid point, percentile, count
>= 0.000440709 <= 0.0005 , 0.000470355 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.09, 16
> 0.0006 <= 0.0007 , 0.00065 , 1.12, 206
> 0.0007 <= 0.0008 , 0.00075 , 13.89, 2554
> 0.0008 <= 0.0009 , 0.00085 , 41.76, 5574
> 0.0009 <= 0.001 , 0.00095 , 71.11, 5871
> 0.001 <= 0.0011 , 0.00105 , 86.88, 3152
> 0.0011 <= 0.0012 , 0.00115 , 92.67, 1158
> 0.0012 <= 0.0014 , 0.0013 , 96.26, 719
> 0.0014 <= 0.0016 , 0.0015 , 96.95, 138
> 0.0016 <= 0.0018 , 0.0017 , 97.75, 159
> 0.0018 <= 0.002 , 0.0019 , 98.40, 131
> 0.002 <= 0.0025 , 0.00225 , 99.12, 144
> 0.0025 <= 0.003 , 0.00275 , 99.27, 30
> 0.003 <= 0.0035 , 0.00325 , 99.34, 15
> 0.0035 <= 0.004 , 0.00375 , 99.48, 28
> 0.004 <= 0.0045 , 0.00425 , 99.58, 18
> 0.0045 <= 0.005 , 0.00475 , 99.73, 32
> 0.005 <= 0.006 , 0.0055 , 99.92, 38
> 0.006 <= 0.007 , 0.0065 , 99.97, 8
> 0.007 <= 0.008 , 0.0075 , 99.98, 3
> 0.045 <= 0.0454001 , 0.0452001 , 100.00, 4
# target 50% 0.00092807
# target 75% 0.00102465
# target 90% 0.00115397
# target 99% 0.00241667
# target 99.9% 0.00586842
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.995 ms avg, 1999.6 qps
Successfully wrote 3716 bytes of Json data to /data/2018-11-19-064123_grpc_linkerd_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:41:33 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:43 W periodic.go:487> T000 warning only did 4994 out of 5000 calls before reaching 10s
06:41:43 I periodic.go:533> T000 ended after 10.0014828s : 4994 calls. qps=499.3259599466591
06:41:43 W periodic.go:487> T002 warning only did 4995 out of 5000 calls before reaching 10s
06:41:43 I periodic.go:533> T002 ended after 10.003605647s : 4995 calls. qps=499.3199628473919
06:41:43 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:41:43 I periodic.go:533> T003 ended after 10.003652793s : 4998 calls. qps=499.6175000693069
06:41:43 W periodic.go:487> T001 warning only did 4979 out of 5000 calls before reaching 10s
06:41:43 I periodic.go:533> T001 ended after 10.003666051s : 4979 calls. qps=497.7175342135979
Ended after 10.003677486s : 19966 calls. qps=1995.9
Aggregated Sleep Time : count 19966 avg -0.0041442318 +/- 0.008267 min -0.047280205 max 0.001362319 sum -82.7437313
# range, mid point, percentile, count
>= -0.0472802 <= -0.001 , -0.0241401 , 42.26, 8437
> -0.001 <= 0 , -0.0005 , 69.17, 5373
> 0 <= 0.001 , 0.0005 , 98.28, 5813
> 0.001 <= 0.00136232 , 0.00118116 , 100.00, 343
# target 50% -0.000712265
WARNING 42.26% of sleep were falling behind
Aggregated Function Time : count 19966 avg 0.0017426579 +/- 0.001169 min 0.000506794 max 0.020123662 sum 34.793908
# range, mid point, percentile, count
>= 0.000506794 <= 0.0006 , 0.000553397 , 0.26, 52
> 0.0006 <= 0.0007 , 0.00065 , 1.58, 263
> 0.0007 <= 0.0008 , 0.00075 , 4.90, 663
> 0.0008 <= 0.0009 , 0.00085 , 10.80, 1179
> 0.0009 <= 0.001 , 0.00095 , 17.34, 1305
> 0.001 <= 0.0011 , 0.00105 , 21.85, 900
> 0.0011 <= 0.0012 , 0.00115 , 25.35, 700
> 0.0012 <= 0.0014 , 0.0013 , 31.77, 1282
> 0.0014 <= 0.0016 , 0.0015 , 44.32, 2504
> 0.0016 <= 0.0018 , 0.0017 , 64.15, 3960
> 0.0018 <= 0.002 , 0.0019 , 78.72, 2909
> 0.002 <= 0.0025 , 0.00225 , 91.59, 2570
> 0.0025 <= 0.003 , 0.00275 , 95.60, 800
> 0.003 <= 0.0035 , 0.00325 , 96.74, 229
> 0.0035 <= 0.004 , 0.00375 , 97.72, 195
> 0.004 <= 0.0045 , 0.00425 , 98.52, 159
> 0.0045 <= 0.005 , 0.00475 , 99.01, 99
> 0.005 <= 0.006 , 0.0055 , 99.43, 83
> 0.006 <= 0.007 , 0.0065 , 99.58, 31
> 0.007 <= 0.008 , 0.0075 , 99.61, 6
> 0.008 <= 0.009 , 0.0085 , 99.62, 1
> 0.014 <= 0.016 , 0.015 , 99.78, 32
> 0.016 <= 0.018 , 0.017 , 99.94, 33
> 0.018 <= 0.02 , 0.019 , 99.98, 8
> 0.02 <= 0.0201237 , 0.0200618 , 100.00, 3
# target 50% 0.00165732
# target 75% 0.00194895
# target 90% 0.00243821
# target 99% 0.00498657
# target 99.9% 0.0174566
Ping SERVING : 19966
All done 19966 calls (plus 4 warmup) 1.743 ms avg, 1995.9 qps
Successfully wrote 4354 bytes of Json data to /data/2018-11-19-064133_grpc_istio_2000qps_10s_echo_1_4.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:41:43 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:41:43 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:41:53 I periodic.go:533> T003 ended after 10.000511056s : 5000 calls. qps=499.9744485058244
06:41:53 I periodic.go:533> T002 ended after 10.000939143s : 5000 calls. qps=499.9530472595338
06:41:53 I periodic.go:533> T000 ended after 10.00305656s : 5000 calls. qps=499.84721869852154
06:41:53 I periodic.go:533> T001 ended after 10.003085282s : 5000 calls. qps=499.84578348014526
Ended after 10.003124142s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014143063 +/- 0.0004173 min -0.003255823 max 0.001737335 sum 28.2804696
Aggregated Function Time : count 20000 avg 0.0003576629 +/- 0.0002815 min 9.9128e-05 max 0.004918668 sum 7.15325806
# range, mid point, percentile, count
>= 9.9128e-05 <= 0.0001 , 9.9564e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.80, 559
> 0.0002 <= 0.0003 , 0.00025 , 41.28, 7696
> 0.0003 <= 0.0004 , 0.00035 , 83.15, 8374
> 0.0004 <= 0.0005 , 0.00045 , 94.15, 2200
> 0.0005 <= 0.0006 , 0.00055 , 96.86, 542
> 0.0006 <= 0.0007 , 0.00065 , 97.69, 165
> 0.0007 <= 0.0008 , 0.00075 , 98.00, 62
> 0.0008 <= 0.0009 , 0.00085 , 98.23, 47
> 0.0009 <= 0.001 , 0.00095 , 98.59, 73
> 0.001 <= 0.0011 , 0.00105 , 98.71, 23
> 0.0011 <= 0.0012 , 0.00115 , 98.81, 19
> 0.0012 <= 0.0014 , 0.0013 , 98.96, 31
> 0.0014 <= 0.0016 , 0.0015 , 99.03, 15
> 0.0016 <= 0.0018 , 0.0017 , 99.11, 15
> 0.0018 <= 0.002 , 0.0019 , 99.30, 38
> 0.002 <= 0.0025 , 0.00225 , 99.55, 49
> 0.0025 <= 0.003 , 0.00275 , 99.61, 14
> 0.003 <= 0.0035 , 0.00325 , 99.75, 27
> 0.0035 <= 0.004 , 0.00375 , 99.89, 28
> 0.004 <= 0.0045 , 0.00425 , 99.94, 11
> 0.0045 <= 0.00491867 , 0.00470933 , 100.00, 11
# target 50% 0.000320826
# target 75% 0.000380535
# target 90% 0.000462273
# target 99% 0.00150667
# target 99.9% 0.00409091
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.358 ms avg, 1999.4 qps
Successfully wrote 4282 bytes of Json data to /data/2018-11-19-064143_http_baseline_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:41:53 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:41:53 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:03 I periodic.go:533> T002 ended after 10.00079192s : 5000 calls. qps=499.9604071354382
06:42:03 I periodic.go:533> T001 ended after 10.001260273s : 5000 calls. qps=499.9369942904395
06:42:03 I periodic.go:533> T003 ended after 10.001546752s : 5000 calls. qps=499.9226743603588
06:42:03 I periodic.go:533> T000 ended after 10.001634313s : 5000 calls. qps=499.91829770271266
Ended after 10.001699494s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010748159 +/- 0.0004947 min -0.004792358 max 0.001526855 sum 21.4920191
Aggregated Function Time : count 20000 avg 0.00068550916 +/- 0.0003347 min 0.000339338 max 0.00622599 sum 13.7101832
# range, mid point, percentile, count
>= 0.000339338 <= 0.0004 , 0.000369669 , 0.01, 3
> 0.0004 <= 0.0005 , 0.00045 , 0.91, 179
> 0.0005 <= 0.0006 , 0.00055 , 33.52, 6523
> 0.0006 <= 0.0007 , 0.00065 , 78.23, 8942
> 0.0007 <= 0.0008 , 0.00075 , 91.97, 2746
> 0.0008 <= 0.0009 , 0.00085 , 95.50, 706
> 0.0009 <= 0.001 , 0.00095 , 96.83, 267
> 0.001 <= 0.0011 , 0.00105 , 97.26, 86
> 0.0011 <= 0.0012 , 0.00115 , 97.41, 29
> 0.0012 <= 0.0014 , 0.0013 , 97.93, 105
> 0.0014 <= 0.0016 , 0.0015 , 98.67, 149
> 0.0016 <= 0.0018 , 0.0017 , 99.02, 69
> 0.0018 <= 0.002 , 0.0019 , 99.17, 31
> 0.002 <= 0.0025 , 0.00225 , 99.28, 21
> 0.0025 <= 0.003 , 0.00275 , 99.37, 18
> 0.003 <= 0.0035 , 0.00325 , 99.44, 14
> 0.0035 <= 0.004 , 0.00375 , 99.61, 33
> 0.004 <= 0.0045 , 0.00425 , 99.80, 39
> 0.0045 <= 0.005 , 0.00475 , 99.92, 24
> 0.005 <= 0.006 , 0.0055 , 99.98, 13
> 0.006 <= 0.00622599 , 0.00611299 , 100.00, 3
# target 50% 0.000636849
# target 75% 0.000692764
# target 90% 0.000785688
# target 99% 0.00178841
# target 99.9% 0.00491667
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.686 ms avg, 1999.7 qps
Successfully wrote 4130 bytes of Json data to /data/2018-11-19-064153_http_linkerd_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:42:03 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:42:03 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:13 W periodic.go:487> T001 warning only did 4910 out of 5000 calls before reaching 10s
06:42:13 I periodic.go:533> T001 ended after 10.0021385s : 4910 calls. qps=490.89502209952406
06:42:13 W periodic.go:487> T003 warning only did 4912 out of 5000 calls before reaching 10s
06:42:13 I periodic.go:533> T003 ended after 10.005159718s : 4912 calls. qps=490.9466853550533
06:42:13 W periodic.go:487> T002 warning only did 4910 out of 5000 calls before reaching 10s
06:42:13 I periodic.go:533> T002 ended after 10.005240637s : 4910 calls. qps=490.7428195022632
06:42:13 W periodic.go:487> T000 warning only did 4912 out of 5000 calls before reaching 10s
06:42:13 I periodic.go:533> T000 ended after 10.005254757s : 4912 calls. qps=490.9420218973841
Ended after 10.005268079s : 19644 calls. qps=1963.4
Aggregated Sleep Time : count 19644 avg -0.046197681 +/- 0.03763 min -0.179553736 max 0.00121017 sum -907.507249
# range, mid point, percentile, count
>= -0.179554 <= -0.001 , -0.0902769 , 91.14, 17904
> -0.001 <= 0 , -0.0005 , 91.79, 128
> 0 <= 0.001 , 0.0005 , 99.99, 1611
> 0.001 <= 0.00121017 , 0.00110509 , 100.00, 1
# target 50% -0.081605
WARNING 91.14% of sleep were falling behind
Aggregated Function Time : count 19644 avg 0.0019053592 +/- 0.0009934 min 0.000555375 max 0.015124569 sum 37.4288756
# range, mid point, percentile, count
>= 0.000555375 <= 0.0006 , 0.000577688 , 0.01, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.07, 12
> 0.0008 <= 0.0009 , 0.00085 , 0.15, 16
> 0.0009 <= 0.001 , 0.00095 , 0.43, 56
> 0.001 <= 0.0011 , 0.00105 , 1.23, 157
> 0.0011 <= 0.0012 , 0.00115 , 6.55, 1045
> 0.0012 <= 0.0014 , 0.0013 , 20.14, 2669
> 0.0014 <= 0.0016 , 0.0015 , 28.57, 1657
> 0.0016 <= 0.0018 , 0.0017 , 39.06, 2060
> 0.0018 <= 0.002 , 0.0019 , 78.67, 7780
> 0.002 <= 0.0025 , 0.00225 , 94.38, 3087
> 0.0025 <= 0.003 , 0.00275 , 95.65, 250
> 0.003 <= 0.0035 , 0.00325 , 96.52, 170
> 0.0035 <= 0.004 , 0.00375 , 97.38, 169
> 0.004 <= 0.0045 , 0.00425 , 98.36, 192
> 0.0045 <= 0.005 , 0.00475 , 98.82, 92
> 0.005 <= 0.006 , 0.0055 , 99.26, 86
> 0.006 <= 0.007 , 0.0065 , 99.53, 53
> 0.007 <= 0.008 , 0.0075 , 99.59, 12
> 0.012 <= 0.014 , 0.013 , 99.82, 44
> 0.014 <= 0.0151246 , 0.0145623 , 100.00, 36
# target 50% 0.00185524
# target 75% 0.00198149
# target 90% 0.00236064
# target 99% 0.00540186
# target 99.9% 0.0145109
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19644 (100.0 %)
Response Header Sizes : count 19644 avg 209.00015 +/- 0.01236 min 209 max 210 sum 4105599
Response Body/Total Sizes : count 19644 avg 209.00015 +/- 0.01236 min 209 max 210 sum 4105599
All done 19644 calls (plus 4 warmup) 1.905 ms avg, 1963.4 qps
Successfully wrote 4436 bytes of Json data to /data/2018-11-19-064203_http_istio_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:42:14 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:24 I periodic.go:533> T003 ended after 10.000519587s : 5000 calls. qps=499.97402199978313
06:42:24 I periodic.go:533> T001 ended after 10.003115747s : 5000 calls. qps=499.84426117427785
06:42:24 I periodic.go:533> T000 ended after 10.003209784s : 5000 calls. qps=499.8395622970372
06:42:24 I periodic.go:533> T002 ended after 10.003263806s : 5000 calls. qps=499.83686294476996
Ended after 10.003279547s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.000946252 +/- 0.0007719 min -0.014363397 max 0.001672951 sum 18.921255
Aggregated Function Time : count 20000 avg 0.00070981067 +/- 0.0003691 min 0.000190405 max 0.005890499 sum 14.1962133
# range, mid point, percentile, count
>= 0.000190405 <= 0.0002 , 0.000195203 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.23, 46
> 0.0003 <= 0.0004 , 0.00035 , 1.29, 212
> 0.0004 <= 0.0005 , 0.00045 , 9.65, 1672
> 0.0005 <= 0.0006 , 0.00055 , 39.02, 5873
> 0.0006 <= 0.0007 , 0.00065 , 66.45, 5486
> 0.0007 <= 0.0008 , 0.00075 , 81.26, 2962
> 0.0008 <= 0.0009 , 0.00085 , 89.84, 1717
> 0.0009 <= 0.001 , 0.00095 , 93.98, 828
> 0.001 <= 0.0011 , 0.00105 , 95.60, 323
> 0.0011 <= 0.0012 , 0.00115 , 96.33, 145
> 0.0012 <= 0.0014 , 0.0013 , 97.08, 151
> 0.0014 <= 0.0016 , 0.0015 , 97.45, 75
> 0.0016 <= 0.0018 , 0.0017 , 98.06, 120
> 0.0018 <= 0.002 , 0.0019 , 98.69, 128
> 0.002 <= 0.0025 , 0.00225 , 99.16, 93
> 0.0025 <= 0.003 , 0.00275 , 99.34, 37
> 0.003 <= 0.0035 , 0.00325 , 99.50, 31
> 0.0035 <= 0.004 , 0.00375 , 99.59, 18
> 0.004 <= 0.0045 , 0.00425 , 99.86, 54
> 0.0045 <= 0.005 , 0.00475 , 99.98, 25
> 0.005 <= 0.0058905 , 0.00544525 , 100.00, 3
# target 50% 0.000640029
# target 75% 0.000757731
# target 90% 0.000903744
# target 99% 0.00232796
# target 99.9% 0.00466
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.710 ms avg, 1999.3 qps
Successfully wrote 3745 bytes of Json data to /data/2018-11-19-064214_grpc_baseline_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:42:24 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:34 I periodic.go:533> T003 ended after 10.001100537s : 5000 calls. qps=499.9449792052421
06:42:34 I periodic.go:533> T002 ended after 10.001859071s : 5000 calls. qps=499.9070637275129
06:42:34 I periodic.go:533> T001 ended after 10.00204338s : 5000 calls. qps=499.897851872744
06:42:34 I periodic.go:533> T000 ended after 10.002072096s : 5000 calls. qps=499.89641666346176
Ended after 10.002146059s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00042540718 +/- 0.00296 min -0.047720819 max 0.001279741 sum 8.50644203
Aggregated Function Time : count 20000 avg 0.0010074616 +/- 0.0006115 min 0.000418853 max 0.034628729 sum 20.1492326
# range, mid point, percentile, count
>= 0.000418853 <= 0.0005 , 0.000459427 , 0.02, 4
> 0.0005 <= 0.0006 , 0.00055 , 0.09, 14
> 0.0006 <= 0.0007 , 0.00065 , 0.72, 126
> 0.0007 <= 0.0008 , 0.00075 , 11.11, 2078
> 0.0008 <= 0.0009 , 0.00085 , 36.49, 5077
> 0.0009 <= 0.001 , 0.00095 , 67.62, 6225
> 0.001 <= 0.0011 , 0.00105 , 85.73, 3623
> 0.0011 <= 0.0012 , 0.00115 , 92.50, 1353
> 0.0012 <= 0.0014 , 0.0013 , 96.20, 740
> 0.0014 <= 0.0016 , 0.0015 , 97.03, 165
> 0.0016 <= 0.0018 , 0.0017 , 97.61, 118
> 0.0018 <= 0.002 , 0.0019 , 98.25, 126
> 0.002 <= 0.0025 , 0.00225 , 99.16, 183
> 0.0025 <= 0.003 , 0.00275 , 99.25, 17
> 0.003 <= 0.0035 , 0.00325 , 99.31, 12
> 0.0035 <= 0.004 , 0.00375 , 99.38, 14
> 0.004 <= 0.0045 , 0.00425 , 99.50, 24
> 0.0045 <= 0.005 , 0.00475 , 99.71, 43
> 0.005 <= 0.006 , 0.0055 , 99.94, 46
> 0.006 <= 0.007 , 0.0065 , 99.98, 8
> 0.03 <= 0.0346287 , 0.0323144 , 100.00, 4
# target 50% 0.00094339
# target 75% 0.00104074
# target 90% 0.00116305
# target 99% 0.00241257
# target 99.9% 0.00582609
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.007 ms avg, 1999.6 qps
Successfully wrote 3604 bytes of Json data to /data/2018-11-19-064224_grpc_linkerd_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:42:34 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:44 W periodic.go:487> T000 warning only did 4997 out of 5000 calls before reaching 10s
06:42:44 I periodic.go:533> T000 ended after 10.000465452s : 4997 calls. qps=499.6767424460875
06:42:44 W periodic.go:487> T003 warning only did 4997 out of 5000 calls before reaching 10s
06:42:44 I periodic.go:533> T003 ended after 10.00466296s : 4997 calls. qps=499.4671004889105
06:42:44 W periodic.go:487> T002 warning only did 4975 out of 5000 calls before reaching 10s
06:42:44 I periodic.go:533> T002 ended after 10.004697957s : 4975 calls. qps=497.2663863899195
06:42:44 W periodic.go:487> T001 warning only did 4982 out of 5000 calls before reaching 10s
06:42:44 I periodic.go:533> T001 ended after 10.004710596s : 4982 calls. qps=497.96542860438774
Ended after 10.00472327s : 19951 calls. qps=1994.2
Aggregated Sleep Time : count 19951 avg -0.0071673641 +/- 0.01705 min -0.104297312 max 0.001428277 sum -142.996082
# range, mid point, percentile, count
>= -0.104297 <= -0.001 , -0.0526487 , 43.58, 8694
> -0.001 <= 0 , -0.0005 , 69.81, 5234
> 0 <= 0.001 , 0.0005 , 98.14, 5652
> 0.001 <= 0.00142828 , 0.00121414 , 100.00, 371
# target 50% -0.000755159
WARNING 43.58% of sleep were falling behind
Aggregated Function Time : count 19951 avg 0.0017465421 +/- 0.001254 min 0.000435935 max 0.037936827 sum 34.8452609
# range, mid point, percentile, count
>= 0.000435935 <= 0.0005 , 0.000467967 , 0.03, 6
> 0.0005 <= 0.0006 , 0.00055 , 0.47, 87
> 0.0006 <= 0.0007 , 0.00065 , 1.88, 283
> 0.0007 <= 0.0008 , 0.00075 , 5.45, 711
> 0.0008 <= 0.0009 , 0.00085 , 11.76, 1260
> 0.0009 <= 0.001 , 0.00095 , 17.92, 1229
> 0.001 <= 0.0011 , 0.00105 , 21.81, 776
> 0.0011 <= 0.0012 , 0.00115 , 25.14, 663
> 0.0012 <= 0.0014 , 0.0013 , 32.52, 1473
> 0.0014 <= 0.0016 , 0.0015 , 46.06, 2701
> 0.0016 <= 0.0018 , 0.0017 , 63.77, 3534
> 0.0018 <= 0.002 , 0.0019 , 78.10, 2858
> 0.002 <= 0.0025 , 0.00225 , 90.89, 2552
> 0.0025 <= 0.003 , 0.00275 , 95.35, 891
> 0.003 <= 0.0035 , 0.00325 , 96.57, 243
> 0.0035 <= 0.004 , 0.00375 , 97.74, 234
> 0.004 <= 0.0045 , 0.00425 , 98.38, 127
> 0.0045 <= 0.005 , 0.00475 , 98.92, 107
> 0.005 <= 0.006 , 0.0055 , 99.44, 104
> 0.006 <= 0.007 , 0.0065 , 99.58, 28
> 0.007 <= 0.008 , 0.0075 , 99.62, 8
> 0.012 <= 0.014 , 0.013 , 99.65, 6
> 0.014 <= 0.016 , 0.015 , 99.77, 24
> 0.016 <= 0.018 , 0.017 , 99.94, 34
> 0.018 <= 0.02 , 0.019 , 99.96, 5
> 0.02 <= 0.025 , 0.0225 , 99.98, 3
> 0.035 <= 0.0379368 , 0.0364684 , 100.00, 4
# target 50% 0.00164451
# target 75% 0.00195677
# target 90% 0.0024653
# target 99% 0.00515856
# target 99.9% 0.0175323
Ping SERVING : 19951
All done 19951 calls (plus 4 warmup) 1.747 ms avg, 1994.2 qps
Successfully wrote 4586 bytes of Json data to /data/2018-11-19-064234_grpc_istio_2000qps_10s_echo_0_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:42:44 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:42:44 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:42:54 I periodic.go:533> T001 ended after 10.000470707s : 5000 calls. qps=499.97646575777327
06:42:54 I periodic.go:533> T002 ended after 10.000821802s : 5000 calls. qps=499.9589132765151
06:42:54 I periodic.go:533> T003 ended after 10.002707951s : 5000 calls. qps=499.8646391050671
06:42:54 I periodic.go:533> T000 ended after 10.004196808s : 5000 calls. qps=499.7902476290429
Ended after 10.004227665s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.0014238516 +/- 0.0003924 min -0.003411338 max 0.00176581 sum 28.4713363
Aggregated Function Time : count 20000 avg 0.00035019782 +/- 0.0002747 min 9.1961e-05 max 0.005130362 sum 7.00395634
# range, mid point, percentile, count
>= 9.1961e-05 <= 0.0001 , 9.59805e-05 , 0.01, 2
> 0.0001 <= 0.0002 , 0.00015 , 3.48, 694
> 0.0002 <= 0.0003 , 0.00025 , 44.91, 8286
> 0.0003 <= 0.0004 , 0.00035 , 84.15, 7848
> 0.0004 <= 0.0005 , 0.00045 , 94.80, 2129
> 0.0005 <= 0.0006 , 0.00055 , 97.25, 490
> 0.0006 <= 0.0007 , 0.00065 , 97.88, 126
> 0.0007 <= 0.0008 , 0.00075 , 98.09, 44
> 0.0008 <= 0.0009 , 0.00085 , 98.30, 41
> 0.0009 <= 0.001 , 0.00095 , 98.58, 55
> 0.001 <= 0.0011 , 0.00105 , 98.72, 30
> 0.0011 <= 0.0012 , 0.00115 , 98.81, 16
> 0.0012 <= 0.0014 , 0.0013 , 98.92, 23
> 0.0014 <= 0.0016 , 0.0015 , 99.02, 20
> 0.0016 <= 0.0018 , 0.0017 , 99.07, 10
> 0.0018 <= 0.002 , 0.0019 , 99.39, 65
> 0.002 <= 0.0025 , 0.00225 , 99.55, 30
> 0.0025 <= 0.003 , 0.00275 , 99.65, 21
> 0.003 <= 0.0035 , 0.00325 , 99.76, 22
> 0.0035 <= 0.004 , 0.00375 , 99.90, 28
> 0.004 <= 0.0045 , 0.00425 , 99.94, 8
> 0.0045 <= 0.005 , 0.00475 , 99.96, 4
> 0.005 <= 0.00513036 , 0.00506518 , 100.00, 8
# target 50% 0.000312971
# target 75% 0.000376682
# target 90% 0.000454955
# target 99% 0.00156
# target 99.9% 0.004
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.350 ms avg, 1999.2 qps
Successfully wrote 4374 bytes of Json data to /data/2018-11-19-064244_http_baseline_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:42:54 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:42:54 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:04 I periodic.go:533> T003 ended after 10.000743323s : 5000 calls. qps=499.96283661244007
06:43:04 I periodic.go:533> T002 ended after 10.001274949s : 5000 calls. qps=499.9362606764386
06:43:04 I periodic.go:533> T001 ended after 10.001382197s : 5000 calls. qps=499.9308997010226
06:43:04 I periodic.go:533> T000 ended after 10.001444349s : 5000 calls. qps=499.92779297921385
Ended after 10.001468329s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010687335 +/- 0.0005059 min -0.006872672 max 0.001510918 sum 21.3703945
Aggregated Function Time : count 20000 avg 0.00069117255 +/- 0.0003302 min 0.000366895 max 0.006800569 sum 13.8234511
# range, mid point, percentile, count
>= 0.000366895 <= 0.0004 , 0.000383448 , 0.03, 5
> 0.0004 <= 0.0005 , 0.00045 , 0.58, 111
> 0.0005 <= 0.0006 , 0.00055 , 28.92, 5668
> 0.0006 <= 0.0007 , 0.00065 , 75.06, 9228
> 0.0007 <= 0.0008 , 0.00075 , 91.53, 3293
> 0.0008 <= 0.0009 , 0.00085 , 95.69, 833
> 0.0009 <= 0.001 , 0.00095 , 97.09, 280
> 0.001 <= 0.0011 , 0.00105 , 97.64, 111
> 0.0011 <= 0.0012 , 0.00115 , 98.00, 71
> 0.0012 <= 0.0014 , 0.0013 , 98.25, 51
> 0.0014 <= 0.0016 , 0.0015 , 98.69, 86
> 0.0016 <= 0.0018 , 0.0017 , 98.92, 47
> 0.0018 <= 0.002 , 0.0019 , 99.17, 50
> 0.002 <= 0.0025 , 0.00225 , 99.31, 29
> 0.0025 <= 0.003 , 0.00275 , 99.41, 19
> 0.003 <= 0.0035 , 0.00325 , 99.50, 17
> 0.0035 <= 0.004 , 0.00375 , 99.64, 30
> 0.004 <= 0.0045 , 0.00425 , 99.78, 27
> 0.0045 <= 0.005 , 0.00475 , 99.94, 31
> 0.005 <= 0.006 , 0.0055 , 99.96, 5
> 0.006 <= 0.00680057 , 0.00640028 , 100.00, 8
# target 50% 0.000645687
# target 75% 0.00069987
# target 90% 0.000790738
# target 99% 0.001864
# target 99.9% 0.0048871
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.691 ms avg, 1999.7 qps
Successfully wrote 4129 bytes of Json data to /data/2018-11-19-064254_http_linkerd_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:43:04 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:43:04 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:14 W periodic.go:487> T002 warning only did 4907 out of 5000 calls before reaching 10s
06:43:14 I periodic.go:533> T002 ended after 10.001416817s : 4907 calls. qps=490.6304866385812
06:43:14 W periodic.go:487> T000 warning only did 4912 out of 5000 calls before reaching 10s
06:43:14 I periodic.go:533> T000 ended after 10.004471886s : 4912 calls. qps=490.9804391447915
06:43:14 W periodic.go:487> T001 warning only did 4904 out of 5000 calls before reaching 10s
06:43:14 I periodic.go:533> T001 ended after 10.004490192s : 4904 calls. qps=490.17989981352963
06:43:14 W periodic.go:487> T003 warning only did 4910 out of 5000 calls before reaching 10s
06:43:14 I periodic.go:533> T003 ended after 10.004524329s : 4910 calls. qps=490.7779559061533
Ended after 10.0045356s : 19633 calls. qps=1962.4
Aggregated Sleep Time : count 19633 avg -0.070261572 +/- 0.05071 min -0.199242194 max 0.001338484 sum -1379.44544
# range, mid point, percentile, count
>= -0.199242 <= -0.001 , -0.100121 , 94.67, 18587
> -0.001 <= 0 , -0.0005 , 95.01, 66
> 0 <= 0.001 , 0.0005 , 99.99, 978
> 0.001 <= 0.00133848 , 0.00116924 , 100.00, 2
# target 50% -0.094548
WARNING 94.67% of sleep were falling behind
Aggregated Function Time : count 19633 avg 0.0019330717 +/- 0.0009588 min 0.000570465 max 0.015072366 sum 37.9519972
# range, mid point, percentile, count
>= 0.000570465 <= 0.0006 , 0.000585233 , 0.01, 1
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 3
> 0.0007 <= 0.0008 , 0.00075 , 0.03, 1
> 0.0008 <= 0.0009 , 0.00085 , 0.09, 12
> 0.0009 <= 0.001 , 0.00095 , 0.44, 70
> 0.001 <= 0.0011 , 0.00105 , 1.07, 123
> 0.0011 <= 0.0012 , 0.00115 , 4.25, 625
> 0.0012 <= 0.0014 , 0.0013 , 16.79, 2461
> 0.0014 <= 0.0016 , 0.0015 , 25.63, 1736
> 0.0016 <= 0.0018 , 0.0017 , 37.59, 2349
> 0.0018 <= 0.002 , 0.0019 , 76.49, 7637
> 0.002 <= 0.0025 , 0.00225 , 94.06, 3448
> 0.0025 <= 0.003 , 0.00275 , 95.57, 297
> 0.003 <= 0.0035 , 0.00325 , 96.38, 159
> 0.0035 <= 0.004 , 0.00375 , 97.05, 131
> 0.004 <= 0.0045 , 0.00425 , 98.28, 243
> 0.0045 <= 0.005 , 0.00475 , 98.87, 116
> 0.005 <= 0.006 , 0.0055 , 99.36, 96
> 0.006 <= 0.007 , 0.0065 , 99.56, 38
> 0.007 <= 0.008 , 0.0075 , 99.61, 10
> 0.008 <= 0.009 , 0.0085 , 99.61, 1
> 0.01 <= 0.012 , 0.011 , 99.62, 1
> 0.012 <= 0.014 , 0.013 , 99.90, 55
> 0.014 <= 0.0150724 , 0.0145362 , 100.00, 20
# target 50% 0.00186378
# target 75% 0.00199232
# target 90% 0.00238453
# target 99% 0.00525698
# target 99.9% 0.0140197
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19633 (100.0 %)
Response Header Sizes : count 19633 avg 209 +/- 0 min 209 max 209 sum 4103297
Response Body/Total Sizes : count 19633 avg 209 +/- 0 min 209 max 209 sum 4103297
All done 19633 calls (plus 4 warmup) 1.933 ms avg, 1962.4 qps
Successfully wrote 4757 bytes of Json data to /data/2018-11-19-064304_http_istio_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:43:14 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:24 W periodic.go:487> T001 warning only did 4998 out of 5000 calls before reaching 10s
06:43:24 I periodic.go:533> T001 ended after 10.00051566s : 4998 calls. qps=499.7742286421259
06:43:24 W periodic.go:487> T000 warning only did 4998 out of 5000 calls before reaching 10s
06:43:24 I periodic.go:533> T000 ended after 10.003063925s : 4998 calls. qps=499.6469119335354
06:43:24 W periodic.go:487> T002 warning only did 4998 out of 5000 calls before reaching 10s
06:43:24 I periodic.go:533> T002 ended after 10.00308327s : 4998 calls. qps=499.64594566451115
06:43:24 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:43:24 I periodic.go:533> T003 ended after 10.003096209s : 4998 calls. qps=499.64529937272744
Ended after 10.003145803s : 19992 calls. qps=1998.6
Sleep times : count 19992 avg 0.0010973846 +/- 0.0005018 min -0.004197238 max 0.00171252 sum 21.9389135
Aggregated Function Time : count 19992 avg 0.00063789824 +/- 0.0003225 min 0.000199165 max 0.005408284 sum 12.7528616
# range, mid point, percentile, count
>= 0.000199165 <= 0.0002 , 0.000199583 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.25, 48
> 0.0003 <= 0.0004 , 0.00035 , 1.79, 308
> 0.0004 <= 0.0005 , 0.00045 , 15.62, 2766
> 0.0005 <= 0.0006 , 0.00055 , 56.27, 8127
> 0.0006 <= 0.0007 , 0.00065 , 83.02, 5348
> 0.0007 <= 0.0008 , 0.00075 , 92.75, 1945
> 0.0008 <= 0.0009 , 0.00085 , 95.69, 587
> 0.0009 <= 0.001 , 0.00095 , 96.66, 194
> 0.001 <= 0.0011 , 0.00105 , 97.00, 68
> 0.0011 <= 0.0012 , 0.00115 , 97.22, 44
> 0.0012 <= 0.0014 , 0.0013 , 97.67, 90
> 0.0014 <= 0.0016 , 0.0015 , 98.07, 81
> 0.0016 <= 0.0018 , 0.0017 , 98.79, 143
> 0.0018 <= 0.002 , 0.0019 , 99.23, 88
> 0.002 <= 0.0025 , 0.00225 , 99.46, 46
> 0.0025 <= 0.003 , 0.00275 , 99.54, 16
> 0.003 <= 0.0035 , 0.00325 , 99.64, 20
> 0.0035 <= 0.004 , 0.00375 , 99.72, 16
> 0.004 <= 0.0045 , 0.00425 , 99.81, 18
> 0.0045 <= 0.005 , 0.00475 , 99.92, 23
> 0.005 <= 0.00540828 , 0.00520414 , 100.00, 15
# target 50% 0.00058457
# target 75% 0.000670007
# target 90% 0.000771712
# target 99% 0.00189564
# target 99.9% 0.00489148
Ping SERVING : 19992
All done 19992 calls (plus 4 warmup) 0.638 ms avg, 1998.6 qps
Successfully wrote 3989 bytes of Json data to /data/2018-11-19-064314_grpc_baseline_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:43:24 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:34 I periodic.go:533> T000 ended after 10.001389818s : 5000 calls. qps=499.93051875662826
06:43:34 I periodic.go:533> T001 ended after 10.002083846s : 5000 calls. qps=499.89582940754724
06:43:34 I periodic.go:533> T003 ended after 10.00220263s : 5000 calls. qps=499.88989275255267
06:43:34 I periodic.go:533> T002 ended after 10.00228808s : 5000 calls. qps=499.88562217056244
Ended after 10.00230993s : 20000 calls. qps=1999.5
Sleep times : count 19996 avg 0.00042475289 +/- 0.003145 min -0.050455862 max 0.001323491 sum 8.49335871
Aggregated Function Time : count 20000 avg 0.0010062278 +/- 0.0008483 min 0.000406368 max 0.052328019 sum 20.124556
# range, mid point, percentile, count
>= 0.000406368 <= 0.0005 , 0.000453184 , 0.01, 1
> 0.0005 <= 0.0006 , 0.00055 , 0.05, 9
> 0.0006 <= 0.0007 , 0.00065 , 0.84, 158
> 0.0007 <= 0.0008 , 0.00075 , 12.08, 2248
> 0.0008 <= 0.0009 , 0.00085 , 40.16, 5616
> 0.0009 <= 0.001 , 0.00095 , 71.62, 6293
> 0.001 <= 0.0011 , 0.00105 , 87.64, 3202
> 0.0011 <= 0.0012 , 0.00115 , 92.80, 1032
> 0.0012 <= 0.0014 , 0.0013 , 95.88, 617
> 0.0014 <= 0.0016 , 0.0015 , 96.87, 198
> 0.0016 <= 0.0018 , 0.0017 , 97.55, 136
> 0.0018 <= 0.002 , 0.0019 , 98.30, 150
> 0.002 <= 0.0025 , 0.00225 , 98.97, 135
> 0.0025 <= 0.003 , 0.00275 , 99.11, 28
> 0.003 <= 0.0035 , 0.00325 , 99.23, 24
> 0.0035 <= 0.004 , 0.00375 , 99.29, 11
> 0.004 <= 0.0045 , 0.00425 , 99.34, 11
> 0.0045 <= 0.005 , 0.00475 , 99.63, 57
> 0.005 <= 0.006 , 0.0055 , 99.92, 59
> 0.006 <= 0.007 , 0.0065 , 99.96, 7
> 0.012 <= 0.014 , 0.013 , 99.98, 4
> 0.05 <= 0.052328 , 0.051164 , 100.00, 4
# target 50% 0.000931273
# target 75% 0.00102108
# target 90% 0.00114583
# target 99% 0.00258929
# target 99.9% 0.00591525
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.006 ms avg, 1999.5 qps
Successfully wrote 3699 bytes of Json data to /data/2018-11-19-064324_grpc_linkerd_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:43:34 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:44 W periodic.go:487> T000 warning only did 4998 out of 5000 calls before reaching 10s
06:43:44 I periodic.go:533> T000 ended after 10.001008445s : 4998 calls. qps=499.74960300116015
06:43:44 W periodic.go:487> T002 warning only did 4998 out of 5000 calls before reaching 10s
06:43:44 I periodic.go:533> T002 ended after 10.003347858s : 4998 calls. qps=499.6327300567618
06:43:44 I periodic.go:533> T003 ended after 10.005694132s : 5000 calls. qps=499.71545542343785
06:43:44 I periodic.go:533> T001 ended after 10.006558989s : 5000 calls. qps=499.67226551069103
Ended after 10.006624646s : 19996 calls. qps=1998.3
Aggregated Sleep Time : count 19994 avg -0.0064737169 +/- 0.01362 min -0.097522059 max 0.00137328 sum -129.435496
# range, mid point, percentile, count
>= -0.0975221 <= -0.001 , -0.049261 , 45.76, 9149
> -0.001 <= 0 , -0.0005 , 70.54, 4954
> 0 <= 0.001 , 0.0005 , 98.34, 5559
> 0.001 <= 0.00137328 , 0.00118664 , 100.00, 332
# target 50% -0.000828825
WARNING 45.76% of sleep were falling behind
Aggregated Function Time : count 19996 avg 0.001745083 +/- 0.001195 min 0.000466557 max 0.019545438 sum 34.8946805
# range, mid point, percentile, count
>= 0.000466557 <= 0.0005 , 0.000483279 , 0.03, 6
> 0.0005 <= 0.0006 , 0.00055 , 0.36, 65
> 0.0006 <= 0.0007 , 0.00065 , 1.76, 281
> 0.0007 <= 0.0008 , 0.00075 , 5.33, 714
> 0.0008 <= 0.0009 , 0.00085 , 11.62, 1257
> 0.0009 <= 0.001 , 0.00095 , 17.94, 1265
> 0.001 <= 0.0011 , 0.00105 , 22.34, 879
> 0.0011 <= 0.0012 , 0.00115 , 25.77, 686
> 0.0012 <= 0.0014 , 0.0013 , 32.76, 1398
> 0.0014 <= 0.0016 , 0.0015 , 45.42, 2532
> 0.0016 <= 0.0018 , 0.0017 , 65.11, 3936
> 0.0018 <= 0.002 , 0.0019 , 78.47, 2672
> 0.002 <= 0.0025 , 0.00225 , 90.78, 2462
> 0.0025 <= 0.003 , 0.00275 , 95.29, 902
> 0.003 <= 0.0035 , 0.00325 , 96.41, 224
> 0.0035 <= 0.004 , 0.00375 , 97.72, 261
> 0.004 <= 0.0045 , 0.00425 , 98.43, 143
> 0.0045 <= 0.005 , 0.00475 , 98.84, 82
> 0.005 <= 0.006 , 0.0055 , 99.35, 102
> 0.006 <= 0.007 , 0.0065 , 99.56, 41
> 0.007 <= 0.008 , 0.0075 , 99.60, 8
> 0.008 <= 0.009 , 0.0085 , 99.62, 4
> 0.012 <= 0.014 , 0.013 , 99.62, 1
> 0.014 <= 0.016 , 0.015 , 99.74, 23
> 0.016 <= 0.018 , 0.017 , 99.92, 36
> 0.018 <= 0.0195454 , 0.0187727 , 100.00, 16
# target 50% 0.00164649
# target 75% 0.00194805
# target 90% 0.0024682
# target 99% 0.00530431
# target 99.9% 0.017778
Ping SERVING : 19996
All done 19996 calls (plus 4 warmup) 1.745 ms avg, 1998.3 qps
Successfully wrote 4481 bytes of Json data to /data/2018-11-19-064334_grpc_istio_2000qps_10s_echo_1_5.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:43:44 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:43:44 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:43:54 I periodic.go:533> T001 ended after 10.000679056s : 5000 calls. qps=499.96604950542877
06:43:54 I periodic.go:533> T000 ended after 10.001080519s : 5000 calls. qps=499.94597988697586
06:43:54 I periodic.go:533> T002 ended after 10.003747504s : 5000 calls. qps=499.81269499262646
06:43:54 I periodic.go:533> T003 ended after 10.003808698s : 5000 calls. qps=499.80963760328797
Ended after 10.003826488s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.0013265844 +/- 0.0004539 min -0.004213695 max 0.001791433 sum 26.5263819
Aggregated Function Time : count 20000 avg 0.00039755505 +/- 0.0003186 min 0.000102529 max 0.005824179 sum 7.95110094
# range, mid point, percentile, count
>= 0.000102529 <= 0.0002 , 0.000151265 , 2.46, 492
> 0.0002 <= 0.0003 , 0.00025 , 32.05, 5919
> 0.0003 <= 0.0004 , 0.00035 , 69.19, 7428
> 0.0004 <= 0.0005 , 0.00045 , 87.89, 3739
> 0.0005 <= 0.0006 , 0.00055 , 94.33, 1288
> 0.0006 <= 0.0007 , 0.00065 , 96.40, 414
> 0.0007 <= 0.0008 , 0.00075 , 97.21, 162
> 0.0008 <= 0.0009 , 0.00085 , 97.68, 94
> 0.0009 <= 0.001 , 0.00095 , 97.96, 56
> 0.001 <= 0.0011 , 0.00105 , 98.19, 46
> 0.0011 <= 0.0012 , 0.00115 , 98.34, 31
> 0.0012 <= 0.0014 , 0.0013 , 98.57, 45
> 0.0014 <= 0.0016 , 0.0015 , 98.66, 17
> 0.0016 <= 0.0018 , 0.0017 , 98.79, 27
> 0.0018 <= 0.002 , 0.0019 , 99.34, 110
> 0.002 <= 0.0025 , 0.00225 , 99.47, 27
> 0.0025 <= 0.003 , 0.00275 , 99.55, 15
> 0.003 <= 0.0035 , 0.00325 , 99.72, 34
> 0.0035 <= 0.004 , 0.00375 , 99.81, 17
> 0.004 <= 0.0045 , 0.00425 , 99.91, 21
> 0.0045 <= 0.005 , 0.00475 , 99.98, 14
> 0.005 <= 0.00582418 , 0.00541209 , 100.00, 4
# target 50% 0.000348317
# target 75% 0.000431051
# target 90% 0.000532764
# target 99% 0.00187636
# target 99.9% 0.00445238
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.398 ms avg, 1999.2 qps
Successfully wrote 4281 bytes of Json data to /data/2018-11-19-064344_http_baseline_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:43:54 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:43:54 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:04 I periodic.go:533> T002 ended after 10.000848022s : 5000 calls. qps=499.95760249540166
06:44:04 I periodic.go:533> T003 ended after 10.001374982s : 5000 calls. qps=499.9312603515779
06:44:04 I periodic.go:533> T001 ended after 10.001489033s : 5000 calls. qps=499.92555943444586
06:44:04 I periodic.go:533> T000 ended after 10.001547467s : 5000 calls. qps=499.92263862141806
Ended after 10.00157355s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.00094326349 +/- 0.0005029 min -0.003841263 max 0.001494547 sum 18.8614968
Aggregated Function Time : count 20000 avg 0.00076632774 +/- 0.0003454 min 0.000315286 max 0.005580624 sum 15.3265549
# range, mid point, percentile, count
>= 0.000315286 <= 0.0004 , 0.000357643 , 0.01, 2
> 0.0004 <= 0.0005 , 0.00045 , 0.34, 66
> 0.0005 <= 0.0006 , 0.00055 , 13.77, 2685
> 0.0006 <= 0.0007 , 0.00065 , 49.35, 7117
> 0.0007 <= 0.0008 , 0.00075 , 74.92, 5113
> 0.0008 <= 0.0009 , 0.00085 , 87.08, 2434
> 0.0009 <= 0.001 , 0.00095 , 93.53, 1289
> 0.001 <= 0.0011 , 0.00105 , 95.98, 491
> 0.0011 <= 0.0012 , 0.00115 , 97.02, 206
> 0.0012 <= 0.0014 , 0.0013 , 97.89, 176
> 0.0014 <= 0.0016 , 0.0015 , 98.36, 94
> 0.0016 <= 0.0018 , 0.0017 , 98.75, 76
> 0.0018 <= 0.002 , 0.0019 , 99.06, 63
> 0.002 <= 0.0025 , 0.00225 , 99.28, 45
> 0.0025 <= 0.003 , 0.00275 , 99.38, 19
> 0.003 <= 0.0035 , 0.00325 , 99.44, 13
> 0.0035 <= 0.004 , 0.00375 , 99.56, 22
> 0.004 <= 0.0045 , 0.00425 , 99.76, 41
> 0.0045 <= 0.005 , 0.00475 , 99.92, 32
> 0.005 <= 0.00558062 , 0.00529031 , 100.00, 16
# target 50% 0.000702543
# target 75% 0.000800698
# target 90% 0.000945229
# target 99% 0.0019619
# target 99.9% 0.0049375
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.766 ms avg, 1999.7 qps
Successfully wrote 4027 bytes of Json data to /data/2018-11-19-064354_http_linkerd_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:44:04 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:44:04 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:14 W periodic.go:487> T003 warning only did 4925 out of 5000 calls before reaching 10s
06:44:14 I periodic.go:533> T003 ended after 10.002405138s : 4925 calls. qps=492.3815754362418
06:44:14 W periodic.go:487> T002 warning only did 4926 out of 5000 calls before reaching 10s
06:44:14 I periodic.go:533> T002 ended after 10.004528642s : 4926 calls. qps=492.37702007470546
06:44:14 W periodic.go:487> T001 warning only did 4932 out of 5000 calls before reaching 10s
06:44:14 I periodic.go:533> T001 ended after 10.004569278s : 4932 calls. qps=492.97474613379353
06:44:14 W periodic.go:487> T000 warning only did 4930 out of 5000 calls before reaching 10s
06:44:14 I periodic.go:533> T000 ended after 10.004582839s : 4930 calls. qps=492.77416953176777
Ended after 10.004594959s : 19713 calls. qps=1970.4
Aggregated Sleep Time : count 19713 avg -0.079050571 +/- 0.05791 min -0.191419794 max 0.001072862 sum -1558.3239
# range, mid point, percentile, count
>= -0.19142 <= -0.001 , -0.0962099 , 88.43, 17433
> -0.001 <= 0 , -0.0005 , 91.12, 529
> 0 <= 0.001 , 0.0005 , 99.98, 1748
> 0.001 <= 0.00107286 , 0.00103643 , 100.00, 3
# target 50% -0.0837625
WARNING 88.43% of sleep were falling behind
Aggregated Function Time : count 19713 avg 0.0018930493 +/- 0.0009623 min 0.000714932 max 0.016264233 sum 37.317681
# range, mid point, percentile, count
>= 0.000714932 <= 0.0008 , 0.000757466 , 0.04, 7
> 0.0008 <= 0.0009 , 0.00085 , 0.15, 23
> 0.0009 <= 0.001 , 0.00095 , 0.44, 56
> 0.001 <= 0.0011 , 0.00105 , 1.25, 161
> 0.0011 <= 0.0012 , 0.00115 , 7.74, 1279
> 0.0012 <= 0.0014 , 0.0013 , 20.44, 2504
> 0.0014 <= 0.0016 , 0.0015 , 28.21, 1531
> 0.0016 <= 0.0018 , 0.0017 , 40.72, 2467
> 0.0018 <= 0.002 , 0.0019 , 78.84, 7513
> 0.002 <= 0.0025 , 0.00225 , 94.58, 3103
> 0.0025 <= 0.003 , 0.00275 , 95.72, 226
> 0.003 <= 0.0035 , 0.00325 , 96.59, 170
> 0.0035 <= 0.004 , 0.00375 , 97.57, 194
> 0.004 <= 0.0045 , 0.00425 , 98.52, 187
> 0.0045 <= 0.005 , 0.00475 , 99.00, 95
> 0.005 <= 0.006 , 0.0055 , 99.35, 69
> 0.006 <= 0.007 , 0.0065 , 99.57, 44
> 0.007 <= 0.008 , 0.0075 , 99.61, 8
> 0.012 <= 0.014 , 0.013 , 99.90, 56
> 0.014 <= 0.016 , 0.015 , 99.97, 14
> 0.016 <= 0.0162642 , 0.0161321 , 100.00, 6
# target 50% 0.00184868
# target 75% 0.00197987
# target 90% 0.00235461
# target 99% 0.00499932
# target 99.9% 0.014041
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19713 (100.0 %)
Response Header Sizes : count 19713 avg 209 +/- 0 min 209 max 209 sum 4120017
Response Body/Total Sizes : count 19713 avg 209 +/- 0 min 209 max 209 sum 4120017
All done 19713 calls (plus 4 warmup) 1.893 ms avg, 1970.4 qps
Successfully wrote 4342 bytes of Json data to /data/2018-11-19-064404_http_istio_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:44:14 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:24 I periodic.go:533> T001 ended after 10.000852088s : 5000 calls. qps=499.95739922996046
06:44:24 I periodic.go:533> T000 ended after 10.001459791s : 5000 calls. qps=499.92702110339366
06:44:24 I periodic.go:533> T003 ended after 10.005382641s : 5000 calls. qps=499.73101273618744
06:44:24 I periodic.go:533> T002 ended after 10.005442656s : 5000 calls. qps=499.728015231953
Ended after 10.005457383s : 20000 calls. qps=1998.9
Sleep times : count 19996 avg 0.0010830824 +/- 0.0005586 min -0.004867201 max 0.00162988 sum 21.6573163
Aggregated Function Time : count 20000 avg 0.00064104534 +/- 0.0003528 min 0.000206233 max 0.006031297 sum 12.8209068
# range, mid point, percentile, count
>= 0.000206233 <= 0.0003 , 0.000253117 , 0.21, 43
> 0.0003 <= 0.0004 , 0.00035 , 1.69, 295
> 0.0004 <= 0.0005 , 0.00045 , 15.40, 2742
> 0.0005 <= 0.0006 , 0.00055 , 57.84, 8487
> 0.0006 <= 0.0007 , 0.00065 , 84.50, 5333
> 0.0007 <= 0.0008 , 0.00075 , 93.03, 1707
> 0.0008 <= 0.0009 , 0.00085 , 95.61, 516
> 0.0009 <= 0.001 , 0.00095 , 96.50, 177
> 0.001 <= 0.0011 , 0.00105 , 96.86, 72
> 0.0011 <= 0.0012 , 0.00115 , 97.06, 41
> 0.0012 <= 0.0014 , 0.0013 , 97.48, 83
> 0.0014 <= 0.0016 , 0.0015 , 97.94, 91
> 0.0016 <= 0.0018 , 0.0017 , 98.51, 115
> 0.0018 <= 0.002 , 0.0019 , 99.02, 102
> 0.002 <= 0.0025 , 0.00225 , 99.19, 33
> 0.0025 <= 0.003 , 0.00275 , 99.29, 21
> 0.003 <= 0.0035 , 0.00325 , 99.50, 41
> 0.0035 <= 0.004 , 0.00375 , 99.67, 36
> 0.004 <= 0.0045 , 0.00425 , 99.84, 33
> 0.0045 <= 0.005 , 0.00475 , 99.96, 24
> 0.005 <= 0.006 , 0.0055 , 99.99, 6
> 0.006 <= 0.0060313 , 0.00601565 , 100.00, 2
# target 50% 0.000581536
# target 75% 0.000664373
# target 90% 0.000764441
# target 99% 0.00199216
# target 99.9% 0.00475
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.641 ms avg, 1998.9 qps
Successfully wrote 3734 bytes of Json data to /data/2018-11-19-064414_grpc_baseline_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:44:24 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:35 I periodic.go:533> T003 ended after 10.000931571s : 5000 calls. qps=499.95342578871845
06:44:35 I periodic.go:533> T002 ended after 10.001668785s : 5000 calls. qps=499.9165746718936
06:44:35 I periodic.go:533> T001 ended after 10.001841792s : 5000 calls. qps=499.90792735786556
06:44:35 I periodic.go:533> T000 ended after 10.001870285s : 5000 calls. qps=499.9065032365594
Ended after 10.001920933s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00039181122 +/- 0.003442 min -0.052393665 max 0.001332975 sum 7.83465723
Aggregated Function Time : count 20000 avg 0.0010020387 +/- 0.000754 min 0.000409923 max 0.045619974 sum 20.0407749
# range, mid point, percentile, count
>= 0.000409923 <= 0.0005 , 0.000454961 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.07, 11
> 0.0006 <= 0.0007 , 0.00065 , 0.86, 160
> 0.0007 <= 0.0008 , 0.00075 , 12.87, 2400
> 0.0008 <= 0.0009 , 0.00085 , 40.52, 5531
> 0.0009 <= 0.001 , 0.00095 , 71.49, 6194
> 0.001 <= 0.0011 , 0.00105 , 87.18, 3138
> 0.0011 <= 0.0012 , 0.00115 , 92.61, 1085
> 0.0012 <= 0.0014 , 0.0013 , 95.97, 674
> 0.0014 <= 0.0016 , 0.0015 , 96.93, 191
> 0.0016 <= 0.0018 , 0.0017 , 97.63, 140
> 0.0018 <= 0.002 , 0.0019 , 98.19, 112
> 0.002 <= 0.0025 , 0.00225 , 98.89, 141
> 0.0025 <= 0.003 , 0.00275 , 99.11, 42
> 0.003 <= 0.0035 , 0.00325 , 99.25, 30
> 0.0035 <= 0.004 , 0.00375 , 99.42, 32
> 0.004 <= 0.0045 , 0.00425 , 99.58, 33
> 0.0045 <= 0.005 , 0.00475 , 99.74, 32
> 0.005 <= 0.006 , 0.0055 , 99.91, 33
> 0.006 <= 0.007 , 0.0065 , 99.95, 10
> 0.007 <= 0.008 , 0.0075 , 99.96, 1
> 0.01 <= 0.012 , 0.011 , 99.98, 4
> 0.045 <= 0.04562 , 0.04531 , 100.00, 4
# target 50% 0.00093061
# target 75% 0.00102237
# target 90% 0.00115198
# target 99% 0.00275
# target 99.9% 0.0059697
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.002 ms avg, 1999.6 qps
Successfully wrote 3811 bytes of Json data to /data/2018-11-19-064425_grpc_linkerd_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:44:35 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:45 I periodic.go:533> T000 ended after 10.015851888s : 5000 calls. qps=499.20866002326807
06:44:45 I periodic.go:533> T003 ended after 10.016401744s : 5000 calls. qps=499.1812556834681
06:44:45 I periodic.go:533> T001 ended after 10.016939718s : 5000 calls. qps=499.15444644387946
06:44:45 I periodic.go:533> T002 ended after 10.017023986s : 5000 calls. qps=499.1502473177766
Ended after 10.017042727s : 20000 calls. qps=1996.6
Aggregated Sleep Time : count 19996 avg -0.010353961 +/- 0.02331 min -0.13385687 max 0.001380785 sum -207.03781
# range, mid point, percentile, count
>= -0.133857 <= -0.001 , -0.0674284 , 46.66, 9331
> -0.001 <= 0 , -0.0005 , 71.37, 4940
> 0 <= 0.001 , 0.0005 , 98.36, 5398
> 0.001 <= 0.00138079 , 0.00119039 , 100.00, 327
# target 50% -0.00086498
WARNING 46.66% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017544093 +/- 0.001202 min 0.00046704 max 0.020453013 sum 35.0881864
# range, mid point, percentile, count
>= 0.00046704 <= 0.0005 , 0.00048352 , 0.02, 4
> 0.0005 <= 0.0006 , 0.00055 , 0.30, 57
> 0.0006 <= 0.0007 , 0.00065 , 1.73, 284
> 0.0007 <= 0.0008 , 0.00075 , 5.13, 682
> 0.0008 <= 0.0009 , 0.00085 , 11.51, 1275
> 0.0009 <= 0.001 , 0.00095 , 18.01, 1300
> 0.001 <= 0.0011 , 0.00105 , 22.25, 847
> 0.0011 <= 0.0012 , 0.00115 , 25.46, 643
> 0.0012 <= 0.0014 , 0.0013 , 32.02, 1311
> 0.0014 <= 0.0016 , 0.0015 , 44.40, 2476
> 0.0016 <= 0.0018 , 0.0017 , 63.80, 3880
> 0.0018 <= 0.002 , 0.0019 , 77.37, 2715
> 0.002 <= 0.0025 , 0.00225 , 90.86, 2699
> 0.0025 <= 0.003 , 0.00275 , 95.11, 848
> 0.003 <= 0.0035 , 0.00325 , 96.38, 255
> 0.0035 <= 0.004 , 0.00375 , 97.69, 261
> 0.004 <= 0.0045 , 0.00425 , 98.55, 172
> 0.0045 <= 0.005 , 0.00475 , 98.94, 79
> 0.005 <= 0.006 , 0.0055 , 99.36, 85
> 0.006 <= 0.007 , 0.0065 , 99.55, 36
> 0.007 <= 0.008 , 0.0075 , 99.59, 9
> 0.008 <= 0.009 , 0.0085 , 99.60, 2
> 0.012 <= 0.014 , 0.013 , 99.61, 3
> 0.014 <= 0.016 , 0.015 , 99.76, 29
> 0.016 <= 0.018 , 0.017 , 99.93, 34
> 0.018 <= 0.02 , 0.019 , 99.97, 9
> 0.02 <= 0.020453 , 0.0202265 , 100.00, 5
# target 50% 0.00165778
# target 75% 0.00196508
# target 90% 0.00246795
# target 99% 0.00514118
# target 99.9% 0.0176471
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.754 ms avg, 1996.6 qps
Successfully wrote 4289 bytes of Json data to /data/2018-11-19-064435_grpc_istio_2000qps_10s_echo_0_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:44:45 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:44:45 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:44:55 I periodic.go:533> T000 ended after 10.000448825s : 5000 calls. qps=499.9775597571742
06:44:55 I periodic.go:533> T001 ended after 10.00079886s : 5000 calls. qps=499.9600601906316
06:44:55 I periodic.go:533> T002 ended after 10.002959984s : 5000 calls. qps=499.85204459456327
06:44:55 I periodic.go:533> T003 ended after 10.002997702s : 5000 calls. qps=499.85015981762143
Ended after 10.003033027s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014305064 +/- 0.0003606 min -0.002918478 max 0.001767709 sum 28.6044063
Aggregated Function Time : count 20000 avg 0.0003476196 +/- 0.0002561 min 9.4548e-05 max 0.004412399 sum 6.95239205
# range, mid point, percentile, count
>= 9.4548e-05 <= 0.0001 , 9.7274e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 3.64, 727
> 0.0002 <= 0.0003 , 0.00025 , 44.83, 8237
> 0.0003 <= 0.0004 , 0.00035 , 84.58, 7950
> 0.0004 <= 0.0005 , 0.00045 , 94.61, 2006
> 0.0005 <= 0.0006 , 0.00055 , 97.08, 494
> 0.0006 <= 0.0007 , 0.00065 , 97.81, 147
> 0.0007 <= 0.0008 , 0.00075 , 98.11, 59
> 0.0008 <= 0.0009 , 0.00085 , 98.31, 41
> 0.0009 <= 0.001 , 0.00095 , 98.61, 61
> 0.001 <= 0.0011 , 0.00105 , 98.78, 32
> 0.0011 <= 0.0012 , 0.00115 , 98.89, 24
> 0.0012 <= 0.0014 , 0.0013 , 99.08, 38
> 0.0014 <= 0.0016 , 0.0015 , 99.25, 32
> 0.0016 <= 0.0018 , 0.0017 , 99.33, 17
> 0.0018 <= 0.002 , 0.0019 , 99.45, 25
> 0.002 <= 0.0025 , 0.00225 , 99.54, 17
> 0.0025 <= 0.003 , 0.00275 , 99.68, 28
> 0.003 <= 0.0035 , 0.00325 , 99.83, 31
> 0.0035 <= 0.004 , 0.00375 , 99.89, 12
> 0.004 <= 0.0044124 , 0.0042062 , 100.00, 21
# target 50% 0.000313019
# target 75% 0.000375912
# target 90% 0.000454088
# target 99% 0.00131053
# target 99.9% 0.00401964
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.348 ms avg, 1999.4 qps
Successfully wrote 4147 bytes of Json data to /data/2018-11-19-064445_http_baseline_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:44:55 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:44:55 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:05 I periodic.go:533> T000 ended after 10.000891459s : 5000 calls. qps=499.95543102314156
06:45:05 I periodic.go:533> T002 ended after 10.000957703s : 5000 calls. qps=499.9521194355361
06:45:05 I periodic.go:533> T003 ended after 10.000968662s : 5000 calls. qps=499.95157159107595
06:45:05 I periodic.go:533> T001 ended after 10.000977083s : 5000 calls. qps=499.9511506229896
Ended after 10.000988121s : 20000 calls. qps=1999.8
Sleep times : count 19996 avg 0.0010090568 +/- 0.0009031 min -0.020633765 max 0.001468323 sum 20.1770996
Aggregated Function Time : count 20000 avg 0.00071222311 +/- 0.0003439 min 0.00037714 max 0.005591441 sum 14.2444622
# range, mid point, percentile, count
>= 0.00037714 <= 0.0004 , 0.00038857 , 0.02, 4
> 0.0004 <= 0.0005 , 0.00045 , 0.39, 74
> 0.0005 <= 0.0006 , 0.00055 , 24.71, 4865
> 0.0006 <= 0.0007 , 0.00065 , 68.72, 8800
> 0.0007 <= 0.0008 , 0.00075 , 88.00, 3857
> 0.0008 <= 0.0009 , 0.00085 , 94.00, 1201
> 0.0009 <= 0.001 , 0.00095 , 96.21, 441
> 0.001 <= 0.0011 , 0.00105 , 96.98, 154
> 0.0011 <= 0.0012 , 0.00115 , 97.50, 104
> 0.0012 <= 0.0014 , 0.0013 , 97.98, 96
> 0.0014 <= 0.0016 , 0.0015 , 98.42, 89
> 0.0016 <= 0.0018 , 0.0017 , 98.71, 57
> 0.0018 <= 0.002 , 0.0019 , 98.97, 51
> 0.002 <= 0.0025 , 0.00225 , 99.18, 43
> 0.0025 <= 0.003 , 0.00275 , 99.31, 25
> 0.003 <= 0.0035 , 0.00325 , 99.45, 30
> 0.0035 <= 0.004 , 0.00375 , 99.67, 42
> 0.004 <= 0.0045 , 0.00425 , 99.78, 24
> 0.0045 <= 0.005 , 0.00475 , 99.91, 25
> 0.005 <= 0.00559144 , 0.00529572 , 100.00, 18
# target 50% 0.000657466
# target 75% 0.00073259
# target 90% 0.000833306
# target 99% 0.0020814
# target 99.9% 0.00496
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.712 ms avg, 1999.8 qps
Successfully wrote 4019 bytes of Json data to /data/2018-11-19-064455_http_linkerd_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:45:05 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:45:05 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:15 W periodic.go:487> T001 warning only did 4918 out of 5000 calls before reaching 10s
06:45:15 I periodic.go:533> T001 ended after 10.002184071s : 4918 calls. qps=491.6926108427744
06:45:15 W periodic.go:487> T002 warning only did 4916 out of 5000 calls before reaching 10s
06:45:15 I periodic.go:533> T002 ended after 10.004400978s : 4916 calls. qps=491.3837430957078
06:45:15 W periodic.go:487> T000 warning only did 4919 out of 5000 calls before reaching 10s
06:45:15 I periodic.go:533> T000 ended after 10.004420363s : 4919 calls. qps=491.68265841689924
06:45:15 W periodic.go:487> T003 warning only did 4913 out of 5000 calls before reaching 10s
06:45:15 I periodic.go:533> T003 ended after 10.004432614s : 4913 calls. qps=491.082322162363
Ended after 10.004443586s : 19666 calls. qps=1965.7
Aggregated Sleep Time : count 19666 avg -0.075786307 +/- 0.06245 min -0.195800023 max 0.001113313 sum -1490.41352
# range, mid point, percentile, count
>= -0.1958 <= -0.001 , -0.0984 , 92.10, 18113
> -0.001 <= 0 , -0.0005 , 92.95, 167
> 0 <= 0.001 , 0.0005 , 99.99, 1384
> 0.001 <= 0.00111331 , 0.00105666 , 100.00, 2
# target 50% -0.0900539
WARNING 92.10% of sleep were falling behind
Aggregated Function Time : count 19666 avg 0.0019182572 +/- 0.001034 min 0.000791022 max 0.027182656 sum 37.7244453
# range, mid point, percentile, count
>= 0.000791022 <= 0.0008 , 0.000795511 , 0.01, 1
> 0.0008 <= 0.0009 , 0.00085 , 0.08, 15
> 0.0009 <= 0.001 , 0.00095 , 0.28, 40
> 0.001 <= 0.0011 , 0.00105 , 0.81, 103
> 0.0011 <= 0.0012 , 0.00115 , 4.67, 759
> 0.0012 <= 0.0014 , 0.0013 , 17.81, 2584
> 0.0014 <= 0.0016 , 0.0015 , 26.19, 1649
> 0.0016 <= 0.0018 , 0.0017 , 36.57, 2041
> 0.0018 <= 0.002 , 0.0019 , 77.93, 8134
> 0.002 <= 0.0025 , 0.00225 , 94.78, 3313
> 0.0025 <= 0.003 , 0.00275 , 95.98, 236
> 0.003 <= 0.0035 , 0.00325 , 96.64, 131
> 0.0035 <= 0.004 , 0.00375 , 97.60, 188
> 0.004 <= 0.0045 , 0.00425 , 98.51, 179
> 0.0045 <= 0.005 , 0.00475 , 98.92, 80
> 0.005 <= 0.006 , 0.0055 , 99.45, 105
> 0.006 <= 0.007 , 0.0065 , 99.55, 20
> 0.007 <= 0.008 , 0.0075 , 99.59, 8
> 0.009 <= 0.01 , 0.0095 , 99.61, 4
> 0.012 <= 0.014 , 0.013 , 99.85, 47
> 0.014 <= 0.016 , 0.015 , 99.94, 17
> 0.016 <= 0.018 , 0.017 , 99.96, 4
> 0.02 <= 0.025 , 0.0225 , 99.98, 4
> 0.025 <= 0.0271827 , 0.0260913 , 100.00, 4
# target 50% 0.00186494
# target 75% 0.00198582
# target 90% 0.00235819
# target 99% 0.00515562
# target 99.9% 0.0150981
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19666 (100.0 %)
Response Header Sizes : count 19666 avg 209 +/- 0 min 209 max 209 sum 4110194
Response Body/Total Sizes : count 19666 avg 209 +/- 0 min 209 max 209 sum 4110194
All done 19666 calls (plus 4 warmup) 1.918 ms avg, 1965.7 qps
Successfully wrote 4731 bytes of Json data to /data/2018-11-19-064505_http_istio_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:45:15 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:25 I periodic.go:533> T003 ended after 10.00067984s : 5000 calls. qps=499.96601031075505
06:45:25 I periodic.go:533> T002 ended after 10.001220059s : 5000 calls. qps=499.9390044918119
06:45:25 I periodic.go:533> T001 ended after 10.003209179s : 5000 calls. qps=499.8395925276291
06:45:25 I periodic.go:533> T000 ended after 10.003278561s : 5000 calls. qps=499.8361256771964
Ended after 10.003296323s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010931922 +/- 0.0005068 min -0.004375445 max 0.001697717 sum 21.8594712
Aggregated Function Time : count 20000 avg 0.00063704213 +/- 0.0003318 min 0.000185701 max 0.005070072 sum 12.7408426
# range, mid point, percentile, count
>= 0.000185701 <= 0.0002 , 0.000192851 , 0.02, 4
> 0.0002 <= 0.0003 , 0.00025 , 0.28, 51
> 0.0003 <= 0.0004 , 0.00035 , 2.14, 373
> 0.0004 <= 0.0005 , 0.00045 , 17.99, 3170
> 0.0005 <= 0.0006 , 0.00055 , 56.59, 7721
> 0.0006 <= 0.0007 , 0.00065 , 82.88, 5256
> 0.0007 <= 0.0008 , 0.00075 , 93.08, 2042
> 0.0008 <= 0.0009 , 0.00085 , 95.81, 546
> 0.0009 <= 0.001 , 0.00095 , 96.76, 189
> 0.001 <= 0.0011 , 0.00105 , 97.08, 65
> 0.0011 <= 0.0012 , 0.00115 , 97.29, 41
> 0.0012 <= 0.0014 , 0.0013 , 97.58, 58
> 0.0014 <= 0.0016 , 0.0015 , 97.93, 70
> 0.0016 <= 0.0018 , 0.0017 , 98.61, 136
> 0.0018 <= 0.002 , 0.0019 , 99.00, 79
> 0.002 <= 0.0025 , 0.00225 , 99.32, 63
> 0.0025 <= 0.003 , 0.00275 , 99.44, 23
> 0.003 <= 0.0035 , 0.00325 , 99.61, 34
> 0.0035 <= 0.004 , 0.00375 , 99.70, 19
> 0.004 <= 0.0045 , 0.00425 , 99.85, 30
> 0.0045 <= 0.005 , 0.00475 , 99.99, 28
> 0.005 <= 0.00507007 , 0.00503504 , 100.00, 2
# target 50% 0.000582917
# target 75% 0.000670034
# target 90% 0.000769785
# target 99% 0.00199747
# target 99.9% 0.00467857
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.637 ms avg, 1999.3 qps
Successfully wrote 3740 bytes of Json data to /data/2018-11-19-064515_grpc_baseline_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:45:25 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:35 I periodic.go:533> T001 ended after 10.000970608s : 5000 calls. qps=499.95147430994234
06:45:35 I periodic.go:533> T003 ended after 10.003655216s : 5000 calls. qps=499.817305978611
06:45:35 I periodic.go:533> T000 ended after 10.003720692s : 5000 calls. qps=499.8140345920006
06:45:35 I periodic.go:533> T002 ended after 10.003735537s : 5000 calls. qps=499.8132928951298
Ended after 10.003798344s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.00033850265 +/- 0.003547 min -0.05534992 max 0.001346967 sum 6.76869906
Aggregated Function Time : count 20000 avg 0.0010241793 +/- 0.0008979 min 0.000485884 max 0.057225866 sum 20.483586
# range, mid point, percentile, count
>= 0.000485884 <= 0.0005 , 0.000492942 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.10, 18
> 0.0006 <= 0.0007 , 0.00065 , 0.96, 172
> 0.0007 <= 0.0008 , 0.00075 , 11.22, 2052
> 0.0008 <= 0.0009 , 0.00085 , 35.15, 4786
> 0.0009 <= 0.001 , 0.00095 , 65.24, 6018
> 0.001 <= 0.0011 , 0.00105 , 84.34, 3820
> 0.0011 <= 0.0012 , 0.00115 , 91.52, 1436
> 0.0012 <= 0.0014 , 0.0013 , 95.63, 822
> 0.0014 <= 0.0016 , 0.0015 , 96.75, 223
> 0.0016 <= 0.0018 , 0.0017 , 97.59, 169
> 0.0018 <= 0.002 , 0.0019 , 98.18, 118
> 0.002 <= 0.0025 , 0.00225 , 98.98, 160
> 0.0025 <= 0.003 , 0.00275 , 99.09, 22
> 0.003 <= 0.0035 , 0.00325 , 99.19, 21
> 0.0035 <= 0.004 , 0.00375 , 99.27, 15
> 0.004 <= 0.0045 , 0.00425 , 99.39, 25
> 0.0045 <= 0.005 , 0.00475 , 99.68, 57
> 0.005 <= 0.006 , 0.0055 , 99.91, 46
> 0.006 <= 0.007 , 0.0065 , 99.97, 11
> 0.008 <= 0.009 , 0.0085 , 99.98, 3
> 0.05 <= 0.0572259 , 0.0536129 , 100.00, 4
# target 50% 0.000949352
# target 75% 0.0010511
# target 90% 0.00117883
# target 99% 0.00259091
# target 99.9% 0.00595652
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.024 ms avg, 1999.2 qps
Successfully wrote 3709 bytes of Json data to /data/2018-11-19-064525_grpc_linkerd_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:45:35 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:45 I periodic.go:533> T000 ended after 10.014602648s : 5000 calls. qps=499.2709322319984
06:45:45 I periodic.go:533> T003 ended after 10.015805016s : 5000 calls. qps=499.210996221734
06:45:45 I periodic.go:533> T001 ended after 10.015986581s : 5000 calls. qps=499.2019467642695
06:45:45 I periodic.go:533> T002 ended after 10.016007797s : 5000 calls. qps=499.20088935010637
Ended after 10.016024047s : 20000 calls. qps=1996.8
Aggregated Sleep Time : count 19996 avg -0.0074881924 +/- 0.01694 min -0.118673698 max 0.001440016 sum -149.733896
# range, mid point, percentile, count
>= -0.118674 <= -0.001 , -0.0598368 , 43.32, 8663
> -0.001 <= 0 , -0.0005 , 69.11, 5157
> 0 <= 0.001 , 0.0005 , 98.21, 5818
> 0.001 <= 0.00144002 , 0.00122001 , 100.00, 358
# target 50% -0.000741129
WARNING 43.32% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017408037 +/- 0.001197 min 0.000482941 max 0.026813394 sum 34.8160743
# range, mid point, percentile, count
>= 0.000482941 <= 0.0005 , 0.00049147 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.40, 76
> 0.0006 <= 0.0007 , 0.00065 , 1.77, 276
> 0.0007 <= 0.0008 , 0.00075 , 5.30, 706
> 0.0008 <= 0.0009 , 0.00085 , 11.46, 1230
> 0.0009 <= 0.001 , 0.00095 , 17.83, 1275
> 0.001 <= 0.0011 , 0.00105 , 22.12, 859
> 0.0011 <= 0.0012 , 0.00115 , 25.57, 689
> 0.0012 <= 0.0014 , 0.0013 , 32.01, 1288
> 0.0014 <= 0.0016 , 0.0015 , 45.59, 2717
> 0.0016 <= 0.0018 , 0.0017 , 64.65, 3811
> 0.0018 <= 0.002 , 0.0019 , 78.68, 2806
> 0.002 <= 0.0025 , 0.00225 , 91.05, 2474
> 0.0025 <= 0.003 , 0.00275 , 95.54, 898
> 0.003 <= 0.0035 , 0.00325 , 96.67, 225
> 0.0035 <= 0.004 , 0.00375 , 97.94, 255
> 0.004 <= 0.0045 , 0.00425 , 98.60, 132
> 0.0045 <= 0.005 , 0.00475 , 98.93, 66
> 0.005 <= 0.006 , 0.0055 , 99.42, 99
> 0.006 <= 0.007 , 0.0065 , 99.55, 24
> 0.007 <= 0.008 , 0.0075 , 99.58, 8
> 0.008 <= 0.009 , 0.0085 , 99.59, 1
> 0.009 <= 0.01 , 0.0095 , 99.60, 2
> 0.012 <= 0.014 , 0.013 , 99.61, 3
> 0.014 <= 0.016 , 0.015 , 99.80, 36
> 0.016 <= 0.018 , 0.017 , 99.96, 33
> 0.018 <= 0.02 , 0.019 , 99.97, 3
> 0.02 <= 0.025 , 0.0225 , 99.98, 1
> 0.025 <= 0.0268134 , 0.0259067 , 100.00, 4
# target 50% 0.00164623
# target 75% 0.00194754
# target 90% 0.00245756
# target 99% 0.00514141
# target 99.9% 0.0172727
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.741 ms avg, 1996.8 qps
Successfully wrote 4518 bytes of Json data to /data/2018-11-19-064535_grpc_istio_2000qps_10s_echo_1_6.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:45:45 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:45:45 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:45:55 I periodic.go:533> T000 ended after 10.000401919s : 5000 calls. qps=499.97990485766195
06:45:55 I periodic.go:533> T001 ended after 10.000778797s : 5000 calls. qps=499.96106318238765
06:45:55 I periodic.go:533> T003 ended after 10.002971259s : 5000 calls. qps=499.8514811787884
06:45:55 I periodic.go:533> T002 ended after 10.003003813s : 5000 calls. qps=499.84985445091525
Ended after 10.003077196s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0013997658 +/- 0.000564 min -0.01314785 max 0.001735846 sum 27.9897164
Aggregated Function Time : count 20000 avg 0.00035787509 +/- 0.0002713 min 9.389e-05 max 0.005623829 sum 7.15750179
# range, mid point, percentile, count
>= 9.389e-05 <= 0.0001 , 9.6945e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.39, 477
> 0.0002 <= 0.0003 , 0.00025 , 40.43, 7608
> 0.0003 <= 0.0004 , 0.00035 , 81.91, 8295
> 0.0004 <= 0.0005 , 0.00045 , 93.98, 2415
> 0.0005 <= 0.0006 , 0.00055 , 97.02, 607
> 0.0006 <= 0.0007 , 0.00065 , 97.94, 184
> 0.0007 <= 0.0008 , 0.00075 , 98.22, 56
> 0.0008 <= 0.0009 , 0.00085 , 98.42, 40
> 0.0009 <= 0.001 , 0.00095 , 98.59, 36
> 0.001 <= 0.0011 , 0.00105 , 98.74, 29
> 0.0011 <= 0.0012 , 0.00115 , 98.88, 27
> 0.0012 <= 0.0014 , 0.0013 , 99.05, 34
> 0.0014 <= 0.0016 , 0.0015 , 99.12, 16
> 0.0016 <= 0.0018 , 0.0017 , 99.22, 19
> 0.0018 <= 0.002 , 0.0019 , 99.47, 50
> 0.002 <= 0.0025 , 0.00225 , 99.56, 19
> 0.0025 <= 0.003 , 0.00275 , 99.67, 20
> 0.003 <= 0.0035 , 0.00325 , 99.75, 18
> 0.0035 <= 0.004 , 0.00375 , 99.87, 23
> 0.004 <= 0.0045 , 0.00425 , 99.97, 19
> 0.0045 <= 0.005 , 0.00475 , 99.99, 5
> 0.005 <= 0.00562383 , 0.00531191 , 100.00, 2
# target 50% 0.000323074
# target 75% 0.000383351
# target 90% 0.000467039
# target 99% 0.00134706
# target 99.9% 0.00415789
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.358 ms avg, 1999.4 qps
Successfully wrote 4392 bytes of Json data to /data/2018-11-19-064545_http_baseline_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:45:55 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:45:55 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:05 I periodic.go:533> T003 ended after 10.000902516s : 5000 calls. qps=499.9548782723081
06:46:05 I periodic.go:533> T001 ended after 10.001397929s : 5000 calls. qps=499.93011331966176
06:46:05 I periodic.go:533> T000 ended after 10.0014977s : 5000 calls. qps=499.92512621384697
06:46:05 I periodic.go:533> T002 ended after 10.001563688s : 5000 calls. qps=499.92182782368945
Ended after 10.001586896s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010960116 +/- 0.0004722 min -0.005575996 max 0.001501736 sum 21.9158487
Aggregated Function Time : count 20000 avg 0.00067127568 +/- 0.0003186 min 0.00033638 max 0.005407618 sum 13.4255135
# range, mid point, percentile, count
>= 0.00033638 <= 0.0004 , 0.00036819 , 0.04, 7
> 0.0004 <= 0.0005 , 0.00045 , 1.28, 250
> 0.0005 <= 0.0006 , 0.00055 , 41.99, 8142
> 0.0006 <= 0.0007 , 0.00065 , 80.78, 7758
> 0.0007 <= 0.0008 , 0.00075 , 92.44, 2330
> 0.0008 <= 0.0009 , 0.00085 , 95.69, 651
> 0.0009 <= 0.001 , 0.00095 , 96.91, 243
> 0.001 <= 0.0011 , 0.00105 , 97.34, 87
> 0.0011 <= 0.0012 , 0.00115 , 97.61, 55
> 0.0012 <= 0.0014 , 0.0013 , 98.04, 85
> 0.0014 <= 0.0016 , 0.0015 , 98.74, 140
> 0.0016 <= 0.0018 , 0.0017 , 99.02, 55
> 0.0018 <= 0.002 , 0.0019 , 99.16, 28
> 0.002 <= 0.0025 , 0.00225 , 99.35, 39
> 0.0025 <= 0.003 , 0.00275 , 99.42, 14
> 0.003 <= 0.0035 , 0.00325 , 99.50, 16
> 0.0035 <= 0.004 , 0.00375 , 99.62, 24
> 0.004 <= 0.0045 , 0.00425 , 99.83, 41
> 0.0045 <= 0.005 , 0.00475 , 99.98, 31
> 0.005 <= 0.00540762 , 0.00520381 , 100.00, 4
# target 50% 0.000620637
# target 75% 0.000685086
# target 90% 0.000779099
# target 99% 0.00178909
# target 99.9% 0.00474194
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.671 ms avg, 1999.7 qps
Successfully wrote 4021 bytes of Json data to /data/2018-11-19-064555_http_linkerd_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:46:05 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:46:05 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:15 W periodic.go:487> T001 warning only did 4914 out of 5000 calls before reaching 10s
06:46:15 I periodic.go:533> T001 ended after 10.001557108s : 4914 calls. qps=491.3234956254374
06:46:15 W periodic.go:487> T002 warning only did 4920 out of 5000 calls before reaching 10s
06:46:15 I periodic.go:533> T002 ended after 10.003867777s : 4920 calls. qps=491.8097789448622
06:46:15 W periodic.go:487> T003 warning only did 4920 out of 5000 calls before reaching 10s
06:46:15 I periodic.go:533> T003 ended after 10.003906257s : 4920 calls. qps=491.80788719979705
06:46:15 W periodic.go:487> T000 warning only did 4913 out of 5000 calls before reaching 10s
06:46:15 I periodic.go:533> T000 ended after 10.003919874s : 4913 calls. qps=491.10749205107044
Ended after 10.003931783s : 19667 calls. qps=1965.9
Aggregated Sleep Time : count 19667 avg -0.079316431 +/- 0.06118 min -0.192069854 max 0.00109048 sum -1559.91624
# range, mid point, percentile, count
>= -0.19207 <= -0.001 , -0.0965349 , 89.10, 17524
> -0.001 <= 0 , -0.0005 , 90.88, 350
> 0 <= 0.001 , 0.0005 , 99.97, 1788
> 0.001 <= 0.00109048 , 0.00104524 , 100.00, 5
# target 50% -0.0848568
WARNING 89.10% of sleep were falling behind
Aggregated Function Time : count 19667 avg 0.0018974819 +/- 0.0009767 min 0.000735391 max 0.01701982 sum 37.3177774
# range, mid point, percentile, count
>= 0.000735391 <= 0.0008 , 0.000767696 , 0.02, 4
> 0.0008 <= 0.0009 , 0.00085 , 0.09, 14
> 0.0009 <= 0.001 , 0.00095 , 0.32, 44
> 0.001 <= 0.0011 , 0.00105 , 0.84, 103
> 0.0011 <= 0.0012 , 0.00115 , 5.84, 984
> 0.0012 <= 0.0014 , 0.0013 , 20.24, 2831
> 0.0014 <= 0.0016 , 0.0015 , 28.61, 1646
> 0.0016 <= 0.0018 , 0.0017 , 40.69, 2377
> 0.0018 <= 0.002 , 0.0019 , 79.44, 7620
> 0.002 <= 0.0025 , 0.00225 , 94.61, 2984
> 0.0025 <= 0.003 , 0.00275 , 95.65, 205
> 0.003 <= 0.0035 , 0.00325 , 96.53, 172
> 0.0035 <= 0.004 , 0.00375 , 97.58, 208
> 0.004 <= 0.0045 , 0.00425 , 98.48, 176
> 0.0045 <= 0.005 , 0.00475 , 98.93, 89
> 0.005 <= 0.006 , 0.0055 , 99.35, 83
> 0.006 <= 0.007 , 0.0065 , 99.55, 39
> 0.007 <= 0.008 , 0.0075 , 99.61, 12
> 0.012 <= 0.014 , 0.013 , 99.79, 34
> 0.014 <= 0.016 , 0.015 , 99.98, 38
> 0.016 <= 0.0170198 , 0.0165099 , 100.00, 4
# target 50% 0.00184804
# target 75% 0.00197709
# target 90% 0.00234807
# target 99% 0.0051606
# target 99.9% 0.0151754
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19667 (100.0 %)
Response Header Sizes : count 19667 avg 209 +/- 0 min 209 max 209 sum 4110403
Response Body/Total Sizes : count 19667 avg 209 +/- 0 min 209 max 209 sum 4110403
All done 19667 calls (plus 4 warmup) 1.897 ms avg, 1965.9 qps
Successfully wrote 4340 bytes of Json data to /data/2018-11-19-064605_http_istio_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:46:15 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:25 I periodic.go:533> T003 ended after 10.000568051s : 5000 calls. qps=499.971599063318
06:46:25 I periodic.go:533> T000 ended after 10.001117474s : 5000 calls. qps=499.944132543043
06:46:25 I periodic.go:533> T002 ended after 10.004774281s : 5000 calls. qps=499.76139986440944
06:46:25 I periodic.go:533> T001 ended after 10.00488356s : 5000 calls. qps=499.7559411875854
Ended after 10.004909141s : 20000 calls. qps=1999
Sleep times : count 19996 avg 0.001084338 +/- 0.0005389 min -0.006105643 max 0.001730926 sum 21.6824225
Aggregated Function Time : count 20000 avg 0.00064021989 +/- 0.0003244 min 0.000182221 max 0.005152984 sum 12.8043977
# range, mid point, percentile, count
>= 0.000182221 <= 0.0002 , 0.00019111 , 0.01, 3
> 0.0002 <= 0.0003 , 0.00025 , 0.26, 48
> 0.0003 <= 0.0004 , 0.00035 , 1.93, 335
> 0.0004 <= 0.0005 , 0.00045 , 15.51, 2715
> 0.0005 <= 0.0006 , 0.00055 , 54.85, 7870
> 0.0006 <= 0.0007 , 0.00065 , 82.08, 5444
> 0.0007 <= 0.0008 , 0.00075 , 93.14, 2213
> 0.0008 <= 0.0009 , 0.00085 , 95.89, 550
> 0.0009 <= 0.001 , 0.00095 , 96.78, 179
> 0.001 <= 0.0011 , 0.00105 , 97.09, 62
> 0.0011 <= 0.0012 , 0.00115 , 97.41, 62
> 0.0012 <= 0.0014 , 0.0013 , 97.78, 76
> 0.0014 <= 0.0016 , 0.0015 , 98.09, 61
> 0.0016 <= 0.0018 , 0.0017 , 98.65, 112
> 0.0018 <= 0.002 , 0.0019 , 99.01, 72
> 0.002 <= 0.0025 , 0.00225 , 99.30, 57
> 0.0025 <= 0.003 , 0.00275 , 99.50, 40
> 0.003 <= 0.0035 , 0.00325 , 99.58, 18
> 0.0035 <= 0.004 , 0.00375 , 99.75, 33
> 0.004 <= 0.0045 , 0.00425 , 99.89, 29
> 0.0045 <= 0.005 , 0.00475 , 99.95, 11
> 0.005 <= 0.00515298 , 0.00507649 , 100.00, 10
# target 50% 0.000587662
# target 75% 0.000674008
# target 90% 0.000771622
# target 99% 0.00199444
# target 99.9% 0.00454545
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.640 ms avg, 1999.0 qps
Successfully wrote 3744 bytes of Json data to /data/2018-11-19-064615_grpc_baseline_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:46:25 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:35 I periodic.go:533> T003 ended after 10.000955017s : 5000 calls. qps=499.95225370985185
06:46:35 I periodic.go:533> T001 ended after 10.001717391s : 5000 calls. qps=499.914145194627
06:46:35 I periodic.go:533> T000 ended after 10.001886957s : 5000 calls. qps=499.90566994967486
06:46:35 I periodic.go:533> T002 ended after 10.001915628s : 5000 calls. qps=499.90423694463897
Ended after 10.001984047s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.00030761278 +/- 0.003974 min -0.058560226 max 0.001444797 sum 6.15102507
Aggregated Function Time : count 20000 avg 0.00101039 +/- 0.0008869 min 0.000453883 max 0.057347366 sum 20.207801
# range, mid point, percentile, count
>= 0.000453883 <= 0.0005 , 0.000476941 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.10, 16
> 0.0006 <= 0.0007 , 0.00065 , 0.76, 132
> 0.0007 <= 0.0008 , 0.00075 , 11.68, 2185
> 0.0008 <= 0.0009 , 0.00085 , 37.83, 5229
> 0.0009 <= 0.001 , 0.00095 , 68.81, 6196
> 0.001 <= 0.0011 , 0.00105 , 86.65, 3569
> 0.0011 <= 0.0012 , 0.00115 , 92.56, 1181
> 0.0012 <= 0.0014 , 0.0013 , 95.88, 665
> 0.0014 <= 0.0016 , 0.0015 , 96.86, 196
> 0.0016 <= 0.0018 , 0.0017 , 97.59, 146
> 0.0018 <= 0.002 , 0.0019 , 98.17, 116
> 0.002 <= 0.0025 , 0.00225 , 99.02, 170
> 0.0025 <= 0.003 , 0.00275 , 99.19, 34
> 0.003 <= 0.0035 , 0.00325 , 99.28, 17
> 0.0035 <= 0.004 , 0.00375 , 99.30, 5
> 0.004 <= 0.0045 , 0.00425 , 99.46, 32
> 0.0045 <= 0.005 , 0.00475 , 99.81, 70
> 0.005 <= 0.006 , 0.0055 , 99.95, 28
> 0.006 <= 0.007 , 0.0065 , 99.98, 6
> 0.05 <= 0.0573474 , 0.0536737 , 100.00, 4
# target 50% 0.0009393
# target 75% 0.00103472
# target 90% 0.00115673
# target 99% 0.00248824
# target 99.9% 0.00564286
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.010 ms avg, 1999.6 qps
Successfully wrote 3588 bytes of Json data to /data/2018-11-19-064625_grpc_linkerd_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:46:35 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:45 I periodic.go:533> T000 ended after 10.001157577s : 5000 calls. qps=499.942127849147
06:46:45 W periodic.go:487> T001 warning only did 4998 out of 5000 calls before reaching 10s
06:46:45 I periodic.go:533> T001 ended after 10.001935451s : 4998 calls. qps=499.70328487775805
06:46:45 W periodic.go:487> T002 warning only did 4998 out of 5000 calls before reaching 10s
06:46:45 I periodic.go:533> T002 ended after 10.001967241s : 4998 calls. qps=499.7016966334614
06:46:45 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:46:45 I periodic.go:533> T003 ended after 10.002070616s : 4998 calls. qps=499.6965320365621
Ended after 10.002097768s : 19994 calls. qps=1999
Aggregated Sleep Time : count 19993 avg -0.0060528953 +/- 0.01435 min -0.097260991 max 0.001396097 sum -121.015537
# range, mid point, percentile, count
>= -0.097261 <= -0.001 , -0.0491305 , 42.70, 8538
> -0.001 <= 0 , -0.0005 , 65.50, 4558
> 0 <= 0.001 , 0.0005 , 98.61, 6619
> 0.001 <= 0.0013961 , 0.00119805 , 100.00, 278
# target 50% -0.000680013
WARNING 42.70% of sleep were falling behind
Aggregated Function Time : count 19994 avg 0.0017261316 +/- 0.001248 min 0.00040232 max 0.039988174 sum 34.5122748
# range, mid point, percentile, count
>= 0.00040232 <= 0.0005 , 0.00045116 , 0.04, 8
> 0.0005 <= 0.0006 , 0.00055 , 0.33, 58
> 0.0006 <= 0.0007 , 0.00065 , 1.73, 279
> 0.0007 <= 0.0008 , 0.00075 , 5.01, 656
> 0.0008 <= 0.0009 , 0.00085 , 10.93, 1185
> 0.0009 <= 0.001 , 0.00095 , 17.84, 1380
> 0.001 <= 0.0011 , 0.00105 , 22.29, 890
> 0.0011 <= 0.0012 , 0.00115 , 25.75, 693
> 0.0012 <= 0.0014 , 0.0013 , 32.08, 1266
> 0.0014 <= 0.0016 , 0.0015 , 46.19, 2821
> 0.0016 <= 0.0018 , 0.0017 , 66.88, 4135
> 0.0018 <= 0.002 , 0.0019 , 80.26, 2677
> 0.002 <= 0.0025 , 0.00225 , 91.83, 2313
> 0.0025 <= 0.003 , 0.00275 , 95.75, 784
> 0.003 <= 0.0035 , 0.00325 , 96.76, 201
> 0.0035 <= 0.004 , 0.00375 , 97.97, 243
> 0.004 <= 0.0045 , 0.00425 , 98.56, 117
> 0.0045 <= 0.005 , 0.00475 , 98.96, 80
> 0.005 <= 0.006 , 0.0055 , 99.40, 89
> 0.006 <= 0.007 , 0.0065 , 99.57, 33
> 0.007 <= 0.008 , 0.0075 , 99.62, 10
> 0.012 <= 0.014 , 0.013 , 99.64, 5
> 0.014 <= 0.016 , 0.015 , 99.79, 30
> 0.016 <= 0.018 , 0.017 , 99.93, 28
> 0.018 <= 0.02 , 0.019 , 99.98, 9
> 0.035 <= 0.0399882 , 0.0374941 , 100.00, 4
# target 50% 0.00163681
# target 75% 0.00192137
# target 90% 0.0024208
# target 99% 0.00509056
# target 99.9% 0.0175004
Ping SERVING : 19994
All done 19994 calls (plus 4 warmup) 1.726 ms avg, 1999.0 qps
Successfully wrote 4463 bytes of Json data to /data/2018-11-19-064635_grpc_istio_2000qps_10s_echo_0_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:46:45 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:46:45 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:46:55 I periodic.go:533> T002 ended after 10.000462643s : 5000 calls. qps=499.9768689201432
06:46:55 I periodic.go:533> T000 ended after 10.000921372s : 5000 calls. qps=499.95393564424074
06:46:55 I periodic.go:533> T003 ended after 10.001544876s : 5000 calls. qps=499.922768131366
06:46:55 I periodic.go:533> T001 ended after 10.001567759s : 5000 calls. qps=499.92162433741504
Ended after 10.001580557s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0014198869 +/- 0.0003969 min -0.003971383 max 0.001814257 sum 28.3920577
Aggregated Function Time : count 20000 avg 0.00034968726 +/- 0.0002824 min 8.1455e-05 max 0.0057357 sum 6.99374527
# range, mid point, percentile, count
>= 8.1455e-05 <= 0.0001 , 9.07275e-05 , 0.01, 3
> 0.0001 <= 0.0002 , 0.00015 , 3.54, 705
> 0.0002 <= 0.0003 , 0.00025 , 45.20, 8333
> 0.0003 <= 0.0004 , 0.00035 , 84.34, 7828
> 0.0004 <= 0.0005 , 0.00045 , 94.79, 2089
> 0.0005 <= 0.0006 , 0.00055 , 97.27, 495
> 0.0006 <= 0.0007 , 0.00065 , 97.84, 116
> 0.0007 <= 0.0008 , 0.00075 , 98.04, 39
> 0.0008 <= 0.0009 , 0.00085 , 98.33, 58
> 0.0009 <= 0.001 , 0.00095 , 98.62, 58
> 0.001 <= 0.0011 , 0.00105 , 98.80, 35
> 0.0011 <= 0.0012 , 0.00115 , 98.89, 19
> 0.0012 <= 0.0014 , 0.0013 , 99.06, 34
> 0.0014 <= 0.0016 , 0.0015 , 99.24, 36
> 0.0016 <= 0.0018 , 0.0017 , 99.28, 8
> 0.0018 <= 0.002 , 0.0019 , 99.44, 33
> 0.002 <= 0.0025 , 0.00225 , 99.50, 10
> 0.0025 <= 0.003 , 0.00275 , 99.60, 21
> 0.003 <= 0.0035 , 0.00325 , 99.72, 24
> 0.0035 <= 0.004 , 0.00375 , 99.85, 26
> 0.004 <= 0.0045 , 0.00425 , 99.93, 16
> 0.0045 <= 0.005 , 0.00475 , 99.98, 10
> 0.005 <= 0.0057357 , 0.00536785 , 100.00, 4
# target 50% 0.000312251
# target 75% 0.000376124
# target 90% 0.000454141
# target 99% 0.00132941
# target 99.9% 0.0043125
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.350 ms avg, 1999.7 qps
Successfully wrote 4383 bytes of Json data to /data/2018-11-19-064645_http_baseline_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:46:55 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:46:55 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:05 I periodic.go:533> T001 ended after 10.00080335s : 5000 calls. qps=499.9598357265969
06:47:05 I periodic.go:533> T003 ended after 10.001260483s : 5000 calls. qps=499.9369837930858
06:47:05 I periodic.go:533> T002 ended after 10.001414911s : 5000 calls. qps=499.9292644584496
06:47:05 I periodic.go:533> T000 ended after 10.001629974s : 5000 calls. qps=499.91851458191127
Ended after 10.001721065s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010654807 +/- 0.000498 min -0.004063401 max 0.00149908 sum 21.3053519
Aggregated Function Time : count 20000 avg 0.00069897203 +/- 0.0003263 min 0.000327791 max 0.005878959 sum 13.9794406
# range, mid point, percentile, count
>= 0.000327791 <= 0.0004 , 0.000363895 , 0.01, 3
> 0.0004 <= 0.0005 , 0.00045 , 0.33, 62
> 0.0005 <= 0.0006 , 0.00055 , 25.28, 4991
> 0.0006 <= 0.0007 , 0.00065 , 72.97, 9539
> 0.0007 <= 0.0008 , 0.00075 , 90.27, 3458
> 0.0008 <= 0.0009 , 0.00085 , 94.91, 928
> 0.0009 <= 0.001 , 0.00095 , 96.71, 361
> 0.001 <= 0.0011 , 0.00105 , 97.27, 111
> 0.0011 <= 0.0012 , 0.00115 , 97.67, 80
> 0.0012 <= 0.0014 , 0.0013 , 98.19, 104
> 0.0014 <= 0.0016 , 0.0015 , 98.71, 105
> 0.0016 <= 0.0018 , 0.0017 , 99.09, 77
> 0.0018 <= 0.002 , 0.0019 , 99.22, 26
> 0.002 <= 0.0025 , 0.00225 , 99.36, 26
> 0.0025 <= 0.003 , 0.00275 , 99.46, 21
> 0.003 <= 0.0035 , 0.00325 , 99.52, 12
> 0.0035 <= 0.004 , 0.00375 , 99.60, 16
> 0.004 <= 0.0045 , 0.00425 , 99.70, 20
> 0.0045 <= 0.005 , 0.00475 , 99.92, 44
> 0.005 <= 0.00587896 , 0.00543948 , 100.00, 16
# target 50% 0.000651829
# target 75% 0.000711712
# target 90% 0.000798467
# target 99% 0.00175065
# target 99.9% 0.00495455
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.699 ms avg, 1999.7 qps
Successfully wrote 4015 bytes of Json data to /data/2018-11-19-064655_http_linkerd_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:47:05 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:47:05 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:15 W periodic.go:487> T003 warning only did 4945 out of 5000 calls before reaching 10s
06:47:15 I periodic.go:533> T003 ended after 10.002394154s : 4945 calls. qps=494.38163742252385
06:47:15 W periodic.go:487> T001 warning only did 4951 out of 5000 calls before reaching 10s
06:47:15 I periodic.go:533> T001 ended after 10.004404725s : 4951 calls. qps=494.8820180802911
06:47:15 W periodic.go:487> T000 warning only did 4941 out of 5000 calls before reaching 10s
06:47:15 I periodic.go:533> T000 ended after 10.004422992s : 4941 calls. qps=493.8815565826287
06:47:15 W periodic.go:487> T002 warning only did 4942 out of 5000 calls before reaching 10s
06:47:15 I periodic.go:533> T002 ended after 10.004449654s : 4942 calls. qps=493.98019590453725
Ended after 10.004460603s : 19779 calls. qps=1977
Aggregated Sleep Time : count 19779 avg -0.041405194 +/- 0.03267 min -0.129368021 max 0.001276474 sum -818.953338
# range, mid point, percentile, count
>= -0.129368 <= -0.001 , -0.065184 , 90.64, 17928
> -0.001 <= 0 , -0.0005 , 91.99, 267
> 0 <= 0.001 , 0.0005 , 99.95, 1575
> 0.001 <= 0.00127647 , 0.00113824 , 100.00, 9
# target 50% -0.0585605
WARNING 90.64% of sleep were falling behind
Aggregated Function Time : count 19779 avg 0.0018990382 +/- 0.0009751 min 0.000557378 max 0.028688348 sum 37.5610771
# range, mid point, percentile, count
>= 0.000557378 <= 0.0006 , 0.000578689 , 0.01, 1
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 3
> 0.0007 <= 0.0008 , 0.00075 , 0.06, 7
> 0.0008 <= 0.0009 , 0.00085 , 0.19, 27
> 0.0009 <= 0.001 , 0.00095 , 0.53, 66
> 0.001 <= 0.0011 , 0.00105 , 1.41, 175
> 0.0011 <= 0.0012 , 0.00115 , 7.94, 1291
> 0.0012 <= 0.0014 , 0.0013 , 19.56, 2299
> 0.0014 <= 0.0016 , 0.0015 , 27.52, 1574
> 0.0016 <= 0.0018 , 0.0017 , 36.44, 1764
> 0.0018 <= 0.002 , 0.0019 , 78.86, 8391
> 0.002 <= 0.0025 , 0.00225 , 94.46, 3085
> 0.0025 <= 0.003 , 0.00275 , 95.69, 243
> 0.003 <= 0.0035 , 0.00325 , 96.56, 172
> 0.0035 <= 0.004 , 0.00375 , 97.54, 194
> 0.004 <= 0.0045 , 0.00425 , 98.65, 220
> 0.0045 <= 0.005 , 0.00475 , 99.14, 96
> 0.005 <= 0.006 , 0.0055 , 99.47, 66
> 0.006 <= 0.007 , 0.0065 , 99.60, 25
> 0.01 <= 0.012 , 0.011 , 99.62, 5
> 0.012 <= 0.014 , 0.013 , 99.96, 67
> 0.014 <= 0.016 , 0.015 , 99.98, 4
> 0.025 <= 0.0286883 , 0.0268442 , 100.00, 4
# target 50% 0.00186394
# target 75% 0.0019818
# target 90% 0.00235707
# target 99% 0.00486047
# target 99.9% 0.0136484
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19779 (100.0 %)
Response Header Sizes : count 19779 avg 209 +/- 0 min 209 max 209 sum 4133811
Response Body/Total Sizes : count 19779 avg 209 +/- 0 min 209 max 209 sum 4133811
All done 19779 calls (plus 4 warmup) 1.899 ms avg, 1977.0 qps
Successfully wrote 4622 bytes of Json data to /data/2018-11-19-064705_http_istio_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:47:15 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:26 I periodic.go:533> T002 ended after 10.00084499s : 5000 calls. qps=499.9577540697389
06:47:26 I periodic.go:533> T003 ended after 10.00125741s : 5000 calls. qps=499.9371374044057
06:47:26 I periodic.go:533> T000 ended after 10.00377842s : 5000 calls. qps=499.81115035532747
06:47:26 I periodic.go:533> T001 ended after 10.003872196s : 5000 calls. qps=499.8064651404909
Ended after 10.003887663s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.00094421381 +/- 0.0005635 min -0.005291464 max 0.00161776 sum 18.8804994
Aggregated Function Time : count 20000 avg 0.00072537838 +/- 0.0003459 min 0.000194472 max 0.006999739 sum 14.5075676
# range, mid point, percentile, count
>= 0.000194472 <= 0.0002 , 0.000197236 , 0.01, 2
> 0.0002 <= 0.0003 , 0.00025 , 0.18, 35
> 0.0003 <= 0.0004 , 0.00035 , 1.30, 224
> 0.0004 <= 0.0005 , 0.00045 , 8.87, 1513
> 0.0005 <= 0.0006 , 0.00055 , 32.62, 4749
> 0.0006 <= 0.0007 , 0.00065 , 58.97, 5270
> 0.0007 <= 0.0008 , 0.00075 , 76.89, 3586
> 0.0008 <= 0.0009 , 0.00085 , 88.15, 2251
> 0.0009 <= 0.001 , 0.00095 , 93.34, 1039
> 0.001 <= 0.0011 , 0.00105 , 95.55, 440
> 0.0011 <= 0.0012 , 0.00115 , 96.44, 178
> 0.0012 <= 0.0014 , 0.0013 , 97.35, 183
> 0.0014 <= 0.0016 , 0.0015 , 97.84, 99
> 0.0016 <= 0.0018 , 0.0017 , 98.42, 115
> 0.0018 <= 0.002 , 0.0019 , 98.92, 99
> 0.002 <= 0.0025 , 0.00225 , 99.39, 95
> 0.0025 <= 0.003 , 0.00275 , 99.50, 21
> 0.003 <= 0.0035 , 0.00325 , 99.63, 27
> 0.0035 <= 0.004 , 0.00375 , 99.73, 20
> 0.004 <= 0.0045 , 0.00425 , 99.85, 24
> 0.0045 <= 0.005 , 0.00475 , 99.94, 17
> 0.005 <= 0.006 , 0.0055 , 99.98, 9
> 0.006 <= 0.00699974 , 0.00649987 , 100.00, 4
# target 50% 0.000665977
# target 75% 0.000789431
# target 90% 0.000935611
# target 99% 0.00208947
# target 99.9% 0.00479412
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.725 ms avg, 1999.2 qps
Successfully wrote 3853 bytes of Json data to /data/2018-11-19-064716_grpc_baseline_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:47:26 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:36 I periodic.go:533> T002 ended after 10.001034164s : 5000 calls. qps=499.9482971469229
06:47:36 I periodic.go:533> T000 ended after 10.001896159s : 5000 calls. qps=499.9052100236867
06:47:36 I periodic.go:533> T003 ended after 10.00211026s : 5000 calls. qps=499.8945092612886
06:47:36 I periodic.go:533> T001 ended after 10.002189242s : 5000 calls. qps=499.8905618586575
Ended after 10.00227418s : 20000 calls. qps=1999.5
Sleep times : count 19996 avg 0.00023918704 +/- 0.004498 min -0.061401597 max 0.001415873 sum 4.7827841
Aggregated Function Time : count 20000 avg 0.00099656339 +/- 0.0009632 min 0.000454931 max 0.06318164 sum 19.9312678
# range, mid point, percentile, count
>= 0.000454931 <= 0.0005 , 0.000477466 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.14, 24
> 0.0006 <= 0.0007 , 0.00065 , 1.29, 231
> 0.0007 <= 0.0008 , 0.00075 , 13.96, 2534
> 0.0008 <= 0.0009 , 0.00085 , 42.23, 5654
> 0.0009 <= 0.001 , 0.00095 , 72.58, 6071
> 0.001 <= 0.0011 , 0.00105 , 88.23, 3130
> 0.0011 <= 0.0012 , 0.00115 , 93.34, 1022
> 0.0012 <= 0.0014 , 0.0013 , 96.16, 563
> 0.0014 <= 0.0016 , 0.0015 , 97.04, 176
> 0.0016 <= 0.0018 , 0.0017 , 97.60, 112
> 0.0018 <= 0.002 , 0.0019 , 98.19, 118
> 0.002 <= 0.0025 , 0.00225 , 99.06, 173
> 0.0025 <= 0.003 , 0.00275 , 99.25, 38
> 0.003 <= 0.0035 , 0.00325 , 99.31, 14
> 0.0035 <= 0.004 , 0.00375 , 99.44, 25
> 0.004 <= 0.0045 , 0.00425 , 99.55, 22
> 0.0045 <= 0.005 , 0.00475 , 99.68, 26
> 0.005 <= 0.006 , 0.0055 , 99.92, 49
> 0.006 <= 0.007 , 0.0065 , 99.96, 7
> 0.007 <= 0.008 , 0.0075 , 99.97, 3
> 0.008 <= 0.009 , 0.0085 , 99.98, 1
> 0.06 <= 0.0631816 , 0.0615908 , 100.00, 4
# target 50% 0.000925597
# target 75% 0.00101543
# target 90% 0.00113454
# target 99% 0.00246821
# target 99.9% 0.00589796
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.997 ms avg, 1999.5 qps
Successfully wrote 3834 bytes of Json data to /data/2018-11-19-064726_grpc_linkerd_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:47:36 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:46 I periodic.go:533> T002 ended after 10.014229823s : 5000 calls. qps=499.2895198506769
06:47:46 I periodic.go:533> T000 ended after 10.015683778s : 5000 calls. qps=499.21703907852753
06:47:46 I periodic.go:533> T003 ended after 10.015833411s : 5000 calls. qps=499.20958095296345
06:47:46 I periodic.go:533> T001 ended after 10.01598159s : 5000 calls. qps=499.20219551841245
Ended after 10.015999717s : 20000 calls. qps=1996.8
Aggregated Sleep Time : count 19996 avg -0.0074626914 +/- 0.01624 min -0.112977601 max 0.001377214 sum -149.223976
# range, mid point, percentile, count
>= -0.112978 <= -0.001 , -0.0569888 , 45.43, 9084
> -0.001 <= 0 , -0.0005 , 71.65, 5243
> 0 <= 0.001 , 0.0005 , 98.44, 5358
> 0.001 <= 0.00137721 , 0.00118861 , 100.00, 311
# target 50% -0.000825672
WARNING 45.43% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017545616 +/- 0.001216 min 0.000442895 max 0.025046899 sum 35.0912327
# range, mid point, percentile, count
>= 0.000442895 <= 0.0005 , 0.000471448 , 0.03, 5
> 0.0005 <= 0.0006 , 0.00055 , 0.28, 52
> 0.0006 <= 0.0007 , 0.00065 , 1.60, 264
> 0.0007 <= 0.0008 , 0.00075 , 5.01, 681
> 0.0008 <= 0.0009 , 0.00085 , 11.03, 1203
> 0.0009 <= 0.001 , 0.00095 , 17.58, 1311
> 0.001 <= 0.0011 , 0.00105 , 22.16, 915
> 0.0011 <= 0.0012 , 0.00115 , 25.57, 682
> 0.0012 <= 0.0014 , 0.0013 , 32.00, 1287
> 0.0014 <= 0.0016 , 0.0015 , 44.93, 2586
> 0.0016 <= 0.0018 , 0.0017 , 63.73, 3761
> 0.0018 <= 0.002 , 0.0019 , 78.00, 2853
> 0.002 <= 0.0025 , 0.00225 , 90.87, 2574
> 0.0025 <= 0.003 , 0.00275 , 95.15, 856
> 0.003 <= 0.0035 , 0.00325 , 96.45, 261
> 0.0035 <= 0.004 , 0.00375 , 97.89, 288
> 0.004 <= 0.0045 , 0.00425 , 98.53, 127
> 0.0045 <= 0.005 , 0.00475 , 98.92, 79
> 0.005 <= 0.006 , 0.0055 , 99.36, 87
> 0.006 <= 0.007 , 0.0065 , 99.53, 35
> 0.007 <= 0.008 , 0.0075 , 99.59, 11
> 0.009 <= 0.01 , 0.0095 , 99.60, 2
> 0.012 <= 0.014 , 0.013 , 99.61, 2
> 0.014 <= 0.016 , 0.015 , 99.78, 33
> 0.016 <= 0.018 , 0.017 , 99.94, 33
> 0.018 <= 0.02 , 0.019 , 99.98, 8
> 0.02 <= 0.025 , 0.0225 , 100.00, 3
> 0.025 <= 0.0250469 , 0.0250234 , 100.00, 1
# target 50% 0.00165392
# target 75% 0.00195794
# target 90% 0.0024662
# target 99% 0.00517241
# target 99.9% 0.0175152
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.755 ms avg, 1996.8 qps
Successfully wrote 4389 bytes of Json data to /data/2018-11-19-064736_grpc_istio_2000qps_10s_echo_1_7.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:47:46 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:47:46 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:47:56 I periodic.go:533> T000 ended after 10.000501762s : 5000 calls. qps=499.9749131587623
06:47:56 I periodic.go:533> T002 ended after 10.000895639s : 5000 calls. qps=499.9552220604869
06:47:56 I periodic.go:533> T001 ended after 10.003122064s : 5000 calls. qps=499.84394552120705
06:47:56 I periodic.go:533> T003 ended after 10.003170669s : 5000 calls. qps=499.841516799777
Ended after 10.003195429s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014109786 +/- 0.0004388 min -0.004257671 max 0.001791066 sum 28.2139285
Aggregated Function Time : count 20000 avg 0.00035275611 +/- 0.0002851 min 0.000103371 max 0.006089885 sum 7.05512221
# range, mid point, percentile, count
>= 0.000103371 <= 0.0002 , 0.000151685 , 3.31, 661
> 0.0002 <= 0.0003 , 0.00025 , 42.33, 7804
> 0.0003 <= 0.0004 , 0.00035 , 83.70, 8276
> 0.0004 <= 0.0005 , 0.00045 , 94.95, 2249
> 0.0005 <= 0.0006 , 0.00055 , 97.31, 472
> 0.0006 <= 0.0007 , 0.00065 , 97.93, 124
> 0.0007 <= 0.0008 , 0.00075 , 98.24, 62
> 0.0008 <= 0.0009 , 0.00085 , 98.42, 35
> 0.0009 <= 0.001 , 0.00095 , 98.72, 60
> 0.001 <= 0.0011 , 0.00105 , 98.83, 22
> 0.0011 <= 0.0012 , 0.00115 , 98.95, 26
> 0.0012 <= 0.0014 , 0.0013 , 99.08, 26
> 0.0014 <= 0.0016 , 0.0015 , 99.20, 23
> 0.0016 <= 0.0018 , 0.0017 , 99.31, 22
> 0.0018 <= 0.002 , 0.0019 , 99.45, 28
> 0.002 <= 0.0025 , 0.00225 , 99.50, 10
> 0.0025 <= 0.003 , 0.00275 , 99.58, 17
> 0.003 <= 0.0035 , 0.00325 , 99.67, 16
> 0.0035 <= 0.004 , 0.00375 , 99.83, 34
> 0.004 <= 0.0045 , 0.00425 , 99.94, 22
> 0.0045 <= 0.005 , 0.00475 , 99.98, 7
> 0.006 <= 0.00608988 , 0.00604494 , 100.00, 4
# target 50% 0.000318548
# target 75% 0.000378963
# target 90% 0.00045598
# target 99% 0.00126923
# target 99.9% 0.00429545
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.353 ms avg, 1999.4 qps
Successfully wrote 4282 bytes of Json data to /data/2018-11-19-064746_http_baseline_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:47:56 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:47:56 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:06 I periodic.go:533> T003 ended after 10.000799286s : 5000 calls. qps=499.9600388940353
06:48:06 I periodic.go:533> T000 ended after 10.001335143s : 5000 calls. qps=499.93325176184425
06:48:06 I periodic.go:533> T002 ended after 10.001447345s : 5000 calls. qps=499.92764322252197
06:48:06 I periodic.go:533> T001 ended after 10.001570133s : 5000 calls. qps=499.9215056746531
Ended after 10.001696139s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.0010742591 +/- 0.0005154 min -0.004159365 max 0.001509901 sum 21.4808847
Aggregated Function Time : count 20000 avg 0.0006798759 +/- 0.0003535 min 0.000379308 max 0.005623923 sum 13.5975179
# range, mid point, percentile, count
>= 0.000379308 <= 0.0004 , 0.000389654 , 0.03, 6
> 0.0004 <= 0.0005 , 0.00045 , 1.11, 217
> 0.0005 <= 0.0006 , 0.00055 , 42.30, 8237
> 0.0006 <= 0.0007 , 0.00065 , 78.91, 7321
> 0.0007 <= 0.0008 , 0.00075 , 91.85, 2589
> 0.0008 <= 0.0009 , 0.00085 , 95.21, 672
> 0.0009 <= 0.001 , 0.00095 , 96.59, 276
> 0.001 <= 0.0011 , 0.00105 , 96.97, 76
> 0.0011 <= 0.0012 , 0.00115 , 97.31, 69
> 0.0012 <= 0.0014 , 0.0013 , 97.78, 93
> 0.0014 <= 0.0016 , 0.0015 , 98.39, 121
> 0.0016 <= 0.0018 , 0.0017 , 98.73, 69
> 0.0018 <= 0.002 , 0.0019 , 99.00, 54
> 0.002 <= 0.0025 , 0.00225 , 99.28, 56
> 0.0025 <= 0.003 , 0.00275 , 99.36, 16
> 0.003 <= 0.0035 , 0.00325 , 99.48, 24
> 0.0035 <= 0.004 , 0.00375 , 99.58, 20
> 0.004 <= 0.0045 , 0.00425 , 99.70, 24
> 0.0045 <= 0.005 , 0.00475 , 99.83, 27
> 0.005 <= 0.00562392 , 0.00531196 , 100.00, 33
# target 50% 0.000621035
# target 75% 0.000689332
# target 90% 0.000785709
# target 99% 0.002
# target 99.9% 0.00524579
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.680 ms avg, 1999.7 qps
Successfully wrote 3987 bytes of Json data to /data/2018-11-19-064756_http_linkerd_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:48:06 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:48:06 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:16 W periodic.go:487> T002 warning only did 4919 out of 5000 calls before reaching 10s
06:48:16 I periodic.go:533> T002 ended after 10.000826714s : 4919 calls. qps=491.8593372999823
06:48:16 W periodic.go:487> T000 warning only did 4913 out of 5000 calls before reaching 10s
06:48:16 I periodic.go:533> T000 ended after 10.002782746s : 4913 calls. qps=491.16332172311286
06:48:16 W periodic.go:487> T003 warning only did 4914 out of 5000 calls before reaching 10s
06:48:16 I periodic.go:533> T003 ended after 10.002803205s : 4914 calls. qps=491.2622891094857
06:48:16 W periodic.go:487> T001 warning only did 4918 out of 5000 calls before reaching 10s
06:48:16 I periodic.go:533> T001 ended after 10.002830025s : 4918 calls. qps=491.66085874782226
Ended after 10.002843268s : 19664 calls. qps=1965.8
Aggregated Sleep Time : count 19664 avg -0.069662656 +/- 0.05924 min -0.184375428 max 0.001095643 sum -1369.84648
# range, mid point, percentile, count
>= -0.184375 <= -0.001 , -0.0926877 , 91.28, 17949
> -0.001 <= 0 , -0.0005 , 92.05, 151
> 0 <= 0.001 , 0.0005 , 99.98, 1560
> 0.001 <= 0.00109564 , 0.00104782 , 100.00, 4
# target 50% -0.0839317
WARNING 91.28% of sleep were falling behind
Aggregated Function Time : count 19664 avg 0.0019045463 +/- 0.001027 min 0.000653409 max 0.029307408 sum 37.4509991
# range, mid point, percentile, count
>= 0.000653409 <= 0.0007 , 0.000676704 , 0.01, 2
> 0.0007 <= 0.0008 , 0.00075 , 0.05, 8
> 0.0008 <= 0.0009 , 0.00085 , 0.14, 18
> 0.0009 <= 0.001 , 0.00095 , 0.39, 49
> 0.001 <= 0.0011 , 0.00105 , 1.08, 135
> 0.0011 <= 0.0012 , 0.00115 , 6.09, 985
> 0.0012 <= 0.0014 , 0.0013 , 19.00, 2539
> 0.0014 <= 0.0016 , 0.0015 , 27.87, 1744
> 0.0016 <= 0.0018 , 0.0017 , 40.69, 2521
> 0.0018 <= 0.002 , 0.0019 , 78.75, 7484
> 0.002 <= 0.0025 , 0.00225 , 94.52, 3101
> 0.0025 <= 0.003 , 0.00275 , 95.72, 236
> 0.003 <= 0.0035 , 0.00325 , 96.52, 157
> 0.0035 <= 0.004 , 0.00375 , 97.69, 231
> 0.004 <= 0.0045 , 0.00425 , 98.60, 178
> 0.0045 <= 0.005 , 0.00475 , 98.96, 71
> 0.005 <= 0.006 , 0.0055 , 99.38, 84
> 0.006 <= 0.007 , 0.0065 , 99.57, 37
> 0.007 <= 0.008 , 0.0075 , 99.61, 8
> 0.012 <= 0.014 , 0.013 , 99.86, 48
> 0.014 <= 0.016 , 0.015 , 99.97, 22
> 0.016 <= 0.018 , 0.017 , 99.98, 2
> 0.025 <= 0.0293074 , 0.0271537 , 100.00, 4
# target 50% 0.00184893
# target 75% 0.0019803
# target 90% 0.00235676
# target 99% 0.00509952
# target 99.9% 0.0147578
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19664 (100.0 %)
Response Header Sizes : count 19664 avg 209 +/- 0 min 209 max 209 sum 4109776
Response Body/Total Sizes : count 19664 avg 209 +/- 0 min 209 max 209 sum 4109776
All done 19664 calls (plus 4 warmup) 1.905 ms avg, 1965.8 qps
Successfully wrote 4598 bytes of Json data to /data/2018-11-19-064806_http_istio_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:48:16 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:26 I periodic.go:533> T003 ended after 10.000730699s : 5000 calls. qps=499.96346771941006
06:48:26 I periodic.go:533> T000 ended after 10.001155485s : 5000 calls. qps=499.94223242495667
06:48:26 I periodic.go:533> T001 ended after 10.003410543s : 5000 calls. qps=499.8295309891892
06:48:26 I periodic.go:533> T002 ended after 10.003565207s : 5000 calls. qps=499.8218031808547
Ended after 10.003583071s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.0010921407 +/- 0.0004796 min -0.003948008 max 0.001767673 sum 21.8384451
Aggregated Function Time : count 20000 avg 0.0006413353 +/- 0.0003201 min 0.000179678 max 0.005603973 sum 12.826706
# range, mid point, percentile, count
>= 0.000179678 <= 0.0002 , 0.000189839 , 0.01, 3
> 0.0002 <= 0.0003 , 0.00025 , 0.24, 46
> 0.0003 <= 0.0004 , 0.00035 , 1.99, 348
> 0.0004 <= 0.0005 , 0.00045 , 14.23, 2449
> 0.0005 <= 0.0006 , 0.00055 , 54.42, 8039
> 0.0006 <= 0.0007 , 0.00065 , 82.07, 5529
> 0.0007 <= 0.0008 , 0.00075 , 93.01, 2188
> 0.0008 <= 0.0009 , 0.00085 , 95.75, 547
> 0.0009 <= 0.001 , 0.00095 , 96.75, 201
> 0.001 <= 0.0011 , 0.00105 , 97.09, 68
> 0.0011 <= 0.0012 , 0.00115 , 97.27, 36
> 0.0012 <= 0.0014 , 0.0013 , 97.71, 88
> 0.0014 <= 0.0016 , 0.0015 , 98.14, 85
> 0.0016 <= 0.0018 , 0.0017 , 98.72, 118
> 0.0018 <= 0.002 , 0.0019 , 99.14, 84
> 0.002 <= 0.0025 , 0.00225 , 99.43, 57
> 0.0025 <= 0.003 , 0.00275 , 99.50, 15
> 0.003 <= 0.0035 , 0.00325 , 99.61, 20
> 0.0035 <= 0.004 , 0.00375 , 99.72, 24
> 0.004 <= 0.0045 , 0.00425 , 99.86, 28
> 0.0045 <= 0.005 , 0.00475 , 99.97, 22
> 0.005 <= 0.00560397 , 0.00530199 , 100.00, 5
# target 50% 0.000588991
# target 75% 0.000674426
# target 90% 0.000772486
# target 99% 0.00193095
# target 99.9% 0.00465909
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.641 ms avg, 1999.3 qps
Successfully wrote 3742 bytes of Json data to /data/2018-11-19-064816_grpc_baseline_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:48:26 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:36 I periodic.go:533> T001 ended after 10.001772513s : 5000 calls. qps=499.9113900562277
06:48:36 I periodic.go:533> T003 ended after 10.003107602s : 5000 calls. qps=499.8446681709503
06:48:36 I periodic.go:533> T000 ended after 10.003296989s : 5000 calls. qps=499.83520488276883
06:48:36 I periodic.go:533> T002 ended after 10.003332045s : 5000 calls. qps=499.83345324412846
Ended after 10.003353916s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.00017651683 +/- 0.004724 min -0.063740045 max 0.001305558 sum 3.52963056
Aggregated Function Time : count 20000 avg 0.0010282173 +/- 0.0009918 min 0.000514127 max 0.065605174 sum 20.5643459
# range, mid point, percentile, count
>= 0.000514127 <= 0.0006 , 0.000557063 , 0.10, 19
> 0.0006 <= 0.0007 , 0.00065 , 0.72, 125
> 0.0007 <= 0.0008 , 0.00075 , 9.80, 1816
> 0.0008 <= 0.0009 , 0.00085 , 32.77, 4593
> 0.0009 <= 0.001 , 0.00095 , 63.80, 6206
> 0.001 <= 0.0011 , 0.00105 , 84.31, 4104
> 0.0011 <= 0.0012 , 0.00115 , 91.91, 1518
> 0.0012 <= 0.0014 , 0.0013 , 95.84, 787
> 0.0014 <= 0.0016 , 0.0015 , 96.67, 167
> 0.0016 <= 0.0018 , 0.0017 , 97.39, 144
> 0.0018 <= 0.002 , 0.0019 , 98.05, 131
> 0.002 <= 0.0025 , 0.00225 , 98.95, 180
> 0.0025 <= 0.003 , 0.00275 , 99.22, 54
> 0.003 <= 0.0035 , 0.00325 , 99.31, 17
> 0.0035 <= 0.004 , 0.00375 , 99.39, 18
> 0.004 <= 0.0045 , 0.00425 , 99.55, 31
> 0.0045 <= 0.005 , 0.00475 , 99.74, 38
> 0.005 <= 0.006 , 0.0055 , 99.93, 38
> 0.006 <= 0.007 , 0.0065 , 99.98, 10
> 0.06 <= 0.0656052 , 0.0628026 , 100.00, 4
# target 50% 0.000955543
# target 75% 0.00105461
# target 90% 0.0011749
# target 99% 0.00259259
# target 99.9% 0.00584211
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.028 ms avg, 1999.3 qps
Successfully wrote 3500 bytes of Json data to /data/2018-11-19-064826_grpc_linkerd_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:48:36 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:46 I periodic.go:533> T001 ended after 10.015288748s : 5000 calls. qps=499.2367295449643
06:48:46 I periodic.go:533> T002 ended after 10.016347933s : 5000 calls. qps=499.1839374435996
06:48:46 I periodic.go:533> T003 ended after 10.017269036s : 5000 calls. qps=499.1380367274784
06:48:46 I periodic.go:533> T000 ended after 10.017330822s : 5000 calls. qps=499.13495808873864
Ended after 10.017351506s : 20000 calls. qps=1996.5
Aggregated Sleep Time : count 19996 avg -0.0098884221 +/- 0.01955 min -0.123091996 max 0.001442662 sum -197.728889
# range, mid point, percentile, count
>= -0.123092 <= -0.001 , -0.062046 , 50.49, 10095
> -0.001 <= 0 , -0.0005 , 72.58, 4419
> 0 <= 0.001 , 0.0005 , 98.77, 5237
> 0.001 <= 0.00144266 , 0.00122133 , 100.00, 245
# target 50% -0.00217326
WARNING 50.49% of sleep were falling behind
Aggregated Function Time : count 20000 avg 0.0017597235 +/- 0.001241 min 0.00046936 max 0.024102342 sum 35.1944708
# range, mid point, percentile, count
>= 0.00046936 <= 0.0005 , 0.00048468 , 0.04, 9
> 0.0005 <= 0.0006 , 0.00055 , 0.30, 51
> 0.0006 <= 0.0007 , 0.00065 , 1.66, 271
> 0.0007 <= 0.0008 , 0.00075 , 5.19, 707
> 0.0008 <= 0.0009 , 0.00085 , 11.51, 1263
> 0.0009 <= 0.001 , 0.00095 , 17.75, 1250
> 0.001 <= 0.0011 , 0.00105 , 22.41, 930
> 0.0011 <= 0.0012 , 0.00115 , 26.02, 724
> 0.0012 <= 0.0014 , 0.0013 , 32.28, 1252
> 0.0014 <= 0.0016 , 0.0015 , 43.68, 2279
> 0.0016 <= 0.0018 , 0.0017 , 62.98, 3860
> 0.0018 <= 0.002 , 0.0019 , 78.63, 3130
> 0.002 <= 0.0025 , 0.00225 , 90.62, 2398
> 0.0025 <= 0.003 , 0.00275 , 95.10, 896
> 0.003 <= 0.0035 , 0.00325 , 96.37, 254
> 0.0035 <= 0.004 , 0.00375 , 97.73, 272
> 0.004 <= 0.0045 , 0.00425 , 98.39, 132
> 0.0045 <= 0.005 , 0.00475 , 98.78, 78
> 0.005 <= 0.006 , 0.0055 , 99.30, 104
> 0.006 <= 0.007 , 0.0065 , 99.54, 48
> 0.007 <= 0.008 , 0.0075 , 99.60, 12
> 0.012 <= 0.014 , 0.013 , 99.61, 2
> 0.014 <= 0.016 , 0.015 , 99.74, 26
> 0.016 <= 0.018 , 0.017 , 99.92, 37
> 0.018 <= 0.02 , 0.019 , 99.94, 4
> 0.02 <= 0.0241023 , 0.0220512 , 100.00, 11
# target 50% 0.00166549
# target 75% 0.00195361
# target 90% 0.00247415
# target 99% 0.00542308
# target 99.9% 0.0177297
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.760 ms avg, 1996.5 qps
Successfully wrote 4159 bytes of Json data to /data/2018-11-19-064836_grpc_istio_2000qps_10s_echo_0_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:48:46 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:48:46 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:48:56 I periodic.go:533> T000 ended after 10.000425628s : 5000 calls. qps=499.9787195057574
06:48:56 I periodic.go:533> T002 ended after 10.000799014s : 5000 calls. qps=499.9600524918618
06:48:56 I periodic.go:533> T003 ended after 10.003132999s : 5000 calls. qps=499.8433991130422
06:48:56 I periodic.go:533> T001 ended after 10.003169265s : 5000 calls. qps=499.8415869552918
Ended after 10.003210796s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0013818387 +/- 0.0007831 min -0.019447764 max 0.00184112 sum 27.6312474
Aggregated Function Time : count 20000 avg 0.0003616799 +/- 0.0002887 min 9.0903e-05 max 0.00450544 sum 7.23359792
# range, mid point, percentile, count
>= 9.0903e-05 <= 0.0001 , 9.54515e-05 , 0.01, 2
> 0.0001 <= 0.0002 , 0.00015 , 3.25, 649
> 0.0002 <= 0.0003 , 0.00025 , 41.98, 7746
> 0.0003 <= 0.0004 , 0.00035 , 83.30, 8262
> 0.0004 <= 0.0005 , 0.00045 , 94.35, 2211
> 0.0005 <= 0.0006 , 0.00055 , 96.53, 437
> 0.0006 <= 0.0007 , 0.00065 , 97.17, 128
> 0.0007 <= 0.0008 , 0.00075 , 97.50, 65
> 0.0008 <= 0.0009 , 0.00085 , 97.70, 40
> 0.0009 <= 0.001 , 0.00095 , 98.02, 64
> 0.001 <= 0.0011 , 0.00105 , 98.14, 24
> 0.0011 <= 0.0012 , 0.00115 , 98.25, 23
> 0.0012 <= 0.0014 , 0.0013 , 98.49, 47
> 0.0014 <= 0.0016 , 0.0015 , 98.59, 20
> 0.0016 <= 0.0018 , 0.0017 , 98.72, 27
> 0.0018 <= 0.002 , 0.0019 , 99.42, 138
> 0.002 <= 0.0025 , 0.00225 , 99.55, 26
> 0.0025 <= 0.003 , 0.00275 , 99.66, 22
> 0.003 <= 0.0035 , 0.00325 , 99.81, 32
> 0.0035 <= 0.004 , 0.00375 , 99.92, 20
> 0.004 <= 0.0045 , 0.00425 , 100.00, 16
> 0.0045 <= 0.00450544 , 0.00450272 , 100.00, 1
# target 50% 0.000319402
# target 75% 0.00037992
# target 90% 0.000460651
# target 99% 0.00187971
# target 99.9% 0.003925
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.362 ms avg, 1999.4 qps
Successfully wrote 4281 bytes of Json data to /data/2018-11-19-064846_http_baseline_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:48:56 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:48:56 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:06 I periodic.go:533> T002 ended after 10.000602876s : 5000 calls. qps=499.9698580171878
06:49:06 I periodic.go:533> T001 ended after 10.001240959s : 5000 calls. qps=499.9379597489408
06:49:06 I periodic.go:533> T000 ended after 10.001447615s : 5000 calls. qps=499.92762972642936
06:49:06 I periodic.go:533> T003 ended after 10.001474262s : 5000 calls. qps=499.9262977656403
Ended after 10.001596186s : 20000 calls. qps=1999.7
Sleep times : count 19996 avg 0.00097035956 +/- 0.0006226 min -0.01130164 max 0.001450759 sum 19.4033097
Aggregated Function Time : count 20000 avg 0.00072931177 +/- 0.0003457 min 0.000351676 max 0.00582526 sum 14.5862354
# range, mid point, percentile, count
>= 0.000351676 <= 0.0004 , 0.000375838 , 0.05, 10
> 0.0004 <= 0.0005 , 0.00045 , 0.92, 173
> 0.0005 <= 0.0006 , 0.00055 , 19.84, 3786
> 0.0006 <= 0.0007 , 0.00065 , 64.67, 8966
> 0.0007 <= 0.0008 , 0.00075 , 83.41, 3746
> 0.0008 <= 0.0009 , 0.00085 , 91.44, 1607
> 0.0009 <= 0.001 , 0.00095 , 95.12, 737
> 0.001 <= 0.0011 , 0.00105 , 96.28, 231
> 0.0011 <= 0.0012 , 0.00115 , 97.00, 145
> 0.0012 <= 0.0014 , 0.0013 , 97.75, 148
> 0.0014 <= 0.0016 , 0.0015 , 98.28, 106
> 0.0016 <= 0.0018 , 0.0017 , 98.72, 89
> 0.0018 <= 0.002 , 0.0019 , 99.05, 65
> 0.002 <= 0.0025 , 0.00225 , 99.25, 40
> 0.0025 <= 0.003 , 0.00275 , 99.33, 17
> 0.003 <= 0.0035 , 0.00325 , 99.52, 37
> 0.0035 <= 0.004 , 0.00375 , 99.58, 12
> 0.004 <= 0.0045 , 0.00425 , 99.73, 31
> 0.0045 <= 0.005 , 0.00475 , 99.94, 42
> 0.005 <= 0.00582526 , 0.00541263 , 100.00, 12
# target 50% 0.000667265
# target 75% 0.000755125
# target 90% 0.000882078
# target 99% 0.00197231
# target 99.9% 0.00490476
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.729 ms avg, 1999.7 qps
Successfully wrote 4030 bytes of Json data to /data/2018-11-19-064856_http_linkerd_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:49:06 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:49:06 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:16 W periodic.go:487> T001 warning only did 4870 out of 5000 calls before reaching 10s
06:49:16 I periodic.go:533> T001 ended after 10.001888398s : 4870 calls. qps=486.90805238077
06:49:16 W periodic.go:487> T003 warning only did 4864 out of 5000 calls before reaching 10s
06:49:16 I periodic.go:533> T003 ended after 10.004009473s : 4864 calls. qps=486.2050573949911
06:49:16 W periodic.go:487> T000 warning only did 4862 out of 5000 calls before reaching 10s
06:49:16 I periodic.go:533> T000 ended after 10.004027634s : 4862 calls. qps=486.0042552737315
06:49:16 W periodic.go:487> T002 warning only did 4869 out of 5000 calls before reaching 10s
06:49:16 I periodic.go:533> T002 ended after 10.004040879s : 4869 calls. qps=486.7033290738316
Ended after 10.004072667s : 19465 calls. qps=1945.7
Aggregated Sleep Time : count 19465 avg -0.14942433 +/- 0.08809 min -0.283857065 max 0.001247556 sum -2908.54458
# range, mid point, percentile, count
>= -0.283857 <= -0.001 , -0.142429 , 91.20, 17752
> -0.001 <= 0 , -0.0005 , 92.11, 178
> 0 <= 0.001 , 0.0005 , 99.98, 1532
> 0.001 <= 0.00124756 , 0.00112378 , 100.00, 3
# target 50% -0.128788
WARNING 91.20% of sleep were falling behind
Aggregated Function Time : count 19465 avg 0.0019364914 +/- 0.001053 min 0.000565747 max 0.034417493 sum 37.6938057
# range, mid point, percentile, count
>= 0.000565747 <= 0.0006 , 0.000582873 , 0.01, 2
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 2
> 0.0007 <= 0.0008 , 0.00075 , 0.04, 4
> 0.0008 <= 0.0009 , 0.00085 , 0.15, 21
> 0.0009 <= 0.001 , 0.00095 , 0.39, 47
> 0.001 <= 0.0011 , 0.00105 , 0.94, 107
> 0.0011 <= 0.0012 , 0.00115 , 3.23, 446
> 0.0012 <= 0.0014 , 0.0013 , 15.91, 2467
> 0.0014 <= 0.0016 , 0.0015 , 26.33, 2030
> 0.0016 <= 0.0018 , 0.0017 , 36.80, 2038
> 0.0018 <= 0.002 , 0.0019 , 77.38, 7898
> 0.002 <= 0.0025 , 0.00225 , 94.41, 3315
> 0.0025 <= 0.003 , 0.00275 , 95.62, 236
> 0.003 <= 0.0035 , 0.00325 , 96.32, 135
> 0.0035 <= 0.004 , 0.00375 , 97.43, 216
> 0.004 <= 0.0045 , 0.00425 , 98.39, 188
> 0.0045 <= 0.005 , 0.00475 , 98.87, 94
> 0.005 <= 0.006 , 0.0055 , 99.36, 95
> 0.006 <= 0.007 , 0.0065 , 99.56, 38
> 0.007 <= 0.008 , 0.0075 , 99.61, 10
> 0.012 <= 0.014 , 0.013 , 99.85, 46
> 0.014 <= 0.016 , 0.015 , 99.98, 26
> 0.03 <= 0.0344175 , 0.0322087 , 100.00, 4
# target 50% 0.00186504
# target 75% 0.00198827
# target 90% 0.00237051
# target 99% 0.00525632
# target 99.9% 0.0148104
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19465 (100.0 %)
Response Header Sizes : count 19465 avg 209 +/- 0 min 209 max 209 sum 4068185
Response Body/Total Sizes : count 19465 avg 209 +/- 0 min 209 max 209 sum 4068185
All done 19465 calls (plus 4 warmup) 1.936 ms avg, 1945.7 qps
Successfully wrote 4639 bytes of Json data to /data/2018-11-19-064906_http_istio_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:49:16 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:26 I periodic.go:533> T002 ended after 10.000760563s : 5000 calls. qps=499.9619747420604
06:49:26 I periodic.go:533> T003 ended after 10.001164689s : 5000 calls. qps=499.9417723317125
06:49:26 I periodic.go:533> T001 ended after 10.003384991s : 5000 calls. qps=499.830807721434
06:49:26 I periodic.go:533> T000 ended after 10.00344183s : 5000 calls. qps=499.82796771058946
Ended after 10.003455986s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.00085879103 +/- 0.002722 min -0.049883986 max 0.001720774 sum 17.1723855
Aggregated Function Time : count 20000 avg 0.00065542505 +/- 0.0007299 min 0.000190439 max 0.035208062 sum 13.108501
# range, mid point, percentile, count
>= 0.000190439 <= 0.0002 , 0.00019522 , 0.01, 2
> 0.0002 <= 0.0003 , 0.00025 , 0.38, 73
> 0.0003 <= 0.0004 , 0.00035 , 2.18, 361
> 0.0004 <= 0.0005 , 0.00045 , 15.19, 2602
> 0.0005 <= 0.0006 , 0.00055 , 53.88, 7738
> 0.0006 <= 0.0007 , 0.00065 , 82.47, 5717
> 0.0007 <= 0.0008 , 0.00075 , 92.92, 2090
> 0.0008 <= 0.0009 , 0.00085 , 95.78, 572
> 0.0009 <= 0.001 , 0.00095 , 96.70, 186
> 0.001 <= 0.0011 , 0.00105 , 97.03, 66
> 0.0011 <= 0.0012 , 0.00115 , 97.28, 49
> 0.0012 <= 0.0014 , 0.0013 , 97.65, 74
> 0.0014 <= 0.0016 , 0.0015 , 98.02, 74
> 0.0016 <= 0.0018 , 0.0017 , 98.59, 114
> 0.0018 <= 0.002 , 0.0019 , 99.02, 85
> 0.002 <= 0.0025 , 0.00225 , 99.31, 59
> 0.0025 <= 0.003 , 0.00275 , 99.42, 22
> 0.003 <= 0.0035 , 0.00325 , 99.55, 26
> 0.0035 <= 0.004 , 0.00375 , 99.67, 24
> 0.004 <= 0.0045 , 0.00425 , 99.81, 27
> 0.0045 <= 0.005 , 0.00475 , 99.91, 21
> 0.005 <= 0.006 , 0.0055 , 99.95, 9
> 0.006 <= 0.007 , 0.0065 , 99.96, 1
> 0.03 <= 0.035 , 0.0325 , 100.00, 7
> 0.035 <= 0.0352081 , 0.035104 , 100.00, 1
# target 50% 0.000589972
# target 75% 0.000673885
# target 90% 0.000772105
# target 99% 0.00199294
# target 99.9% 0.00495238
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.655 ms avg, 1999.3 qps
Successfully wrote 4079 bytes of Json data to /data/2018-11-19-064916_grpc_baseline_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:49:27 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:37 I periodic.go:533> T001 ended after 10.000971495s : 5000 calls. qps=499.9514299685543
06:49:37 I periodic.go:533> T002 ended after 10.003440542s : 5000 calls. qps=499.82803206628984
06:49:37 I periodic.go:533> T003 ended after 10.003658263s : 5000 calls. qps=499.81715373997076
06:49:37 I periodic.go:533> T000 ended after 10.003758121s : 5000 calls. qps=499.81216454083835
Ended after 10.003822666s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.00069682349 +/- 0.0007054 min -0.006750574 max 0.001415574 sum 13.9336825
Aggregated Function Time : count 20000 avg 0.00099197679 +/- 0.0004099 min 0.00044226 max 0.006684061 sum 19.8395358
# range, mid point, percentile, count
>= 0.00044226 <= 0.0005 , 0.00047113 , 0.01, 2
> 0.0005 <= 0.0006 , 0.00055 , 0.07, 12
> 0.0006 <= 0.0007 , 0.00065 , 1.23, 232
> 0.0007 <= 0.0008 , 0.00075 , 13.85, 2523
> 0.0008 <= 0.0009 , 0.00085 , 40.81, 5394
> 0.0009 <= 0.001 , 0.00095 , 70.68, 5973
> 0.001 <= 0.0011 , 0.00105 , 87.08, 3280
> 0.0011 <= 0.0012 , 0.00115 , 92.95, 1174
> 0.0012 <= 0.0014 , 0.0013 , 96.12, 635
> 0.0014 <= 0.0016 , 0.0015 , 96.83, 141
> 0.0016 <= 0.0018 , 0.0017 , 97.41, 116
> 0.0018 <= 0.002 , 0.0019 , 98.12, 142
> 0.002 <= 0.0025 , 0.00225 , 99.08, 191
> 0.0025 <= 0.003 , 0.00275 , 99.21, 27
> 0.003 <= 0.0035 , 0.00325 , 99.32, 22
> 0.0035 <= 0.004 , 0.00375 , 99.39, 14
> 0.004 <= 0.0045 , 0.00425 , 99.51, 24
> 0.0045 <= 0.005 , 0.00475 , 99.64, 27
> 0.005 <= 0.006 , 0.0055 , 99.92, 56
> 0.006 <= 0.00668406 , 0.00634203 , 100.00, 15
# target 50% 0.000930755
# target 75% 0.00102634
# target 90% 0.00114974
# target 99% 0.00246073
# target 99.9% 0.00591071
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.992 ms avg, 1999.2 qps
Successfully wrote 3482 bytes of Json data to /data/2018-11-19-064927_grpc_linkerd_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:49:37 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:47 W periodic.go:487> T003 warning only did 4992 out of 5000 calls before reaching 10s
06:49:47 I periodic.go:533> T003 ended after 10.000827967s : 4992 calls. qps=499.15867130923925
06:49:47 W periodic.go:487> T000 warning only did 4995 out of 5000 calls before reaching 10s
06:49:47 I periodic.go:533> T000 ended after 10.003219825s : 4995 calls. qps=499.3392215091104
06:49:47 W periodic.go:487> T002 warning only did 4994 out of 5000 calls before reaching 10s
06:49:47 I periodic.go:533> T002 ended after 10.003260311s : 4994 calls. qps=499.2372331357198
06:49:47 W periodic.go:487> T001 warning only did 4992 out of 5000 calls before reaching 10s
06:49:47 I periodic.go:533> T001 ended after 10.003271902s : 4992 calls. qps=499.0367200757511
Ended after 10.003283487s : 19973 calls. qps=1996.6
Aggregated Sleep Time : count 19973 avg -0.010954569 +/- 0.02238 min -0.130605839 max 0.001359361 sum -218.795599
# range, mid point, percentile, count
>= -0.130606 <= -0.001 , -0.0658029 , 50.07, 10001
> -0.001 <= 0 , -0.0005 , 74.81, 4940
> 0 <= 0.001 , 0.0005 , 98.64, 4761
> 0.001 <= 0.00135936 , 0.00117968 , 100.00, 271
# target 50% -0.00118793
WARNING 50.07% of sleep were falling behind
Aggregated Function Time : count 19973 avg 0.0017668039 +/- 0.001264 min 0.000495354 max 0.025945602 sum 35.2883736
# range, mid point, percentile, count
>= 0.000495354 <= 0.0005 , 0.000497677 , 0.01, 1
> 0.0005 <= 0.0006 , 0.00055 , 0.21, 40
> 0.0006 <= 0.0007 , 0.00065 , 1.41, 241
> 0.0007 <= 0.0008 , 0.00075 , 4.70, 657
> 0.0008 <= 0.0009 , 0.00085 , 10.70, 1198
> 0.0009 <= 0.001 , 0.00095 , 17.52, 1363
> 0.001 <= 0.0011 , 0.00105 , 21.74, 843
> 0.0011 <= 0.0012 , 0.00115 , 25.09, 669
> 0.0012 <= 0.0014 , 0.0013 , 31.51, 1281
> 0.0014 <= 0.0016 , 0.0015 , 43.46, 2387
> 0.0016 <= 0.0018 , 0.0017 , 61.92, 3687
> 0.0018 <= 0.002 , 0.0019 , 77.41, 3095
> 0.002 <= 0.0025 , 0.00225 , 91.10, 2733
> 0.0025 <= 0.003 , 0.00275 , 95.23, 826
> 0.003 <= 0.0035 , 0.00325 , 96.45, 243
> 0.0035 <= 0.004 , 0.00375 , 97.81, 271
> 0.004 <= 0.0045 , 0.00425 , 98.47, 133
> 0.0045 <= 0.005 , 0.00475 , 98.96, 97
> 0.005 <= 0.006 , 0.0055 , 99.32, 73
> 0.006 <= 0.007 , 0.0065 , 99.52, 39
> 0.007 <= 0.008 , 0.0075 , 99.58, 13
> 0.008 <= 0.009 , 0.0085 , 99.60, 3
> 0.012 <= 0.014 , 0.013 , 99.62, 4
> 0.014 <= 0.016 , 0.015 , 99.67, 11
> 0.016 <= 0.018 , 0.017 , 99.87, 40
> 0.018 <= 0.02 , 0.019 , 99.91, 8
> 0.02 <= 0.025 , 0.0225 , 99.99, 16
> 0.025 <= 0.0259456 , 0.0254728 , 100.00, 1
# target 50% 0.00167087
# target 75% 0.00196884
# target 90% 0.00245988
# target 99% 0.00511329
# target 99.9% 0.0192568
Ping SERVING : 19973
All done 19973 calls (plus 4 warmup) 1.767 ms avg, 1996.6 qps
Successfully wrote 4723 bytes of Json data to /data/2018-11-19-064937_grpc_istio_2000qps_10s_echo_1_8.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8080/echo
06:49:47 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:49:47 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:49:57 I periodic.go:533> T001 ended after 10.00043795s : 5000 calls. qps=499.978103458959
06:49:57 I periodic.go:533> T003 ended after 10.000900286s : 5000 calls. qps=499.9549897522096
06:49:57 I periodic.go:533> T002 ended after 10.002867119s : 5000 calls. qps=499.8566851400758
06:49:57 I periodic.go:533> T000 ended after 10.002896707s : 5000 calls. qps=499.85520659240774
Ended after 10.00291045s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014030644 +/- 0.0003993 min -0.003075726 max 0.001774659 sum 28.0556759
Aggregated Function Time : count 20000 avg 0.00036809211 +/- 0.0002785 min 0.000106432 max 0.004885469 sum 7.36184226
# range, mid point, percentile, count
>= 0.000106432 <= 0.0002 , 0.000153216 , 1.95, 390
> 0.0002 <= 0.0003 , 0.00025 , 35.20, 6649
> 0.0003 <= 0.0004 , 0.00035 , 78.69, 8700
> 0.0004 <= 0.0005 , 0.00045 , 93.55, 2970
> 0.0005 <= 0.0006 , 0.00055 , 96.77, 645
> 0.0006 <= 0.0007 , 0.00065 , 97.65, 176
> 0.0007 <= 0.0008 , 0.00075 , 97.97, 64
> 0.0008 <= 0.0009 , 0.00085 , 98.23, 52
> 0.0009 <= 0.001 , 0.00095 , 98.70, 95
> 0.001 <= 0.0011 , 0.00105 , 98.83, 25
> 0.0011 <= 0.0012 , 0.00115 , 98.95, 24
> 0.0012 <= 0.0014 , 0.0013 , 99.14, 37
> 0.0014 <= 0.0016 , 0.0015 , 99.28, 28
> 0.0016 <= 0.0018 , 0.0017 , 99.30, 5
> 0.0018 <= 0.002 , 0.0019 , 99.35, 10
> 0.002 <= 0.0025 , 0.00225 , 99.47, 23
> 0.0025 <= 0.003 , 0.00275 , 99.62, 32
> 0.003 <= 0.0035 , 0.00325 , 99.72, 18
> 0.0035 <= 0.004 , 0.00375 , 99.84, 26
> 0.004 <= 0.0045 , 0.00425 , 99.94, 19
> 0.0045 <= 0.00488547 , 0.00469273 , 100.00, 12
# target 50% 0.000334034
# target 75% 0.000391506
# target 90% 0.000476128
# target 99% 0.00125405
# target 99.9% 0.00428947
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.368 ms avg, 1999.4 qps
Successfully wrote 4174 bytes of Json data to /data/2018-11-19-064947_http_baseline_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8080/echo
06:49:57 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:49:57 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:07 I periodic.go:533> T001 ended after 10.004086629s : 5000 calls. qps=499.79575201857244
06:50:07 I periodic.go:533> T002 ended after 10.004161615s : 5000 calls. qps=499.7920058091745
06:50:07 I periodic.go:533> T003 ended after 10.004173971s : 5000 calls. qps=499.79138852382516
06:50:07 I periodic.go:533> T000 ended after 10.004184141s : 5000 calls. qps=499.79088044856894
Ended after 10.004196135s : 20000 calls. qps=1999.2
Sleep times : count 19996 avg 0.0010795527 +/- 0.0004865 min -0.003807498 max 0.001490196 sum 21.5867349
Aggregated Function Time : count 20000 avg 0.00068563113 +/- 0.0003372 min 0.000394184 max 0.005377385 sum 13.7126226
# range, mid point, percentile, count
>= 0.000394184 <= 0.0004 , 0.000397092 , 0.01, 1
> 0.0004 <= 0.0005 , 0.00045 , 0.39, 76
> 0.0005 <= 0.0006 , 0.00055 , 33.13, 6549
> 0.0006 <= 0.0007 , 0.00065 , 79.47, 9267
> 0.0007 <= 0.0008 , 0.00075 , 92.00, 2508
> 0.0008 <= 0.0009 , 0.00085 , 95.14, 628
> 0.0009 <= 0.001 , 0.00095 , 96.78, 326
> 0.001 <= 0.0011 , 0.00105 , 97.27, 99
> 0.0011 <= 0.0012 , 0.00115 , 97.62, 70
> 0.0012 <= 0.0014 , 0.0013 , 97.99, 74
> 0.0014 <= 0.0016 , 0.0015 , 98.67, 135
> 0.0016 <= 0.0018 , 0.0017 , 98.86, 39
> 0.0018 <= 0.002 , 0.0019 , 99.05, 37
> 0.002 <= 0.0025 , 0.00225 , 99.27, 45
> 0.0025 <= 0.003 , 0.00275 , 99.38, 21
> 0.003 <= 0.0035 , 0.00325 , 99.48, 21
> 0.0035 <= 0.004 , 0.00375 , 99.62, 28
> 0.004 <= 0.0045 , 0.00425 , 99.72, 20
> 0.0045 <= 0.005 , 0.00475 , 99.88, 32
> 0.005 <= 0.00537739 , 0.00518869 , 100.00, 24
# target 50% 0.000636409
# target 75% 0.000690364
# target 90% 0.000784011
# target 99% 0.00195135
# target 99.9% 0.0050629
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.686 ms avg, 1999.2 qps
Successfully wrote 4012 bytes of Json data to /data/2018-11-19-064957_http_linkerd_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8080/echo
06:50:07 I httprunner.go:82> Starting http test for fortio-echo-0.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:50:07 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-0.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:17 W periodic.go:487> T002 warning only did 4886 out of 5000 calls before reaching 10s
06:50:17 I periodic.go:533> T002 ended after 10.00158281s : 4886 calls. qps=488.5226761422975
06:50:17 W periodic.go:487> T001 warning only did 4887 out of 5000 calls before reaching 10s
06:50:17 I periodic.go:533> T001 ended after 10.001607431s : 4887 calls. qps=488.6214574721994
06:50:17 W periodic.go:487> T003 warning only did 4883 out of 5000 calls before reaching 10s
06:50:17 I periodic.go:533> T003 ended after 10.001619156s : 4883 calls. qps=488.22094941204335
06:50:17 W periodic.go:487> T000 warning only did 4880 out of 5000 calls before reaching 10s
06:50:17 I periodic.go:533> T000 ended after 10.001630156s : 4880 calls. qps=487.9204613532403
Ended after 10.001659859s : 19536 calls. qps=1953.3
Aggregated Sleep Time : count 19536 avg -0.10835381 +/- 0.07783 min -0.241552505 max 0.001158365 sum -2116.80003
# range, mid point, percentile, count
>= -0.241553 <= -0.001 , -0.121276 , 91.04, 17786
> -0.001 <= 0 , -0.0005 , 91.96, 180
> 0 <= 0.001 , 0.0005 , 99.99, 1568
> 0.001 <= 0.00115836 , 0.00107918 , 100.00, 2
# target 50% -0.109448
WARNING 91.04% of sleep were falling behind
Aggregated Function Time : count 19536 avg 0.0019222654 +/- 0.001009 min 0.000711289 max 0.016973914 sum 37.5533775
# range, mid point, percentile, count
>= 0.000711289 <= 0.0008 , 0.000755645 , 0.02, 4
> 0.0008 <= 0.0009 , 0.00085 , 0.09, 14
> 0.0009 <= 0.001 , 0.00095 , 0.32, 44
> 0.001 <= 0.0011 , 0.00105 , 1.00, 134
> 0.0011 <= 0.0012 , 0.00115 , 5.37, 854
> 0.0012 <= 0.0014 , 0.0013 , 18.91, 2644
> 0.0014 <= 0.0016 , 0.0015 , 27.81, 1738
> 0.0016 <= 0.0018 , 0.0017 , 37.28, 1851
> 0.0018 <= 0.002 , 0.0019 , 78.09, 7972
> 0.002 <= 0.0025 , 0.00225 , 94.05, 3118
> 0.0025 <= 0.003 , 0.00275 , 95.39, 262
> 0.003 <= 0.0035 , 0.00325 , 96.35, 187
> 0.0035 <= 0.004 , 0.00375 , 97.17, 162
> 0.004 <= 0.0045 , 0.00425 , 98.34, 228
> 0.0045 <= 0.005 , 0.00475 , 98.88, 106
> 0.005 <= 0.006 , 0.0055 , 99.43, 107
> 0.006 <= 0.007 , 0.0065 , 99.57, 27
> 0.007 <= 0.008 , 0.0075 , 99.59, 4
> 0.008 <= 0.009 , 0.0085 , 99.61, 4
> 0.012 <= 0.014 , 0.013 , 99.75, 27
> 0.014 <= 0.016 , 0.015 , 99.94, 37
> 0.016 <= 0.0169739 , 0.016487 , 100.00, 12
# target 50% 0.00186234
# target 75% 0.00198487
# target 90% 0.00237322
# target 99% 0.00521159
# target 99.9% 0.0155926
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19536 (100.0 %)
Response Header Sizes : count 19536 avg 209 +/- 0 min 209 max 209 sum 4083024
Response Body/Total Sizes : count 19536 avg 209 +/- 0 min 209 max 209 sum 4083024
All done 19536 calls (plus 4 warmup) 1.922 ms avg, 1953.3 qps
Successfully wrote 4478 bytes of Json data to /data/2018-11-19-065007_http_istio_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-baseline:8079
06:50:17 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:27 I periodic.go:533> T003 ended after 10.00085711s : 5000 calls. qps=499.95714817287296
06:50:27 I periodic.go:533> T001 ended after 10.00129474s : 5000 calls. qps=499.9352713806732
06:50:27 I periodic.go:533> T000 ended after 10.004774989s : 5000 calls. qps=499.76136449818966
06:50:27 I periodic.go:533> T002 ended after 10.004846483s : 5000 calls. qps=499.75779323509687
Ended after 10.004860404s : 20000 calls. qps=1999
Sleep times : count 19996 avg 0.00092703651 +/- 0.002062 min -0.036610616 max 0.001659312 sum 18.537022
Aggregated Function Time : count 20000 avg 0.0006476894 +/- 0.0005823 min 0.000140215 max 0.029542193 sum 12.9537879
# range, mid point, percentile, count
>= 0.000140215 <= 0.0002 , 0.000170108 , 0.03, 5
> 0.0002 <= 0.0003 , 0.00025 , 0.42, 79
> 0.0003 <= 0.0004 , 0.00035 , 2.29, 374
> 0.0004 <= 0.0005 , 0.00045 , 15.96, 2733
> 0.0005 <= 0.0006 , 0.00055 , 56.78, 8166
> 0.0006 <= 0.0007 , 0.00065 , 83.45, 5333
> 0.0007 <= 0.0008 , 0.00075 , 93.19, 1949
> 0.0008 <= 0.0009 , 0.00085 , 95.67, 496
> 0.0009 <= 0.001 , 0.00095 , 96.53, 172
> 0.001 <= 0.0011 , 0.00105 , 96.91, 75
> 0.0011 <= 0.0012 , 0.00115 , 97.20, 59
> 0.0012 <= 0.0014 , 0.0013 , 97.66, 90
> 0.0014 <= 0.0016 , 0.0015 , 98.07, 83
> 0.0016 <= 0.0018 , 0.0017 , 98.62, 110
> 0.0018 <= 0.002 , 0.0019 , 99.03, 82
> 0.002 <= 0.0025 , 0.00225 , 99.28, 50
> 0.0025 <= 0.003 , 0.00275 , 99.31, 7
> 0.003 <= 0.0035 , 0.00325 , 99.44, 25
> 0.0035 <= 0.004 , 0.00375 , 99.60, 32
> 0.004 <= 0.0045 , 0.00425 , 99.80, 39
> 0.0045 <= 0.005 , 0.00475 , 99.95, 32
> 0.006 <= 0.007 , 0.0065 , 99.96, 1
> 0.014 <= 0.016 , 0.015 , 99.97, 2
> 0.016 <= 0.018 , 0.017 , 99.97, 1
> 0.02 <= 0.025 , 0.0225 , 99.98, 1
> 0.025 <= 0.0295422 , 0.0272711 , 100.00, 4
# target 50% 0.000583382
# target 75% 0.000668311
# target 90% 0.000767214
# target 99% 0.00198537
# target 99.9% 0.00482813
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.648 ms avg, 1999.0 qps
Successfully wrote 4184 bytes of Json data to /data/2018-11-19-065017_grpc_baseline_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-linkerd:8079
06:50:27 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:37 I periodic.go:533> T003 ended after 10.001610133s : 5000 calls. qps=499.9195063105546
06:50:37 I periodic.go:533> T001 ended after 10.00403289s : 5000 calls. qps=499.7984367882261
06:50:37 I periodic.go:533> T002 ended after 10.005726592s : 5000 calls. qps=499.71383427543486
06:50:37 I periodic.go:533> T000 ended after 10.005742055s : 5000 calls. qps=499.7130620113712
Ended after 10.005754692s : 20000 calls. qps=1998.8
Sleep times : count 19996 avg 0.00068234437 +/- 0.0006842 min -0.007741879 max 0.001317823 sum 13.644158
Aggregated Function Time : count 20000 avg 0.0010048109 +/- 0.0004037 min 0.000453322 max 0.009496888 sum 20.096218
# range, mid point, percentile, count
>= 0.000453322 <= 0.0005 , 0.000476661 , 0.01, 1
> 0.0005 <= 0.0006 , 0.00055 , 0.04, 7
> 0.0006 <= 0.0007 , 0.00065 , 0.67, 126
> 0.0007 <= 0.0008 , 0.00075 , 11.22, 2111
> 0.0008 <= 0.0009 , 0.00085 , 36.42, 5040
> 0.0009 <= 0.001 , 0.00095 , 67.75, 6264
> 0.001 <= 0.0011 , 0.00105 , 85.88, 3627
> 0.0011 <= 0.0012 , 0.00115 , 92.26, 1276
> 0.0012 <= 0.0014 , 0.0013 , 96.08, 765
> 0.0014 <= 0.0016 , 0.0015 , 96.73, 129
> 0.0016 <= 0.0018 , 0.0017 , 97.24, 102
> 0.0018 <= 0.002 , 0.0019 , 97.91, 134
> 0.002 <= 0.0025 , 0.00225 , 98.98, 214
> 0.0025 <= 0.003 , 0.00275 , 99.30, 64
> 0.003 <= 0.0035 , 0.00325 , 99.33, 5
> 0.0035 <= 0.004 , 0.00375 , 99.39, 13
> 0.004 <= 0.0045 , 0.00425 , 99.54, 30
> 0.0045 <= 0.005 , 0.00475 , 99.80, 51
> 0.005 <= 0.006 , 0.0055 , 99.97, 34
> 0.006 <= 0.007 , 0.0065 , 99.98, 3
> 0.009 <= 0.00949689 , 0.00924844 , 100.00, 4
# target 50% 0.000943343
# target 75% 0.00104001
# target 90% 0.00116458
# target 99% 0.00253125
# target 99.9% 0.00561765
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 1.005 ms avg, 1998.8 qps
Successfully wrote 3605 bytes of Json data to /data/2018-11-19-065027_grpc_linkerd_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-0.benchmark-istio:8079
06:50:37 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-0.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:47 W periodic.go:487> T003 warning only did 4998 out of 5000 calls before reaching 10s
06:50:47 I periodic.go:533> T003 ended after 10.001177803s : 4998 calls. qps=499.74114033856864
06:50:47 I periodic.go:533> T000 ended after 10.004823251s : 5000 calls. qps=499.75895371267467
06:50:47 I periodic.go:533> T002 ended after 10.017646444s : 5000 calls. qps=499.11923204224433
06:50:47 I periodic.go:533> T001 ended after 10.017767796s : 5000 calls. qps=499.11318587324945
Ended after 10.017806448s : 19998 calls. qps=1996.2
Aggregated Sleep Time : count 19995 avg -0.010757912 +/- 0.02632 min -0.156494413 max 0.001400924 sum -215.104452
# range, mid point, percentile, count
>= -0.156494 <= -0.001 , -0.0787472 , 43.96, 8789
> -0.001 <= 0 , -0.0005 , 71.13, 5433
> 0 <= 0.001 , 0.0005 , 98.24, 5422
> 0.001 <= 0.00140092 , 0.00120046 , 100.00, 351
# target 50% -0.000777563
WARNING 43.96% of sleep were falling behind
Aggregated Function Time : count 19998 avg 0.0017510212 +/- 0.001217 min 0.00047982 max 0.038140231 sum 35.0169223
# range, mid point, percentile, count
>= 0.00047982 <= 0.0005 , 0.00048991 , 0.02, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.37, 70
> 0.0006 <= 0.0007 , 0.00065 , 1.82, 291
> 0.0007 <= 0.0008 , 0.00075 , 5.14, 664
> 0.0008 <= 0.0009 , 0.00085 , 11.13, 1197
> 0.0009 <= 0.001 , 0.00095 , 17.36, 1246
> 0.001 <= 0.0011 , 0.00105 , 21.52, 833
> 0.0011 <= 0.0012 , 0.00115 , 24.99, 694
> 0.0012 <= 0.0014 , 0.0013 , 31.94, 1390
> 0.0014 <= 0.0016 , 0.0015 , 44.58, 2528
> 0.0016 <= 0.0018 , 0.0017 , 62.65, 3612
> 0.0018 <= 0.002 , 0.0019 , 77.97, 3064
> 0.002 <= 0.0025 , 0.00225 , 91.32, 2670
> 0.0025 <= 0.003 , 0.00275 , 95.36, 808
> 0.003 <= 0.0035 , 0.00325 , 96.60, 249
> 0.0035 <= 0.004 , 0.00375 , 97.83, 246
> 0.004 <= 0.0045 , 0.00425 , 98.53, 139
> 0.0045 <= 0.005 , 0.00475 , 98.96, 86
> 0.005 <= 0.006 , 0.0055 , 99.42, 92
> 0.006 <= 0.007 , 0.0065 , 99.57, 30
> 0.007 <= 0.008 , 0.0075 , 99.60, 7
> 0.008 <= 0.009 , 0.0085 , 99.61, 1
> 0.012 <= 0.014 , 0.013 , 99.64, 7
> 0.014 <= 0.016 , 0.015 , 99.88, 48
> 0.016 <= 0.018 , 0.017 , 99.98, 19
> 0.035 <= 0.0381402 , 0.0365701 , 100.00, 4
# target 50% 0.00165997
# target 75% 0.00196126
# target 90% 0.0024506
# target 99% 0.00508717
# target 99.9% 0.016316
Ping SERVING : 19998
All done 19998 calls (plus 4 warmup) 1.751 ms avg, 1996.2 qps
Successfully wrote 4461 bytes of Json data to /data/2018-11-19-065037_grpc_istio_2000qps_10s_echo_0_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8080/echo
06:50:47 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-baseline:8080/echo with 4 threads at 2000.0 qps
06:50:47 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-baseline:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:50:57 I periodic.go:533> T003 ended after 10.00039676s : 5000 calls. qps=499.9801627870613
06:50:57 I periodic.go:533> T001 ended after 10.000930958s : 5000 calls. qps=499.9534564330106
06:50:57 I periodic.go:533> T002 ended after 10.00296256s : 5000 calls. qps=499.85191587081175
06:50:57 I periodic.go:533> T000 ended after 10.002994221s : 5000 calls. qps=499.8503337633789
Ended after 10.003038268s : 20000 calls. qps=1999.4
Sleep times : count 19996 avg 0.0014267061 +/- 0.0003892 min -0.003200235 max 0.001743903 sum 28.5284149
Aggregated Function Time : count 20000 avg 0.00035146688 +/- 0.0002695 min 9.1474e-05 max 0.004882372 sum 7.02933755
# range, mid point, percentile, count
>= 9.1474e-05 <= 0.0001 , 9.5737e-05 , 0.01, 1
> 0.0001 <= 0.0002 , 0.00015 , 2.77, 552
> 0.0002 <= 0.0003 , 0.00025 , 42.98, 8043
> 0.0003 <= 0.0004 , 0.00035 , 84.01, 8206
> 0.0004 <= 0.0005 , 0.00045 , 94.88, 2173
> 0.0005 <= 0.0006 , 0.00055 , 97.26, 477
> 0.0006 <= 0.0007 , 0.00065 , 97.94, 135
> 0.0007 <= 0.0008 , 0.00075 , 98.20, 54
> 0.0008 <= 0.0009 , 0.00085 , 98.37, 33
> 0.0009 <= 0.001 , 0.00095 , 98.71, 68
> 0.001 <= 0.0011 , 0.00105 , 98.78, 14
> 0.0011 <= 0.0012 , 0.00115 , 98.92, 29
> 0.0012 <= 0.0014 , 0.0013 , 99.08, 32
> 0.0014 <= 0.0016 , 0.0015 , 99.19, 21
> 0.0016 <= 0.0018 , 0.0017 , 99.32, 26
> 0.0018 <= 0.002 , 0.0019 , 99.45, 26
> 0.002 <= 0.0025 , 0.00225 , 99.55, 19
> 0.0025 <= 0.003 , 0.00275 , 99.67, 25
> 0.003 <= 0.0035 , 0.00325 , 99.75, 17
> 0.0035 <= 0.004 , 0.00375 , 99.86, 20
> 0.004 <= 0.0045 , 0.00425 , 99.92, 12
> 0.0045 <= 0.00488237 , 0.00469119 , 100.00, 17
# target 50% 0.000317109
# target 75% 0.00037804
# target 90% 0.000455131
# target 99% 0.00129375
# target 99.9% 0.004375
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.351 ms avg, 1999.4 qps
Successfully wrote 4272 bytes of Json data to /data/2018-11-19-065047_http_baseline_2000qps_10s_echo_1_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8080/echo
06:50:57 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-linkerd:8080/echo with 4 threads at 2000.0 qps
06:50:57 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-linkerd:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:51:07 I periodic.go:533> T002 ended after 10.000701633s : 5000 calls. qps=499.9649208112716
06:51:07 I periodic.go:533> T000 ended after 10.00110535s : 5000 calls. qps=499.94473860831795
06:51:07 I periodic.go:533> T001 ended after 10.003304576s : 5000 calls. qps=499.8348257830753
06:51:07 I periodic.go:533> T003 ended after 10.003360676s : 5000 calls. qps=499.8320226517443
Ended after 10.003374029s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.001051018 +/- 0.0005256 min -0.006430864 max 0.00152206 sum 21.016155
Aggregated Function Time : count 20000 avg 0.00071110134 +/- 0.0003328 min 0.000339827 max 0.005572601 sum 14.2220268
# range, mid point, percentile, count
>= 0.000339827 <= 0.0004 , 0.000369913 , 0.01, 2
> 0.0004 <= 0.0005 , 0.00045 , 0.31, 60
> 0.0005 <= 0.0006 , 0.00055 , 20.79, 4095
> 0.0006 <= 0.0007 , 0.00065 , 69.17, 9677
> 0.0007 <= 0.0008 , 0.00075 , 89.07, 3980
> 0.0008 <= 0.0009 , 0.00085 , 94.69, 1124
> 0.0009 <= 0.001 , 0.00095 , 96.50, 361
> 0.001 <= 0.0011 , 0.00105 , 97.28, 156
> 0.0011 <= 0.0012 , 0.00115 , 97.56, 56
> 0.0012 <= 0.0014 , 0.0013 , 98.00, 89
> 0.0014 <= 0.0016 , 0.0015 , 98.49, 98
> 0.0016 <= 0.0018 , 0.0017 , 98.93, 88
> 0.0018 <= 0.002 , 0.0019 , 99.11, 35
> 0.002 <= 0.0025 , 0.00225 , 99.29, 37
> 0.0025 <= 0.003 , 0.00275 , 99.37, 16
> 0.003 <= 0.0035 , 0.00325 , 99.46, 18
> 0.0035 <= 0.004 , 0.00375 , 99.58, 25
> 0.004 <= 0.0045 , 0.00425 , 99.75, 32
> 0.0045 <= 0.005 , 0.00475 , 99.94, 39
> 0.005 <= 0.0055726 , 0.0052863 , 100.00, 12
# target 50% 0.00066038
# target 75% 0.000729296
# target 90% 0.000816548
# target 99% 0.00188
# target 99.9% 0.00489744
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 20000 (100.0 %)
Response Header Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
Response Body/Total Sizes : count 20000 avg 75 +/- 0 min 75 max 75 sum 1500000
All done 20000 calls (plus 4 warmup) 0.711 ms avg, 1999.3 qps
Successfully wrote 4019 bytes of Json data to /data/2018-11-19-065057_http_linkerd_2000qps_10s_echo_1_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8080/echo
06:51:07 I httprunner.go:82> Starting http test for fortio-echo-1.benchmark-istio:8080/echo with 4 threads at 2000.0 qps
06:51:07 W http_client.go:142> Assuming http:// on missing scheme for 'fortio-echo-1.benchmark-istio:8080/echo'
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:51:17 W periodic.go:487> T002 warning only did 4936 out of 5000 calls before reaching 10s
06:51:17 I periodic.go:533> T002 ended after 10.001658705s : 4936 calls. qps=493.5181398993758
06:51:17 W periodic.go:487> T000 warning only did 4934 out of 5000 calls before reaching 10s
06:51:17 I periodic.go:533> T000 ended after 10.003998924s : 4934 calls. qps=493.20277195983437
06:51:17 W periodic.go:487> T003 warning only did 4927 out of 5000 calls before reaching 10s
06:51:17 I periodic.go:533> T003 ended after 10.004017537s : 4927 calls. qps=492.50213544482716
06:51:17 W periodic.go:487> T001 warning only did 4934 out of 5000 calls before reaching 10s
06:51:17 I periodic.go:533> T001 ended after 10.004043504s : 4934 calls. qps=493.200574150562
Ended after 10.00405501s : 19731 calls. qps=1972.3
Aggregated Sleep Time : count 19731 avg -0.064355236 +/- 0.0399 min -0.150362832 max 0.001250693 sum -1269.79315
# range, mid point, percentile, count
>= -0.150363 <= -0.001 , -0.0756814 , 92.93, 18337
> -0.001 <= 0 , -0.0005 , 93.30, 73
> 0 <= 0.001 , 0.0005 , 99.98, 1318
> 0.001 <= 0.00125069 , 0.00112535 , 100.00, 3
# target 50% -0.0700078
WARNING 92.93% of sleep were falling behind
Aggregated Function Time : count 19731 avg 0.0019104902 +/- 0.0009615 min 0.000548161 max 0.017634647 sum 37.6958814
# range, mid point, percentile, count
>= 0.000548161 <= 0.0006 , 0.00057408 , 0.02, 3
> 0.0006 <= 0.0007 , 0.00065 , 0.02, 1
> 0.0007 <= 0.0008 , 0.00075 , 0.05, 5
> 0.0008 <= 0.0009 , 0.00085 , 0.14, 19
> 0.0009 <= 0.001 , 0.00095 , 0.40, 51
> 0.001 <= 0.0011 , 0.00105 , 0.94, 107
> 0.0011 <= 0.0012 , 0.00115 , 5.07, 815
> 0.0012 <= 0.0014 , 0.0013 , 18.68, 2684
> 0.0014 <= 0.0016 , 0.0015 , 27.70, 1781
> 0.0016 <= 0.0018 , 0.0017 , 38.76, 2181
> 0.0018 <= 0.002 , 0.0019 , 80.38, 8213
> 0.002 <= 0.0025 , 0.00225 , 94.38, 2762
> 0.0025 <= 0.003 , 0.00275 , 95.58, 236
> 0.003 <= 0.0035 , 0.00325 , 96.36, 154
> 0.0035 <= 0.004 , 0.00375 , 97.12, 151
> 0.004 <= 0.0045 , 0.00425 , 98.20, 213
> 0.0045 <= 0.005 , 0.00475 , 98.89, 135
> 0.005 <= 0.006 , 0.0055 , 99.34, 89
> 0.006 <= 0.007 , 0.0065 , 99.55, 43
> 0.007 <= 0.008 , 0.0075 , 99.59, 8
> 0.01 <= 0.012 , 0.011 , 99.64, 8
> 0.012 <= 0.014 , 0.013 , 99.92, 56
> 0.014 <= 0.016 , 0.015 , 99.98, 12
> 0.016 <= 0.0176346 , 0.0168173 , 100.00, 4
# target 50% 0.00185402
# target 75% 0.00197414
# target 90% 0.00234357
# target 99% 0.00525494
# target 99.9% 0.0138668
Wrote profile data to /data/profile.{cpu|mem}
Sockets used: 4 (for perfect keepalive, would be 4)
Code 200 : 19731 (100.0 %)
Response Header Sizes : count 19731 avg 209 +/- 0 min 209 max 209 sum 4123779
Response Body/Total Sizes : count 19731 avg 209 +/- 0 min 209 max 209 sum 4123779
All done 19731 calls (plus 4 warmup) 1.910 ms avg, 1972.3 qps
Successfully wrote 4740 bytes of Json data to /data/2018-11-19-065107_http_istio_2000qps_10s_echo_1_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-baseline:8079
06:51:17 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-baseline:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:51:27 I periodic.go:533> T003 ended after 10.000813779s : 5000 calls. qps=499.9593143609119
06:51:27 I periodic.go:533> T000 ended after 10.001204642s : 5000 calls. qps=499.9397751549378
06:51:27 I periodic.go:533> T002 ended after 10.003334322s : 5000 calls. qps=499.83333946998715
06:51:27 I periodic.go:533> T001 ended after 10.00339285s : 5000 calls. qps=499.830415037634
Ended after 10.003426818s : 20000 calls. qps=1999.3
Sleep times : count 19996 avg 0.00090208411 +/- 0.002172 min -0.037421146 max 0.001678118 sum 18.0380739
Aggregated Function Time : count 20000 avg 0.0006479902 +/- 0.0005274 min 0.000188323 max 0.029453075 sum 12.9598041
# range, mid point, percentile, count
>= 0.000188323 <= 0.0002 , 0.000194161 , 0.01, 1
> 0.0002 <= 0.0003 , 0.00025 , 0.28, 54
> 0.0003 <= 0.0004 , 0.00035 , 1.93, 331
> 0.0004 <= 0.0005 , 0.00045 , 14.95, 2603
> 0.0005 <= 0.0006 , 0.00055 , 55.58, 8127
> 0.0006 <= 0.0007 , 0.00065 , 82.94, 5472
> 0.0007 <= 0.0008 , 0.00075 , 92.53, 1917
> 0.0008 <= 0.0009 , 0.00085 , 95.45, 586
> 0.0009 <= 0.001 , 0.00095 , 96.44, 196
> 0.001 <= 0.0011 , 0.00105 , 96.74, 61
> 0.0011 <= 0.0012 , 0.00115 , 97.08, 67
> 0.0012 <= 0.0014 , 0.0013 , 97.53, 92
> 0.0014 <= 0.0016 , 0.0015 , 97.88, 69
> 0.0016 <= 0.0018 , 0.0017 , 98.47, 118
> 0.0018 <= 0.002 , 0.0019 , 99.03, 113
> 0.002 <= 0.0025 , 0.00225 , 99.33, 60
> 0.0025 <= 0.003 , 0.00275 , 99.48, 30
> 0.003 <= 0.0035 , 0.00325 , 99.59, 21
> 0.0035 <= 0.004 , 0.00375 , 99.68, 18
> 0.004 <= 0.0045 , 0.00425 , 99.90, 44
> 0.0045 <= 0.005 , 0.00475 , 99.94, 8
> 0.005 <= 0.006 , 0.0055 , 99.96, 4
> 0.008 <= 0.009 , 0.0085 , 99.98, 4
> 0.025 <= 0.0294531 , 0.0272265 , 100.00, 4
# target 50% 0.000586268
# target 75% 0.00067098
# target 90% 0.000773657
# target 99% 0.00198761
# target 99.9% 0.0045
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.648 ms avg, 1999.3 qps
Successfully wrote 3972 bytes of Json data to /data/2018-11-19-065117_grpc_baseline_2000qps_10s_echo_1_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-linkerd:8079
06:51:27 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-linkerd:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
06:51:38 I periodic.go:533> T002 ended after 10.001018684s : 5000 calls. qps=499.949070988057
06:51:38 I periodic.go:533> T003 ended after 10.001772638s : 5000 calls. qps=499.91138380844285
06:51:38 I periodic.go:533> T001 ended after 10.00195676s : 5000 calls. qps=499.90218114080307
06:51:38 I periodic.go:533> T000 ended after 10.002013905s : 5000 calls. qps=499.89932502498357
Ended after 10.002036889s : 20000 calls. qps=1999.6
Sleep times : count 19996 avg 0.0007161892 +/- 0.0006497 min -0.005703012 max 0.001349454 sum 14.3209193
Aggregated Function Time : count 20000 avg 0.00098308017 +/- 0.0003922 min 0.000447354 max 0.00743837 sum 19.6616035
# range, mid point, percentile, count
>= 0.000447354 <= 0.0005 , 0.000473677 , 0.01, 3
> 0.0005 <= 0.0006 , 0.00055 , 0.10, 16
> 0.0006 <= 0.0007 , 0.00065 , 1.11, 203
> 0.0007 <= 0.0008 , 0.00075 , 14.23, 2625
> 0.0008 <= 0.0009 , 0.00085 , 42.34, 5621
> 0.0009 <= 0.001 , 0.00095 , 72.90, 6112
> 0.001 <= 0.0011 , 0.00105 , 88.97, 3213
> 0.0011 <= 0.0012 , 0.00115 , 93.53, 912
> 0.0012 <= 0.0014 , 0.0013 , 96.06, 506
> 0.0014 <= 0.0016 , 0.0015 , 96.94, 177
> 0.0016 <= 0.0018 , 0.0017 , 97.58, 128
> 0.0018 <= 0.002 , 0.0019 , 98.35, 154
> 0.002 <= 0.0025 , 0.00225 , 99.02, 133
> 0.0025 <= 0.003 , 0.00275 , 99.23, 44
> 0.003 <= 0.0035 , 0.00325 , 99.31, 16
> 0.0035 <= 0.004 , 0.00375 , 99.39, 16
> 0.004 <= 0.0045 , 0.00425 , 99.50, 21
> 0.0045 <= 0.005 , 0.00475 , 99.75, 51
> 0.005 <= 0.006 , 0.0055 , 99.97, 44
> 0.006 <= 0.007 , 0.0065 , 99.98, 2
> 0.007 <= 0.00743837 , 0.00721918 , 100.00, 3
# target 50% 0.000925065
# target 75% 0.00101307
# target 90% 0.0011227
# target 99% 0.00248872
# target 99.9% 0.00565909
Ping SERVING : 20000
All done 20000 calls (plus 4 warmup) 0.983 ms avg, 1999.6 qps
Successfully wrote 3593 bytes of Json data to /data/2018-11-19-065128_grpc_linkerd_2000qps_10s_echo_1_9.json
Fortio 1.3.1-pre running at 2000 queries per second, 1->1 procs, for 10s: fortio-echo-1.benchmark-istio:8079
06:51:38 I grpcrunner.go:152> Starting GRPC Ping test for fortio-echo-1.benchmark-istio:8079 with 1*4 threads at 2000.0 qps
Starting at 2000 qps with 4 thread(s) [gomax 1] for 10s : 5000 calls each (total 20000)
